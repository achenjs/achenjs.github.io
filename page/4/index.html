<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="4ojPfoiYYCqjdgZWX0Kh4_aRCx0hxjnRC5eSIvnoW1w" />




















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.4.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
<meta property="og:type" content="website">
<meta property="og:title" content="achençš„ä¸ªäººåšå®¢">
<meta property="og:url" content="https://achenjs.github.io/page/4/index.html">
<meta property="og:site_name" content="achençš„ä¸ªäººåšå®¢">
<meta property="og:description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="achençš„ä¸ªäººåšå®¢">
<meta name="twitter:description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">






  <link rel="canonical" href="https://achenjs.github.io/page/4/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>achençš„ä¸ªäººåšå®¢</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

  <meta name="google-site-verification" content="4ojPfoiYYCqjdgZWX0Kh4_aRCx0hxjnRC5eSIvnoW1w" />
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">achençš„ä¸ªäººåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">ä¸€ä¸ªèƒ½åŠ›æœ‰é™çš„å‰ç«¯</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />é¦–é¡µ</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />å½’æ¡£<span class="badge">49</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />å…¬ç›Š 404</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />æœç´¢</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2020/02/20/2020/2æœˆ/0220/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/20/2020/2æœˆ/0220/" itemprop="url">
                  Symbolçš„åº”ç”¨åœºæ™¯
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-20T00:00:00+08:00">2020-02-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 11:33:10" itemprop="dateModified" datetime="2020-05-25T11:33:10+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Symbolçš„åº”ç”¨åœºæ™¯"><a href="#Symbolçš„åº”ç”¨åœºæ™¯" class="headerlink" title="Symbolçš„åº”ç”¨åœºæ™¯"></a>Symbolçš„åº”ç”¨åœºæ™¯</h4><h5 id="åº”ç”¨åœºæ™¯1ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§åï¼ˆkeyï¼‰"><a href="#åº”ç”¨åœºæ™¯1ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§åï¼ˆkeyï¼‰" class="headerlink" title="åº”ç”¨åœºæ™¯1ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§åï¼ˆkeyï¼‰"></a>åº”ç”¨åœºæ™¯1ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§åï¼ˆkeyï¼‰</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>()]: <span class="string">'test'</span>,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(obj); <span class="comment">// ['a', 'b']</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);   <span class="comment">//  åˆ†åˆ«è¾“å‡º: a å’Œ b</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(obj);  <span class="comment">//   ['a', 'b']</span></span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šä»£ç å¯çŸ¥ï¼ŒSymbolç±»å‹çš„keyæ˜¯ä¸èƒ½é€šè¿‡Object.keys()æˆ–è€…forâ€¦inæ¥æšä¸¾çš„ï¼Œå®ƒæœªè¢«åŒ…å«å¯¹è±¡è‡ªèº«çš„å±æ€§åé›†åˆï¼ˆproperty namesï¼‰ä¹‹ä¸­ã€‚æ‰€ä»¥ï¼Œåˆ©ç”¨è¯¥ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›ä¸éœ€è¦å¯¹å¤–æ“ä½œå’Œè®¿é—®çš„å±æ€§ä½¿ç”¨Symbolæ¥å®šä¹‰ã€‚</p>
<h5 id="åº”ç”¨åœºæ™¯2ï¼šä½¿ç”¨Symbolæ¥æ›¿ä»£å¸¸é‡"><a href="#åº”ç”¨åœºæ™¯2ï¼šä½¿ç”¨Symbolæ¥æ›¿ä»£å¸¸é‡" class="headerlink" title="åº”ç”¨åœºæ™¯2ï¼šä½¿ç”¨Symbolæ¥æ›¿ä»£å¸¸é‡"></a>åº”ç”¨åœºæ™¯2ï¼šä½¿ç”¨Symbolæ¥æ›¿ä»£å¸¸é‡</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TYPE_AUDIO = <span class="string">'AUDIO'</span></span><br><span class="line"><span class="keyword">const</span> TYPE_VIDEO = <span class="string">'VIDEO'</span></span><br><span class="line"><span class="keyword">const</span> TYPE_IMAGE = <span class="string">'IMAGE'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleFileResource</span>(<span class="params">resource</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(resource.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> TYPE_AUDIO:</span><br><span class="line">      playAudio(resource)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> TYPE_VIDEO:</span><br><span class="line">      playVideo(resource)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> TYPE_IMAGE:</span><br><span class="line">      previewImage(resource)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Unknown type of resource'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šé¢çš„ä»£ç ä¸­é‚£æ ·ï¼Œæˆ‘ä»¬ç»å¸¸å®šä¹‰ä¸€ç»„å¸¸é‡æ¥ä»£è¡¨ä¸€ç§ä¸šåŠ¡é€»è¾‘ä¸‹çš„å‡ ä¸ªä¸åŒç±»å‹ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›è¿™å‡ ä¸ªå¸¸é‡ä¹‹é—´æ˜¯å”¯ä¸€çš„å…³ç³»ï¼Œå¸¸é‡å°‘çš„æ—¶å€™è¿˜ç®—å¥½ï¼Œä½†æ˜¯å¸¸é‡ä¸€å¤šï¼Œä½ å¯èƒ½è¿˜å¾—èŠ±ç‚¹è„‘å­å¥½å¥½ä¸ºä»–ä»¬å–ä¸ªå¥½ç‚¹çš„åå­—ã€‚</p>
<p>ç°åœ¨æœ‰äº†Symbolï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…è¿™ä¹ˆéº»çƒ¦äº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TYPE_AUDIO = <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="keyword">const</span> TYPE_VIDEO = <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="keyword">const</span> TYPE_IMAGE = <span class="built_in">Symbol</span>()</span><br></pre></td></tr></table></figure>
<h5 id="åº”ç”¨åœºæ™¯3ï¼šä½¿ç”¨Symbolå®šä¹‰ç±»çš„ç§æœ‰å±æ€§-æ–¹æ³•"><a href="#åº”ç”¨åœºæ™¯3ï¼šä½¿ç”¨Symbolå®šä¹‰ç±»çš„ç§æœ‰å±æ€§-æ–¹æ³•" class="headerlink" title="åº”ç”¨åœºæ™¯3ï¼šä½¿ç”¨Symbolå®šä¹‰ç±»çš„ç§æœ‰å±æ€§/æ–¹æ³•"></a>åº”ç”¨åœºæ™¯3ï¼šä½¿ç”¨Symbolå®šä¹‰ç±»çš„ç§æœ‰å±æ€§/æ–¹æ³•</h5><p>ä½¿ç”¨çš„å°‘</p>
<h3 id="å½»åº•ææ‡‚æµè§ˆå™¨Event-loop"><a href="#å½»åº•ææ‡‚æµè§ˆå™¨Event-loop" class="headerlink" title="å½»åº•ææ‡‚æµè§ˆå™¨Event-loop"></a>å½»åº•ææ‡‚æµè§ˆå™¨Event-loop</h3><h4 id="1-é¢„å¤‡çŸ¥è¯†"><a href="#1-é¢„å¤‡çŸ¥è¯†" class="headerlink" title="1. é¢„å¤‡çŸ¥è¯†"></a>1. é¢„å¤‡çŸ¥è¯†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScriptçš„è¿è¡Œæœºåˆ¶</span><br></pre></td></tr></table></figure>
<p>(1) æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚<br>(2) ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚<br>(3) ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚<br>(4) ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥</p>
<p>æ¦‚å†µå°±æ˜¯ï¼šè°ƒç”¨æ ˆä¸­çš„åŒæ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆå†…è¢«æ¸…ç©ºäº†ï¼Œå°±ä»£è¡¨ä¸»çº¿ç¨‹ç©ºé—²äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå»ä»»åŠ¡é˜Ÿåˆ—ä¸­æŒ‰ç…§é¡ºåºè¯»å–ä¸€ä¸ªä»»åŠ¡æ”¾å…¥åˆ°æ ˆä¸­æ‰§è¡Œã€‚æ¯æ¬¡æ ˆå†…è¢«æ¸…ç©ºï¼Œéƒ½ä¼šå»è¯»å–ä»»åŠ¡é˜Ÿåˆ—æœ‰æ²¡æœ‰ä»»åŠ¡ï¼Œæœ‰å°±è¯»å–æ‰§è¡Œï¼Œä¸€ç›´å¾ªç¯è¯»å–-æ‰§è¡Œçš„æ“ä½œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScriptä¸­æœ‰ä¸¤ç§å¼‚æ­¥ä»»åŠ¡ï¼š</span><br></pre></td></tr></table></figure>
<ol>
<li>å®ä»»åŠ¡ï¼šscriptï¼ˆæ•´ä½“ä»£ç ï¼‰ï¼ŒsetTimeoutã€setIntervalã€setImmediateã€I/Oã€UI rendering</li>
<li>å¾®ä»»åŠ¡ï¼šprocess.nextTickï¼ˆNodejsï¼‰ã€Promiseã€Object.observeã€ MutationObServer</li>
</ol>
<h4 id="2-äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ä¸»çº¿ç¨‹ä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–æ‰§è¡Œäº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œè¿™ä¸ªæœºåˆ¶è¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯ã€‚æ­¤æœºåˆ¶å…·ä½“å¦‚ä¸‹ï¼šä¸»çº¿ç¨‹ä¼šä¸æ–­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æŒ‰é¡ºåºè¯»å–ä»»åŠ¡æ‰§è¡Œï¼Œæ¯æ‰§è¡Œä¸€ä¸ªä»»åŠ¡éƒ½ä¼šæ£€æŸ¥microtaské˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼ˆæ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡çš„å…·ä½“æ ‡å¿—æ˜¯å‡½æ•°æ‰§è¡Œæ ˆä¸ºç©ºï¼‰ï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™ä¼šä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ‰€æœ‰microtaskã€‚ç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯å»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œã€‚</p>
<p><strong>å½“å‰æ‰§è¡Œæ ˆæ‰§è¡Œå®Œæ¯•æ—¶ä¼šç«‹åˆ»å…ˆå¤„ç†æ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„äº‹ä»¶, ç„¶åå†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶ã€‚åŒä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­, å¾®ä»»åŠ¡æ°¸è¿œåœ¨å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚</strong></p>
<h4 id="3-ä¸ºä»€ä¹ˆä¼šéœ€è¦event-loop"><a href="#3-ä¸ºä»€ä¹ˆä¼šéœ€è¦event-loop" class="headerlink" title="3. ä¸ºä»€ä¹ˆä¼šéœ€è¦event-loop?"></a>3. ä¸ºä»€ä¹ˆä¼šéœ€è¦event-loop?</h4><p>å› ä¸º JavaScript æ˜¯å•çº¿ç¨‹çš„ã€‚å•çº¿ç¨‹å°±æ„å‘³ç€ï¼Œæ‰€æœ‰ä»»åŠ¡éœ€è¦æ’é˜Ÿï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œæ‰ä¼šæ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœå‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œåä¸€ä¸ªä»»åŠ¡å°±ä¸å¾—ä¸ä¸€ç›´ç­‰ç€ã€‚ä¸ºäº†åè°ƒäº‹ä»¶ï¼ˆeventï¼‰ï¼Œç”¨æˆ·äº¤äº’ï¼ˆuser interactionï¼‰ï¼Œè„šæœ¬ï¼ˆscriptï¼‰ï¼Œæ¸²æŸ“ï¼ˆrenderingï¼‰ï¼Œç½‘ç»œï¼ˆnetworkingï¼‰ç­‰ï¼Œç”¨æˆ·ä»£ç†ï¼ˆuser agentï¼‰å¿…é¡»ä½¿ç”¨äº‹ä»¶å¾ªç¯ï¼ˆevent loopsï¼‰ã€‚</p>
<h4 id="nodeä¸­çš„event-loopä¸æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚"><a href="#nodeä¸­çš„event-loopä¸æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚" class="headerlink" title="nodeä¸­çš„event-loopä¸æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚"></a>nodeä¸­çš„event-loopä¸æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚</h4><p>æµè§ˆå™¨å’Œ Node ç¯å¢ƒä¸‹ï¼Œmicrotask ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œæ—¶æœºä¸åŒ</p>
<ul>
<li>Node ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œ</li>
<li>æµè§ˆå™¨ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„ macrotask æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œ</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'timer1'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'timer2'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµè§ˆå™¨ start=&gt;end=&gt;promise3=&gt;timer1=&gt;promise1=&gt;timer2=&gt;promise2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// node start=&gt;end=&gt;promise3=&gt;timer1=&gt;timer2=&gt;promise1=&gt;promise2</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/10/09/2019/æµ…è°ˆiframe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/09/2019/æµ…è°ˆiframe/" itemprop="url">
                  iframeçš„ä¼˜ç¼ºç‚¹
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-09 11:14:34" itemprop="dateCreated datePublished" datetime="2019-10-09T11:14:34+08:00">2019-10-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-05 14:14:23" itemprop="dateModified" datetime="2020-03-05T14:14:23+08:00">2020-03-05</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="iframeçš„ä¼˜ç¼ºç‚¹"><a href="#iframeçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="iframeçš„ä¼˜ç¼ºç‚¹"></a>iframeçš„ä¼˜ç¼ºç‚¹</h1><h2 id="iframeçš„ä¼˜ç‚¹ï¼š"><a href="#iframeçš„ä¼˜ç‚¹ï¼š" class="headerlink" title="iframeçš„ä¼˜ç‚¹ï¼š"></a>iframeçš„ä¼˜ç‚¹ï¼š</h2><ol>
<li><p>iframeèƒ½å¤ŸåŸå°ä¸åŠ¨çš„æŠŠåµŒå…¥çš„ç½‘é¡µå±•ç°å‡ºæ¥ã€‚</p>
</li>
<li><p>å¦‚æœæœ‰å¤šä¸ªç½‘é¡µå¼•ç”¨iframeï¼Œé‚£ä¹ˆä½ åªéœ€è¦ä¿®æ”¹iframeçš„å†…å®¹ï¼Œå°±å¯ä»¥å®ç°è°ƒç”¨çš„æ¯ä¸€ä¸ªé¡µé¢å†…å®¹çš„æ›´æ”¹ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</p>
</li>
<li><p>ç½‘é¡µå¦‚æœä¸ºäº†ç»Ÿä¸€é£æ ¼ï¼Œå¤´éƒ¨å’Œç‰ˆæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±å¯ä»¥å†™æˆä¸€ä¸ªé¡µé¢ï¼Œç”¨iframeæ¥åµŒå¥—ï¼Œå¯ä»¥å¢åŠ ä»£ç çš„å¯é‡ç”¨ã€‚</p>
</li>
<li><p>å¦‚æœé‡åˆ°åŠ è½½ç¼“æ…¢çš„ç¬¬ä¸‰æ–¹å†…å®¹å¦‚å›¾æ ‡å’Œå¹¿å‘Šï¼Œè¿™äº›é—®é¢˜å¯ä»¥ç”±iframeæ¥è§£å†³ã€‚</p>
</li>
</ol>
<h2 id="iframeçš„ç¼ºç‚¹ï¼š"><a href="#iframeçš„ç¼ºç‚¹ï¼š" class="headerlink" title="iframeçš„ç¼ºç‚¹ï¼š"></a>iframeçš„ç¼ºç‚¹ï¼š</h2><ol>
<li><p>ä¼šäº§ç”Ÿå¾ˆå¤šé¡µé¢ï¼Œä¸å®¹æ˜“ç®¡ç†ã€‚</p>
</li>
<li><p>iframeæ¡†æ¶ç»“æ„æœ‰æ—¶ä¼šè®©äººæ„Ÿåˆ°è¿·æƒ‘ï¼Œå¦‚æœæ¡†æ¶ä¸ªæ•°å¤šçš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸Šä¸‹ã€å·¦å³æ»šåŠ¨æ¡ï¼Œä¼šåˆ†æ•£è®¿é—®è€…çš„æ³¨æ„åŠ›ï¼Œç”¨æˆ·ä½“éªŒåº¦å·®ã€‚</p>
</li>
<li><p>ä»£ç å¤æ‚ï¼Œæ— æ³•è¢«ä¸€äº›æœç´¢å¼•æ“ç´¢å¼•åˆ°ï¼Œè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼Œç°åœ¨çš„æœç´¢å¼•æ“çˆ¬è™«è¿˜ä¸èƒ½å¾ˆå¥½çš„å¤„ç†iframeä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥ä½¿ç”¨iframeä¼šä¸åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ã€‚</p>
</li>
<li><p>å¾ˆå¤šçš„ç§»åŠ¨è®¾å¤‡ï¼ˆPDA æ‰‹æœºï¼‰æ— æ³•å®Œå…¨æ˜¾ç¤ºæ¡†æ¶ï¼Œè®¾å¤‡å…¼å®¹æ€§å·®ã€‚</p>
</li>
<li><p>iframeæ¡†æ¶é¡µé¢ä¼šå¢åŠ æœåŠ¡å™¨çš„httpè¯·æ±‚ï¼Œå¯¹äºå¤§å‹ç½‘ç«™ä¸æ˜¯å¯å–çš„ã€‚</p>
</li>
</ol>
<h3 id="iframeè¿ç§»é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ"><a href="#iframeè¿ç§»é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="iframeè¿ç§»é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ"></a>iframeè¿ç§»é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</h3><ol>
<li>import React, { propTypes } from â€˜reactâ€™;</li>
</ol>
<p>error: PropTypes is undefined;</p>
<p>å‡ºç°åŸå› : Reactåœ¨æ–°ç‰ˆæœ¬ä¸­åºŸå¼ƒäº†é›†æˆç±»ä¼¼propTypesè¿™ç§ç¬¬ä¸‰æ–¹åº“æ–¹æ¡ˆã€‚</p>
<p>è§£å†³æ–¹æ¡ˆ: æ–°ä»“åº“ä½¿ç”¨çš„reactç‰ˆæœ¬è¾ƒé«˜ï¼Œä»¥ä¸Šæ–¹å¼å·²è¢«åºŸå¼ƒï¼Œåº”ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>import â€˜./style.lessâ€™;</li>
</ol>
<p>error: æ ·å¼å¤±æ•ˆé—®é¢˜ã€‚</p>
<p>å‡ºç°åŸå› : æ–°é¡¹ç›®ä¸­å¼€å¯äº†css-moduleï¼Œéœ€è¦é€šè¿‡é…ç½®:globalæ¥å£°æ˜ä¸€ä¸ªå…¨å±€classï¼Œä½¿å…¶åœ¨å…¨å±€èµ·ä½œç”¨ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆ1:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">### <span class="selector-tag">style</span><span class="selector-class">.less</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="selector-pseudo">:global</span> &#123;</span><br><span class="line">        <span class="selector-class">.items</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./style.less'</span>;</span><br><span class="line"></span><br><span class="line">&lt;div className=&#123;styles.content&#125;&gt;</span><br><span class="line">    &lt;div className=<span class="string">"items"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆ2:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">style</span><span class="selector-class">.less</span></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:global</span> &#123;</span><br><span class="line">    <span class="selector-class">.content</span> &#123;</span><br><span class="line">        <span class="selector-class">.items</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./style.less'</span>;</span><br><span class="line">&lt;div className=<span class="string">"content"</span>&gt;</span><br><span class="line">    &lt;div className=<span class="string">"items"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¨èä½¿ç”¨æ–¹æ¡ˆ1ï¼Œå¯ä»¥åˆ©ç”¨css-moduleçš„å‘½åè§„åˆ™å‡å°‘é¡¹ç›®ä¸­æ ·å¼çš„å†²çªé—®é¢˜ã€‚æ–¹æ¡ˆ2æ”¹åŠ¨å°ä½†æ˜¯å¤ªæš´åŠ›ï¼Œéå¸¸å¯èƒ½äº§ç”Ÿæ ·å¼å†²çªé—®é¢˜ã€‚</p>
<ol start="3">
<li>commå’Œcomponentsä¸­ç»„ä»¶å‡ºç°ä¸å¯ç”¨æƒ…å†µã€‚</li>
</ol>
<p>error: åŠŸèƒ½ä¸å¯ç”¨æƒ…å†µã€‚</p>
<p>è§£å†³æ–¹æ¡ˆ: å»ºè®®ç›´æ¥ä½¿ç”¨antdæ›¿æ¢ï¼Œéœ€è¦èŠ±ä¸Šä¸€ç‚¹æ—¶é—´å¯¹åº”antd apiåšä¸€å®šä»£ç é‡æ„ã€‚(!è¿™å—éœ€è¦ä»”ç»†æ•ˆéªŒåŠŸèƒ½æ˜¯å¦æ­£å¸¸)</p>
<ol start="4">
<li>ec_feä¸­ä½¿ç”¨äº†Component.contextTypesã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Manage.contextTypes = &#123;</span><br><span class="line">    history: PropTypes.object.isRequired,</span><br><span class="line">    store: PropTypes.object.isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Warning: Failed context type: The context <code>history</code> is marked as required in <code>Connect(ContractReview)</code>, but its value is <code>undefined</code>.</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ‹†åˆ†å‡ºå»çš„ä»“åº“ï¼Œreact-routerç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯4.xï¼Œå·²ç»ä¸éœ€è¦åƒè€ç‰ˆæœ¬ä¸€æ ·ä¸€å±‚å±‚ä¼ é€’historyæˆ–è€…ç»‘å®šåœ¨Contextä¸Šå…±äº«çš„æ–¹å¼ã€‚</p>
<ol start="5">
<li>ec_feä¸­ä½¿ç”¨äº†this.props.routerç­‰è·¯ç”±api</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.props.router.replace(&#123;</span><br><span class="line">    pathname: <span class="string">`/admin/web/packageconfig/function.html`</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">        id: moduleList[<span class="number">0</span>].f_id,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>é”™è¯¯ï¼šindex.jsx:59 Uncaught TypeError: Cannot read property â€˜replaceâ€™ of undefined</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ‹†åˆ†å‡ºå»çš„ä»“åº“ï¼Œreact-routerç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯4.xï¼Œè¯·ä½¿ç”¨react-router-domæä¾›çš„apiä¿®æ”¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.props.history.replace(&#123;</span><br><span class="line">    pathname: <span class="string">`/packageconfig/funModule`</span>,</span><br><span class="line">    search: <span class="string">`id=<span class="subst">$&#123;moduleList[<span class="number">0</span>].f_id&#125;</span>`</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ul>
<li><a href="https://www.jianshu.com/p/8fbee843437c" target="_blank" rel="noopener">æµ…è°ˆiframe</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/history/history-is-mutable" target="_blank" rel="noopener">react-router-dom</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/06/13/2019/June/NextTick/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/13/2019/June/NextTick/README/" itemprop="url">
                  NextTick åŸç†åˆ†æ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-13 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-13T00:00:00+08:00">2019-06-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-05 14:25:02" itemprop="dateModified" datetime="2020-03-05T14:25:02+08:00">2020-03-05</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NextTick-åŸç†åˆ†æ"><a href="#NextTick-åŸç†åˆ†æ" class="headerlink" title="NextTick åŸç†åˆ†æ"></a>NextTick åŸç†åˆ†æ</h1><p>nextTickå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸‹æ¬¡DOMæ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œç”¨äºè·å¾—æ›´æ–°åçš„DOMã€‚</p>
<p>åœ¨Vue2.4ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨çš„microtasksï¼Œä½†æ˜¯microtasksçš„ä¼˜å…ˆçº§è¿‡é«˜ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°æ¯”äº‹ä»¶å†’æ³¡æ›´å¿«çš„æƒ…å†µï¼Œä½†å¦‚æœéƒ½æ˜¯macrotasksåˆå¯èƒ½ä¼šå‡ºç°æ¸²æŸ“çš„æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œä¼šé»˜è®¤ä½¿ç”¨microtasksï¼Œä½†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šä½¿ç”¨macrotasksï¼Œæ¯”å¦‚v-onã€‚</p>
<p>å¯¹äºå®ç°macrotasksï¼Œä¼šå…ˆåˆ¤æ–­æ˜¯å¦èƒ½ä½¿ç”¨setImmediateï¼Œä¸èƒ½çš„è¯é™çº§ä¸ºMessageChannelï¼Œä»¥ä¸Šéƒ½ä¸è¡Œçš„è¯å°±ä½¿ç”¨setTimeoutã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> setImmediate !== <span class="string">'undefined'</span> &amp;&amp; isNative(setImmediate)) &#123;</span><br><span class="line">  macroTimerFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setImmediate(flushCallbacks)</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">  <span class="keyword">typeof</span> MessageChannel !== <span class="string">'undefined'</span> &amp;&amp;</span><br><span class="line">  (isNative(MessageChannel) ||</span><br><span class="line">    <span class="comment">// PhantomJS</span></span><br><span class="line">    MessageChannel.toString() === <span class="string">'[object MessageChannelConstructor]'</span>)</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">const</span> channel = <span class="keyword">new</span> MessageChannel()</span><br><span class="line">  <span class="keyword">const</span> port = channel.port2</span><br><span class="line">  channel.port1.onmessage = flushCallbacks</span><br><span class="line">  macroTimerFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    port.postMessage(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  macroTimerFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(flushCallbacks, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ç”¨æ¥åˆ¤æ–­èƒ½ä¸èƒ½ä½¿ç”¨ç›¸åº”çš„APIã€‚</p>
<h2 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h2><ul>
<li>macrotasksï¼ˆå®ä»»åŠ¡ï¼‰ï¼š setTimeout, setInterval, setImmediate, I/O, UI rendering</li>
<li>microtasksï¼ˆå¾®ä»»åŠ¡ï¼‰ï¼š process.nextTick, Promise, MutationObserver</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/06/09/2019/June/git/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/09/2019/June/git/README/" itemprop="url">
                  gitçš„åŸºæœ¬æ“ä½œ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-09 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-09T00:00:00+08:00">2019-06-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 09:54:56" itemprop="dateModified" datetime="2020-05-25T09:54:56+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><ul>
<li><a href="#rebase-%E5%90%88%E5%B9%B6">Rebase åˆå¹¶</a></li>
<li><a href="#stash">stash</a></li>
<li><a href="#reflog">reflog</a></li>
<li><a href="#reset">Reset</a></li>
</ul>
<h2 id="Rebase-åˆå¹¶"><a href="#Rebase-åˆå¹¶" class="headerlink" title="Rebase åˆå¹¶"></a>Rebase åˆå¹¶</h2><p>è¯¥å‘½ä»¤å¯ä»¥è®©å’Œ <code>merge</code> å‘½ä»¤å¾—åˆ°çš„ç»“æœåŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>é€šå¸¸ä½¿ç”¨ <code>merge</code> æ“ä½œå°†åˆ†æ”¯ä¸Šçš„ä»£ç åˆå¹¶åˆ° <code>master</code> ä¸­ï¼Œåˆ†æ”¯æ ·å­å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/4/23/162f109db27be054?w=505&amp;h=461&amp;f=png&amp;s=22796" alt=""></p>
<p>ä½¿ç”¨ <code>rebase</code> åï¼Œä¼šå°† <code>develop</code> ä¸Šçš„ <code>commit</code> æŒ‰é¡ºåºç§»åˆ° <code>master</code> çš„ç¬¬ä¸‰ä¸ª <code>commit</code> åé¢ï¼Œåˆ†æ”¯æ ·å­å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/4/23/162f11cc2cb8b332?w=505&amp;h=563&amp;f=png&amp;s=26514" alt=""></p>
<p>Rebase å¯¹æ¯” mergeï¼Œä¼˜åŠ¿åœ¨äºåˆå¹¶åçš„ç»“æœå¾ˆæ¸…æ™°ï¼Œåªæœ‰ä¸€æ¡çº¿ï¼ŒåŠ£åŠ¿åœ¨äºå¦‚æœä¸€æ—¦å‡ºç°å†²çªï¼Œè§£å†³å†²çªå¾ˆéº»çƒ¦ï¼Œå¯èƒ½è¦è§£å†³å¤šä¸ªå†²çªï¼Œä½†æ˜¯ merge å‡ºç°å†²çªåªéœ€è¦è§£å†³ä¸€æ¬¡ã€‚</p>
<p>ä½¿ç”¨ rebase åº”è¯¥åœ¨éœ€è¦è¢« rebase çš„åˆ†æ”¯ä¸Šæ“ä½œï¼Œå¹¶ä¸”è¯¥åˆ†æ”¯æ˜¯æœ¬åœ°åˆ†æ”¯ã€‚å¦‚æœ <code>develop</code> åˆ†æ”¯éœ€è¦ rebase åˆ° <code>master</code> ä¸Šå»ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä¸‹æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># branch develop</span></span></span><br><span class="line">git rebase master</span><br><span class="line">git checkout master</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç”¨äºå°† `master` ä¸Šçš„ HEAD ç§»åŠ¨åˆ°æœ€æ–°çš„ commit</span></span></span><br><span class="line">git merge develop</span><br></pre></td></tr></table></figure>
<h2 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h2><p><code>stash</code> ç”¨äºä¸´æ—¶æŠ¥é”™å·¥ä½œç›®å½•çš„æ”¹åŠ¨ã€‚å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°ä»£ç å†™ä¸€åŠéœ€è¦åˆ‡åˆ†æ”¯æ‰“åŒ…çš„é—®é¢˜ï¼Œå¦‚æœè¿™æ—¶å€™ä½ ä¸æƒ³ <code>commit</code> çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥æš‚å­˜ä½ çš„å·¥ä½œç›®å½•ï¼Œåé¢æƒ³æ¢å¤å·¥ä½œç›®å½•ï¼Œåªéœ€è¦ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨applyå‘½ä»¤æ¢å¤ï¼Œstashåˆ—è¡¨ä¸­çš„ä¿¡æ¯æ˜¯ä¼šç»§ç»­ä¿ç•™çš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨popæ¢å¤ï¼Œå¹¶ä¸”ä¼šåˆ é™¤æš‚å­˜åˆ—è¡¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æš‚å­˜åˆ—è¡¨</p>
<h2 id="reflog"><a href="#reflog" class="headerlink" title="reflog"></a>reflog</h2><p><code>reflog</code> å¯ä»¥çœ‹åˆ° HEAD çš„ç§»åŠ¨è®°å½•ï¼Œå‡å¦‚ä¹‹å‰è¯¯åˆ äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡ <code>git reflog</code> çœ‹åˆ°ç§»åŠ¨ HEAD çš„å“ˆå¸Œå€¼</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/4/23/162f14df98ce3d83?w=950&amp;h=118&amp;f=png&amp;s=77151" alt=""></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒHEAD çš„æœ€åä¸€æ¬¡ç§»åŠ¨è¡Œä¸ºæ˜¯ <code>merge</code> åï¼Œæ¥ä¸‹æ¥åˆ†æ”¯ <code>new</code> å°±è¢«åˆ é™¤äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰¾å› <code>new</code> åˆ†æ”¯</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout 37d9aca</span><br><span class="line">git checkout -b new</span><br></pre></td></tr></table></figure>
<p>PSï¼š<code>reflog</code> è®°å½•æ˜¯æ—¶æ•ˆçš„ï¼Œåªä¼šä¿å­˜ä¸€æ®µæ—¶é—´å†…çš„è®°å½•ã€‚</p>
<h2 id="Reset"><a href="#Reset" class="headerlink" title="Reset"></a>Reset</h2><p>å¦‚æœä½ æƒ³åˆ é™¤åˆšå†™çš„ commitï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®ç°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ <code>reset</code> çš„æœ¬è´¨å¹¶ä¸æ˜¯åˆ é™¤äº† commitï¼Œè€Œæ˜¯é‡æ–°è®¾ç½®äº† HEAD å’Œå®ƒæŒ‡å‘çš„ branchã€‚</p>
<h1 id="git-å¸¸ç”¨æ“ä½œ"><a href="#git-å¸¸ç”¨æ“ä½œ" class="headerlink" title="git å¸¸ç”¨æ“ä½œ"></a>git å¸¸ç”¨æ“ä½œ</h1><p>$ git ch(checkout) -b develop  åˆ›å»ºå¼€å‘åˆ†æ”¯develop</p>
<p>$ git push  æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ä»“åº“</p>
<p>$ git st(status)  æŸ¥çœ‹å½“å‰åˆ†æ”¯å·¥ä½œåŒºã€æš‚å­˜åŒºçš„å·¥ä½œçŠ¶æ€</p>
<p>$ git diff   diffæ–‡ä»¶çš„ä¿®æ”¹</p>
<p>$ git ci(commit) .  æäº¤æœ¬æ¬¡ä¿®æ”¹</p>
<p>$ git fetch â€“all  æ‹‰å–æ‰€æœ‰è¿œç«¯çš„æœ€æ–°ä»£ç </p>
<p>$ git merge origin/develop  å¦‚æœæ˜¯å¤šäººåä½œï¼ŒmergeåŒäº‹çš„ä¿®æ”¹åˆ°å½“å‰åˆ†æ”¯ï¼ˆå…ˆäººåå·±åŸåˆ™ï¼‰</p>
<p>$ git merge origin/master   ä¸Šçº¿ä¹‹å‰ä¿è¯å½“å‰åˆ†æ”¯ä¸è½åäºè¿œç«¯origin/masterï¼Œä¸€å®šè¦mergeè¿œç«¯origin/masteråˆ°å½“å‰åˆ†æ”¯</p>
<p>$ git push  æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ä»“åº“</p>
<p>$ git merge â€“no-ff origin/develop  åŒäº‹review codeä¹‹åç®¡ç†å‘˜åˆå¹¶origin/developåˆ°è¿œç«¯ä¸»å¹²origin/master</p>
<hr>
<p>ğŸ‘‰ HEADï¼šå½“å‰commitå¼•ç”¨$ git version  gitç‰ˆæœ¬</p>
<p>$ git branch  æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯</p>
<p>$ git branch -r æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹çš„åˆ†æ”¯</p>
<p>$ git branch -a æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯</p>
<p>$ git branch -d <branchname> åˆ é™¤æœ¬åœ°branchnameåˆ†æ”¯</branchname></p>
<p>$ git branch -m brancholdname  branchnewname é‡å‘½ååˆ†æ”¯</p>
<p>$ git branch <branchname>   åˆ›å»ºbranchnameåˆ†æ”¯</branchname></p>
<p>$ git checkout <branchname> åˆ‡æ¢åˆ†æ”¯åˆ°branchname</branchname></p>
<p>$ git checkout -b <branchname> ç­‰åŒäºæ‰§è¡Œä¸Šä¸¤æ­¥ï¼Œå³åˆ›å»ºæ–°çš„åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</branchname></p>
<p>$ git checkout â€“ xx/xx  æ’¤é”€æœ¬æ–‡ä»¶çš„æ›´æ”¹</p>
<p>$ git pull origin master:master å°†è¿œç¨‹originä¸»æœºçš„masteråˆ†æ”¯åˆå¹¶åˆ°å½“å‰masteråˆ†æ”¯,å†’å·åé¢çš„éƒ¨åˆ†è¡¨ç¤ºå½“å‰æœ¬åœ°æ‰€åœ¨çš„åˆ†æ”¯</p>
<p>$ git pull origin master â€“allow-unrelated-histories  å…è®¸åˆå¹¶ä¸¤ä¸ªä¸åŒé¡¹ç›®çš„å†å²è®°å½•</p>
<p>$ git push origin -d <branchname>   åˆ é™¤è¿œç¨‹branchnameåˆ†æ”¯</branchname></p>
<p>$ git fetch â€“p  æ›´æ–°åˆ†æ”¯</p>
<p>$ git status æŸ¥çœ‹æœ¬åœ°å·¥ä½œåŒºã€æš‚å­˜åŒºæ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€</p>
<p>$ git add xx  æŠŠxxæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºå»</p>
<p>$ git commit -m â€˜ â€˜  æäº¤æ–‡ä»¶ -m åé¢çš„æ˜¯æ³¨é‡Š</p>
<p>$ git commit -am(-a -m) æäº¤æ‰€æœ‰çš„ä¿®æ”¹ï¼Œç­‰åŒäºä¸Šä¸¤æ­¥</p>
<p>$ git commit ./xx   ç­‰åŒäºgit add ./xx + git commit</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/25/2019/May/Webpack/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/25/2019/May/Webpack/README/" itemprop="url">
                  ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack 4 å’Œ babel 7ç‰ˆæœ¬ï¼‰
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-25 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-25T00:00:00+08:00">2019-05-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-05 14:27:56" itemprop="dateModified" datetime="2020-03-05T14:27:56+08:00">2020-03-05</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack-4-å’Œ-babel-7ç‰ˆæœ¬ï¼‰"><a href="#ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack-4-å’Œ-babel-7ç‰ˆæœ¬ï¼‰" class="headerlink" title="ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack 4 å’Œ babel 7ç‰ˆæœ¬ï¼‰"></a>ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack 4 å’Œ babel 7ç‰ˆæœ¬ï¼‰</h1><h2 id="webpack-æ ¸å¿ƒæ¦‚å¿µ"><a href="#webpack-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="webpack æ ¸å¿ƒæ¦‚å¿µ"></a>webpack æ ¸å¿ƒæ¦‚å¿µ</h2><ul>
<li>Entry: å…¥å£</li>
<li>Module: æ¨¡å—ï¼Œwebpackä¸­ä¸€åˆ‡çš†æ˜¯æ¨¡å—</li>
<li>Chunk: ä»£ç åº“ï¼Œä¸€ä¸ªchunkç”±åå¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²</li>
<li>Loader: æ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹</li>
<li>Plugin: æ‰©å±•æ’ä»¶ï¼Œåœ¨webpackæ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ…</li>
<li>Output: è¾“å‡ºç»“æœ</li>
</ul>
<h2 id="webpack-æµç¨‹"><a href="#webpack-æµç¨‹" class="headerlink" title="webpack æµç¨‹"></a>webpack æµç¨‹</h2><p>webpackå¯åŠ¨åä¼šä»Entryé‡Œé…ç½®çš„Moduleå¼€å§‹é€’å½’è§£æEntryä¾èµ–çš„æ‰€æœ‰Moduleã€‚æ¯æ‰¾åˆ°ä¸€ä¸ªModuleï¼Œå°±ä¼šæ ¹æ®é…ç½®çš„Loaderå»æ‰¾å‡ºå¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œå¯¹<br>Moduleè¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå½“å‰çš„Moduleä¾èµ–çš„Moduleã€‚è¿™äº›æ¨¡å—ä¼šä»¥Entryä¸ºå•ä½è¿›è¡Œåˆ†ç»„ï¼Œä¸€ä¸ªEntryå’Œå…¶æ‰€æœ‰ä¾èµ–çš„Moduleè¢«åˆ†åˆ°ä¸€ä¸ªç»„ä¹Ÿå°±æ˜¯ä¸€ä¸ª<br>Chunkã€‚æœ€å¥½Webpackä¼šæŠŠæ‰€æœ‰Chunkè½¬æ¢æˆæ–‡ä»¶è¾“å‡ºã€‚åœ¨æ•´ä¸ªæµç¨‹ä¸­Webpackä¼šåœ¨æ°å½“çš„æ—¶æœºæ‰§è¡ŒPluginé‡Œå®šä¹‰çš„é€»è¾‘ã€‚</p>
<h2 id="æœ€ç®€webpacké…ç½®"><a href="#æœ€ç®€webpacké…ç½®" class="headerlink" title="æœ€ç®€webpacké…ç½®"></a>æœ€ç®€webpacké…ç½®</h2><p>é¦–å…ˆåˆå§‹åŒ–npmå’Œå®‰è£…webpackçš„ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">yarn add webpack webpack-cli --dev</span><br></pre></td></tr></table></figure>
<p>é…ç½®webpack.config.jsæ–‡ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  entry: path.resolve(__dirname, <span class="string">'src/index.js'</span>),</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>,    <span class="comment">//  æ­¤å¤„ä¸è®¾ç½®ï¼Œé»˜è®¤ä¸º main.js</span></span><br><span class="line">    publicPath: <span class="string">'/'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜: publicPathä¸Šçº¿æ—¶é…ç½®çš„æ˜¯cdnçš„åœ°å€ã€‚</p>
<p>ä½¿ç”¨å‘½ä»¤è¿›è¡Œæ‰“åŒ…ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --mode production</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥å°†å…¶é…ç½®åˆ°package.jsonä¸­çš„ scripts å­—æ®µã€‚<br>å…¥å£æ–‡ä»¶ä¸ºsrc/index.jsï¼Œæ‰“åŒ…è¾“å‡ºåˆ°dist/bundle.jsã€‚</p>
<h2 id="ä½¿ç”¨æ¨¡æ¿html"><a href="#ä½¿ç”¨æ¨¡æ¿html" class="headerlink" title="ä½¿ç”¨æ¨¡æ¿html"></a>ä½¿ç”¨æ¨¡æ¿html</h2><p>html-webpack-plugin å¯ä»¥æŒ‡å®š template æ¨¡æ¿æ–‡ä»¶ï¼Œå°†ä¼šåœ¨ output ç›®å½•ä¸‹ï¼Œç”Ÿæˆ html æ–‡ä»¶ï¼Œå¹¶å¼•å…¥æ‰“åŒ…åçš„jsã€‚<br>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add html-webpack-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js å¢åŠ  plugins é…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ... other code</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, <span class="string">'src/index.html'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HtmlWebpackPlugin è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‚æ•°ï¼Œå¦‚titleï¼ˆhtmlçš„titleï¼‰ï¼Œminifyï¼ˆæ˜¯å¦è¦å‹ç¼©ï¼‰ï¼Œfilenameï¼ˆdistä¸­ç”Ÿæˆçš„htmlæ–‡ä»¶åï¼‰ç­‰ã€‚</p>
<h2 id="é…ç½®-webpack-dev-server"><a href="#é…ç½®-webpack-dev-server" class="headerlink" title="é…ç½® webpack-dev-server"></a>é…ç½® webpack-dev-server</h2><p>webpack-dev-server æä¾›äº†ä¸€ä¸ªç®€å•çš„WebæœåŠ¡å™¨å’Œå®æ—¶çƒ­æ›´æ–°çš„èƒ½åŠ›ã€‚<br>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-dev-server --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpck.config.js å¢åŠ  devServer é…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WebpackDevServer = <span class="built_in">require</span>(<span class="string">'webpack-dev-server'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  ... other code</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">    port: <span class="string">'8080'</span>,</span><br><span class="line">    host: <span class="string">'localhost'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ package.json çš„ scripts å­—æ®µä¸­å¢åŠ ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dev: <span class="string">'webpack-dev-server --mode development'</span></span><br></pre></td></tr></table></figure>
<p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ npm run devï¼Œæ¥å¯åŠ¨æœåŠ¡ã€‚<br>æ›´å¤šå…³äº <a href="https://webpack.js.org/configuration/dev-server/" target="_blank" rel="noopener">webpack-dev-server</a></p>
<h2 id="æ”¯æŒåŠ è½½-css-æ–‡ä»¶"><a href="#æ”¯æŒåŠ è½½-css-æ–‡ä»¶" class="headerlink" title="æ”¯æŒåŠ è½½ css æ–‡ä»¶"></a>æ”¯æŒåŠ è½½ css æ–‡ä»¶</h2><p>é€šè¿‡ä½¿ç”¨ä¸åŒçš„ style-loader å’Œ css-loaderï¼Œå¯ä»¥å°† css æ–‡ä»¶è½¬æ¢æˆjsæ–‡ä»¶ç±»å‹ã€‚<br>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add style-loader css-loader --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  ...other code</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css/</span>,</span><br><span class="line">        use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>],</span><br><span class="line">        exclude: <span class="regexp">/node_module/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>loader å¯ä»¥é…ç½®ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>test: åŒ¹é…å¤„ç†æ–‡ä»¶çš„æ‰©å±•åçš„æ­£åˆ™è¡¨è¾¾å¼</li>
<li>use: loaderçš„åç§°</li>
<li>include/exclude: æ‰‹åŠ¨æŒ‡å®šå¿…é¡»å¤„ç†çš„æ–‡ä»¶å¤¹æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å¤¹</li>
<li>query: ä¸ºloaderæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹</li>
</ul>
<p>å¦‚æœéœ€è¦ç»™loaderä¼ å‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨use + loadingçš„æ–¹å¼ï¼Œå¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  other code</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'style-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              insertAt: <span class="string">'top'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ”¯æŒåŠ è½½å›¾ç‰‡"><a href="#æ”¯æŒåŠ è½½å›¾ç‰‡" class="headerlink" title="æ”¯æŒåŠ è½½å›¾ç‰‡"></a>æ”¯æŒåŠ è½½å›¾ç‰‡</h2><ul>
<li>file-loader: è§£å†³cssç­‰æ–‡ä»¶ä¸­çš„å¼•å…¥å›¾ç‰‡è·¯å¾„é—®é¢˜</li>
<li>url-loader: å½“å›¾ç‰‡å°äºlimitçš„æ—¶å€™ä¼šæŠŠå›¾ç‰‡base64ç¼–ç ï¼Œå¤§äºlimitå‚æ•°çš„æ—¶å€™è¿˜æ˜¯ä½¿ç”¨file-loaderè¿›è¡Œæ‹·è´</li>
</ul>
<p><strong>å¦‚æœå¸Œæœ›å›¾ç‰‡å­˜æ”¾åœ¨å•ç‹¬çš„ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆéœ€è¦åˆ¶å®šoutputPath</strong></p>
<p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add url-loader file-loader --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ loaderçš„é…ç½®ï¼ˆå¢åŠ åœ¨ module.rulesçš„æ•°ç»„ä¸­ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  ...other code</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(gif|jpg|png|bmp|eot|woff|woff2|ttf|svg)/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">8192</span>,</span><br><span class="line">              outputPath: <span class="string">'images'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ”¯æŒç¼–è¯‘lesså’Œsass"><a href="#æ”¯æŒç¼–è¯‘lesså’Œsass" class="headerlink" title="æ”¯æŒç¼–è¯‘lesså’Œsass"></a>æ”¯æŒç¼–è¯‘lesså’Œsass</h2><p>ç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯ä½¿ç”¨lessæˆ–è€…sassç¼–å†™cssï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦åœ¨webpackä¸­è¿›è¡Œé…ç½®ã€‚<br>å®‰è£…å¯¹åº”çš„ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add less less-loader --dev</span><br><span class="line">yarn add sass sass-loader --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ï¼ˆmodule.rulesæ•°ç»„ä¸­ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  ..  other code</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less/</span>,</span><br><span class="line">        use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'less-loader'</span>],</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss/</span>,</span><br><span class="line">        use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'sass-loader'</span>],</span><br><span class="line">        exclude: <span class="regexp">/nodu_modules/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ”¯æŒè½¬ä¹‰-ES6-ES7-JSX"><a href="#æ”¯æŒè½¬ä¹‰-ES6-ES7-JSX" class="headerlink" title="æ”¯æŒè½¬ä¹‰ ES6/ES7/JSX"></a>æ”¯æŒè½¬ä¹‰ ES6/ES7/JSX</h2><p>ES6/ES7/JSX è½¬ä¹‰éœ€è¦ Babel çš„ä¾èµ–ï¼Œæ”¯æŒè£…é¥°å™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/core babel-loader @babel/preset-env @babel/preset-react @babel/plugin-proposal-decorators @babel/plugin-proposal-object-rest-spread --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ï¼ˆmodule.rules æ•°ç»„ä¸­ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...other code</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [<span class="string">'@babel/react'</span>],</span><br><span class="line">            plugins: [</span><br><span class="line">              [<span class="string">'@babel/plugin-proposal-decorators'</span>, &#123;<span class="string">'legacy'</span>: <span class="literal">true</span>&#125;]</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      exclude: <span class="regexp">/nodu_modules/</span>,</span><br><span class="line">      include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‹ç¼©jsæ–‡ä»¶"><a href="#å‹ç¼©jsæ–‡ä»¶" class="headerlink" title="å‹ç¼©jsæ–‡ä»¶"></a>å‹ç¼©jsæ–‡ä»¶</h2><p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add uglifyjs-webpack-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  optimization çš„é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UglifyWebpackplugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ... other code</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> UglifyWebpackPlugin(&#123;</span><br><span class="line">        parallel: <span class="number">4</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä»¥ä¸Šæœ€æ–°ç‰ˆwebpackå·²ç»é»˜è®¤å¼€å¯uglifyjsï¼Œä¸éœ€è¦å•ç‹¬å®‰è£…plugins</strong><br>ä½†æ˜¯å®ƒæ˜¯å•çº¿ç¨‹å‹ç¼©çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨webpack-parallel-uglify-pluginï¼Œè§£å†³å¤šä¸ªjsæ‰“åŒ…å¹¶è¡Œå‹ç¼©çš„éœ€è¦ï¼Œä¼˜åŒ–æ‰“åŒ…æ•ˆç‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-parallel-uglify-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WebpackParallelUglifyPlugin = <span class="built_in">require</span>(<span class="string">'webpack-parallel-uglify-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  other code</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> WebpackParallelUglifyPlugin(&#123;</span><br><span class="line">      ugfilyJS: &#123;</span><br><span class="line">        output: &#123;</span><br><span class="line">          beautify: <span class="literal">false</span>,  <span class="comment">//  æ˜¯å¦ä¿ç•™ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦</span></span><br><span class="line">          comments: <span class="literal">false</span>,  <span class="comment">//  æ˜¯å¦ä¿ç•™æ³¨é‡Š</span></span><br><span class="line">        &#125;,</span><br><span class="line">        compress: &#123;</span><br><span class="line">          warnings: <span class="literal">false</span>,  <span class="comment">//  åˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ—¶çš„è­¦å‘Šä¿¡æ¯,</span></span><br><span class="line">          drop_console: <span class="literal">true</span>,   <span class="comment">//  æ˜¯å¦åˆ é™¤ä»£ç ä¸­çš„consoleè¯­å¥</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†ç¦»cssï¼ˆå¦‚æœcssæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼‰"><a href="#åˆ†ç¦»cssï¼ˆå¦‚æœcssæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼‰" class="headerlink" title="åˆ†ç¦»cssï¼ˆå¦‚æœcssæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼‰"></a>åˆ†ç¦»cssï¼ˆå¦‚æœcssæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼‰</h2><p>å› ä¸ºCSSçš„ä¸‹è½½å’ŒJSå¯ä»¥å¹¶è¡Œï¼Œå½“ä¸€ä¸ªhtmlæ–‡ä»¶å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠcsså•ç‹¬æå–å‡ºæ¥åŠ è½½</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add mini-css-extract-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  plugins çš„é…ç½®ï¼Œå¹¶ä¸”å°† â€˜style-loaderâ€™ ä¿®æ”¹ä¸º {<br>  loader: MiniCssExtractPlugin.loader<br>}ã€‚<br>cssæ‰“åŒ…åœ¨å•ç‹¬çš„ç›®å½•ï¼Œé‚£ä¹ˆé…ç½®filenameã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader,</span><br><span class="line">          &#125;, <span class="string">'css-loader'</span></span><br><span class="line">        ],</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader,</span><br><span class="line">          &#125;, <span class="string">'css-loader'</span>, <span class="string">'less-loader'</span></span><br><span class="line">        ],</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.sass/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: MiniCssExtractPlugin.loader</span><br><span class="line">          &#125;, <span class="string">'css-loader'</span>, <span class="string">'sass-loader'</span></span><br><span class="line">        ],</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        include: path.resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'css/[name].css'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‹ç¼©cssæ–‡ä»¶"><a href="#å‹ç¼©cssæ–‡ä»¶" class="headerlink" title="å‹ç¼©cssæ–‡ä»¶"></a>å‹ç¼©cssæ–‡ä»¶</h2><p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add optimiza-css-assets-webpack-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­çš„ optimization ä¸­å¢åŠ é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizaCssAssetsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'optimiza-css-assets-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//  ... other code</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> OptimizaCssAssetsWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰“åŒ…å‰å…ˆæ¸…ç©ºè¾“å‡ºç›®å½•"><a href="#æ‰“åŒ…å‰å…ˆæ¸…ç©ºè¾“å‡ºç›®å½•" class="headerlink" title="æ‰“åŒ…å‰å…ˆæ¸…ç©ºè¾“å‡ºç›®å½•"></a>æ‰“åŒ…å‰å…ˆæ¸…ç©ºè¾“å‡ºç›®å½•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add clean-webpack-plugin --dev</span><br></pre></td></tr></table></figure>
<p>åœ¨ webpack.config.js ä¸­å¢åŠ  plugins çš„é…ç½®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...other code</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/17/2019/May/This/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/17/2019/May/This/README/" itemprop="url">
                  This
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-17 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-17T00:00:00+08:00">2019-05-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 11:10:56" itemprop="dateModified" datetime="2020-05-25T11:10:56+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><ol>
<li>é»˜è®¤ç»‘å®š</li>
<li>éšå¼ç»‘å®š</li>
<li>ç¡¬ç»‘å®š</li>
<li>newç»‘å®š</li>
</ol>
<h3 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h3><p>é»˜è®¤ç»‘å®šï¼Œåœ¨ä¸èƒ½åº”ç”¨å…¶ä»–ç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'achen'</span>;</span><br><span class="line">sayHi();</span><br></pre></td></tr></table></figure>
<p>åœ¨è°ƒç”¨sayHi()æ—¶ï¼Œåº”ç”¨äº†é»˜è®¤ç»‘å®šï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefinedï¼Œundefinedä¸Šæ²¡æœ‰thiså¯¹è±¡ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚<br>ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œï¼Œé‚£ä¹ˆç»“æœæ˜¯ Hello, achen<br>ä½†æ˜¯å¦‚æœåœ¨nodeç¯å¢ƒä¸­è¿è¡Œï¼Œç»“æœå°±æ˜¯Hello, undefinedï¼Œè¿™æ˜¯å› ä¸ºnodeä¸­nameå¹¶ä¸æ˜¯æŒ‚åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„ã€‚</p>
<h3 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h3><p>å‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å…¸å‹çš„å½¢å¼ä¸º XXX.fun()ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'achen'</span>,</span><br><span class="line">  sayHi: sayHi</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'achenjs'</span>;</span><br><span class="line">persin.sayHi();</span><br></pre></td></tr></table></figure>
<h3 id="ç¡¬ç»‘å®šï¼ˆæ˜¾ç¤ºç»‘å®šï¼‰"><a href="#ç¡¬ç»‘å®šï¼ˆæ˜¾ç¤ºç»‘å®šï¼‰" class="headerlink" title="ç¡¬ç»‘å®šï¼ˆæ˜¾ç¤ºç»‘å®šï¼‰"></a>ç¡¬ç»‘å®šï¼ˆæ˜¾ç¤ºç»‘å®šï¼‰</h3><p>é€šè¿‡callï¼Œapplyï¼Œbindçš„æ–¹å¼ï¼Œæ˜¾ç¤ºçš„æŒ‡å®šthisæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚<br>callï¼Œapplyï¼Œbindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯å¯¹åº”å‡½æ•°çš„thisæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚callå’Œapplyçš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ å‚æ–¹å¼ä¸åŒã€‚callå’Œapplyéƒ½ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œè€Œbindæ–¹æ³•ä¸ä¼šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'YvetteLau'</span>,</span><br><span class="line">    sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Wiliam'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = person.sayHi;</span><br><span class="line">Hi.call(person);  <span class="comment">// Hi.apply(person)</span></span><br></pre></td></tr></table></figure>
<h3 id="newç»‘å®š"><a href="#newç»‘å®š" class="headerlink" title="newç»‘å®š"></a>newç»‘å®š</h3><blockquote>
<p>ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p>
</blockquote>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li>
<li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹å€¼ç»™æ–°å¯¹è±¡ï¼Œå³thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> Hi = <span class="keyword">new</span> SayHi(<span class="string">'achen'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Hi.name);   <span class="comment">//  achen</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºachenï¼ŒåŸå› æ˜¯å› ä¸ºåœ¨var Hi = new SayHi(â€˜achenâ€™); è¿™ä¸€æ­¥ï¼Œä¼šå°†SayHiä¸­çš„thisç»‘å®šåˆ°Hiå¯¹è±¡ä¸Šã€‚</p>
<h4 id="ç»‘å®šä¼˜å…ˆçº§"><a href="#ç»‘å®šä¼˜å…ˆçº§" class="headerlink" title="ç»‘å®šä¼˜å…ˆçº§"></a>ç»‘å®šä¼˜å…ˆçº§</h4><p>newç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p>
<h4 id="ç»‘å®šå¦å¤–"><a href="#ç»‘å®šå¦å¤–" class="headerlink" title="ç»‘å®šå¦å¤–"></a>ç»‘å®šå¦å¤–</h4><p>å¦‚æœæˆ‘ä»¬å°†nullæˆ–è€…undefinedä½œä¸ºthisçš„ç»‘å®šå¯¹è±¡ä¼ å…¥callã€applyæˆ–è€…æ˜¯bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  name: <span class="string">'Selina'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Chirs'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">bar.call(<span class="literal">null</span>);   <span class="comment">//  Chirs</span></span><br></pre></td></tr></table></figure>
<h5 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h5><p>ç®­å¤´å‡½æ•°æ˜¯ES6ä¸­æ–°å¢çš„ï¼Œå®ƒå’Œæ™®é€šå‡½æ•°æœ‰ä¸€äº›åŒºåˆ«ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thisç»§æ‰¿äºå¤–å±‚ä»£ç åº“ä¸­çš„thisã€‚ç®­å¤´å‡½æ•°åœ¨ä½¿ç”¨ä¸­ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„thisã€‚</li>
<li>ä¸å¯ä»¥å½“åšæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>
<li>ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨restå‚æ•°ä»£æ›¿ã€‚</li>
<li>ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ã€‚</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œæ‰€ä»¥ä¸èƒ½ç”¨callã€applyã€bindè¿™äº›æ–¹æ³•æ”¹å˜thisçš„æŒ‡å‘ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  hi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  say: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> hi = obj.hi();          <span class="comment">//  obj</span></span><br><span class="line">hi();                       <span class="comment">//  obj</span></span><br><span class="line"><span class="keyword">let</span> sayHi = obj.sayHi();</span><br><span class="line"><span class="keyword">let</span> fun1 = sayHi();         <span class="comment">//  window</span></span><br><span class="line">fun1();                     <span class="comment">//  window</span></span><br><span class="line">obj.say();                  <span class="comment">//  window</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/15/2019/May/Promise/myPromise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/15/2019/May/Promise/myPromise/" itemprop="url">
                  å®ç°ä¸€ä¸ªpromise
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-15 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-15T00:00:00+08:00">2019-05-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-18 10:25:10" itemprop="dateModified" datetime="2020-03-18T10:25:10+08:00">2020-03-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'PENDING'</span>;</span><br><span class="line"><span class="keyword">const</span> RESOLVED = <span class="string">'RESOLVED'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'REJECTED'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span>;</span><br><span class="line">  </span><br><span class="line">  that.value = <span class="literal">null</span>;</span><br><span class="line">  that.state = PENDING;</span><br><span class="line"></span><br><span class="line">  that.resolvedCallbacks = [];</span><br><span class="line">  that.rejectedCallbacks = [];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">      <span class="keyword">return</span> value.then(resolve, reject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.state === PENDING) &#123;</span><br><span class="line">      that.state = RESOLVED;</span><br><span class="line">      that.value = value;</span><br><span class="line">      that.resolvedCallbacks.map(<span class="function"><span class="params">cb</span> =&gt;</span> cb(that.value));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (that.state === PENDING) &#123;</span><br><span class="line">      that.state = REJECTED;</span><br><span class="line">      that.value = value;</span><br><span class="line">      that.rejectedCallbacks.map(<span class="function"><span class="params">cb</span> =&gt;</span> cb(that.value));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    fn(resolve, reject);</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    reject(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyPromise.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span>;</span><br><span class="line">  onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br><span class="line">  onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> ? onRejected : <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> r</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (that.state === PENDING) &#123;</span><br><span class="line">    that.resolvedCallbacks.push(onFulfilled);</span><br><span class="line">    that.rejectedCallbacks.push(onRejected);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (that.state === RESOLVED) &#123;</span><br><span class="line">    onFulfilled(that.value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (that.state === REJECTED) &#123;</span><br><span class="line">    onRejected(that.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> that;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">111</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/13/2019/May/JqPlugin/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/13/2019/May/JqPlugin/README/" itemprop="url">
                  å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-13 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-13T00:00:00+08:00">2019-05-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 10:57:09" itemprop="dateModified" datetime="2020-05-25T10:57:09+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶"><a href="#å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶" class="headerlink" title="å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶"></a>å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶</h2><h3 id="jQuery-æ’ä»¶å¼€å‘æ¨¡å¼"><a href="#jQuery-æ’ä»¶å¼€å‘æ¨¡å¼" class="headerlink" title="jQuery æ’ä»¶å¼€å‘æ¨¡å¼"></a>jQuery æ’ä»¶å¼€å‘æ¨¡å¼</h3><p>jQueryçš„æ’ä»¶å¼€å‘æ¨¡å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>é€šè¿‡$.extend()æ¥æ‰©å±•jQuery</li>
<li>é€šè¿‡$.fnå‘jQueryæ·»åŠ æ–°çš„æ–¹æ³•</li>
<li>é€šè¿‡$.widget()åº”ç”¨jQuery UIçš„éƒ¨ä»¶å·¥å‚æ–¹å¼åˆ›å»º</li>
</ul>
<h4 id="extend"><a href="#extend" class="headerlink" title="$.extend()"></a>$.extend()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$.fn.extend(&#123;</span><br><span class="line"> check: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.checked = <span class="literal">true</span>;</span><br><span class="line">    &#125;),</span><br><span class="line"> &#125;</span><br><span class="line"> uncheck: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.checked = <span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">"input[type='checkbox']"</span>).check();</span><br></pre></td></tr></table></figure>
<h4 id="fn"><a href="#fn" class="headerlink" title="$.fn"></a>$.fn</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myPlugin</span>(<span class="params">$ele, options</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">myPlugin.prototype = &#123;</span><br><span class="line">  method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$.fn.myplugin = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">new</span> myPlugin(<span class="keyword">this</span>, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/11/2019/May/Extends/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/11/2019/May/Extends/README/" itemprop="url">
                  JSç»§æ‰¿çš„å®ç°æ–¹å¼
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-11 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-11T00:00:00+08:00">2019-05-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 10:52:16" itemprop="dateModified" datetime="2020-05-25T10:52:16+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="JSç»§æ‰¿çš„å®ç°æ–¹å¼"><a href="#JSç»§æ‰¿çš„å®ç°æ–¹å¼" class="headerlink" title="JSç»§æ‰¿çš„å®ç°æ–¹å¼"></a>JSç»§æ‰¿çš„å®ç°æ–¹å¼</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Animal'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'~~~'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' eat: '</span> + food);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-åŸå‹é“¾ç»§æ‰¿"><a href="#1-åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="1. åŸå‹é“¾ç»§æ‰¿"></a>1. åŸå‹é“¾ç»§æ‰¿</h3><p>æ ¸å¿ƒï¼š å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.name = <span class="string">'cat'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name); <span class="comment">// cat</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.eat(<span class="string">'fish'</span>)); <span class="comment">// cat eat: fish</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  cat~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">//  true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat);  <span class="comment">//  true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>éå¸¸çº¯ç²¹çš„ç»§æ‰¿å…³ç³»ï¼Œå®ä¾‹æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹</li>
<li>çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•/åŸå‹å±æ€§ï¼Œå­ç±»éƒ½èƒ½è®¿é—®åˆ°</li>
<li>ç®€å•ï¼Œæ˜“äºå®ç°</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>è¦æƒ³ä¸ºå­ç±»æ–°å¢å±æ€§å’Œæ–¹æ³•ï¼Œå¿…é¡»è¦åœ¨new Animal()è¿™æ ·çš„è¯­å¥ä¹‹åæ‰§è¡Œï¼Œä¸èƒ½æ”¾åˆ°æ„é€ å™¨ä¸­</li>
<li>æ— æ³•å®ç°å¤šç»§æ‰¿</li>
<li>æ¥è‡ªåŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«</li>
<li>åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚</li>
</ol>
<h3 id="2-æ„é€ ç»§æ‰¿"><a href="#2-æ„é€ ç»§æ‰¿" class="headerlink" title="2. æ„é€ ç»§æ‰¿"></a>2. æ„é€ ç»§æ‰¿</h3><p>æ ¸å¿ƒï¼šä½¿ç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å¢å¼ºå­ç±»å®ä¾‹ï¼Œç­‰äºæ˜¯å¤åˆ¶çˆ¶ç±»çš„å®ä¾‹å±æ€§ç»™å­ç±»ï¼ˆæ²¡ç”¨åˆ°åŸå‹ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Animal.apply(<span class="keyword">this</span>);  <span class="comment">// Animal.call(this);</span></span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'cat'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);  <span class="comment">//  cat</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  cat~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal);   <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>è§£å†³äº†1ä¸­ï¼Œå­ç±»å®ä¾‹å…±äº«çˆ¶ç±»å¼•ç”¨å±æ€§çš„é—®é¢˜</li>
<li>åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œå¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°</li>
<li>å¯ä»¥å®ç°å¤šç»§æ‰¿ï¼ˆcallå¤šä¸ªçˆ¶ç±»å¯¹è±¡ï¼‰</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>å®ä¾‹å¹¶ä¸æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œåªæ˜¯å­ç±»çš„å®ä¾‹</li>
<li>åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³•</li>
<li>æ— æ³•å®ç°å‡½æ•°å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»éƒ½æœ‰çˆ¶ç±»å®ä¾‹å‡½æ•°çš„å‰¯æœ¬ï¼Œå½±å“æ€§èƒ½</li>
</ol>
<h3 id="3-å®ä¾‹ç»§æ‰¿"><a href="#3-å®ä¾‹ç»§æ‰¿" class="headerlink" title="3. å®ä¾‹ç»§æ‰¿"></a>3. å®ä¾‹ç»§æ‰¿</h3><p>æ ¸å¿ƒï¼šä¸ºçˆ¶ç±»å®ä¾‹æ·»åŠ æ–°ç‰¹æ€§ï¼Œåšä¸ºå­ç±»å®ä¾‹è¿”å›</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance = <span class="keyword">new</span> Animal();</span><br><span class="line">  instance.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);  <span class="comment">//  Tom</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  Tom~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal);  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat);  <span class="comment">//  false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>ä¸é™åˆ¶è°ƒç”¨æ–¹å¼ï¼Œä¸ç®¡äº‹new å­ç±»ï¼ˆï¼‰è¿˜æ˜¯å­ç±»ï¼ˆï¼‰ï¼Œè¿”å›çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„æ•ˆæœ</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>å®ä¾‹æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¸æ˜¯å­ç±»çš„å®ä¾‹</li>
<li>ä¸æ”¯æŒå¤šç»§æ‰¿</li>
</ol>
<h3 id="4-æ‹·è´ç»§æ‰¿"><a href="#4-æ‹·è´ç»§æ‰¿" class="headerlink" title="4. æ‹·è´ç»§æ‰¿"></a>4. æ‹·è´ç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> animal = <span class="keyword">new</span> Animal();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> animal) &#123;</span><br><span class="line">    Cat.prototype[i] = animal[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Cat.prototype.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);  <span class="comment">//  Tom</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  Tom~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal);  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat);  <span class="comment">//  true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>æ”¯æŒå¤šç»§æ‰¿</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>æ•ˆç‡è¾ƒä½ï¼Œå†…å­˜å ç”¨é«˜ï¼ˆå› ä¸ºè¦æ‹·è´çˆ¶ç±»çš„å±æ€§ï¼‰</li>
<li>æ— æ³•è·å–çˆ¶ç±»ä¸å¯æšä¸¾çš„æ–¹æ³•ï¼ˆä¸å¯æšä¸¾æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨for in è®¿é—®åˆ°ï¼‰</li>
</ol>
<h3 id="5-ç»„åˆç»§æ‰¿"><a href="#5-ç»„åˆç»§æ‰¿" class="headerlink" title="5. ç»„åˆç»§æ‰¿"></a>5. ç»„åˆç»§æ‰¿</h3><p>æ ¸å¿ƒï¼šé€šè¿‡è°ƒç”¨çˆ¶ç±»æ„é€ ï¼Œç»§æ‰¿çˆ¶ç±»çš„å±æ€§å¹¶ä¿ç•™ä¼ å‚çš„ä¼˜ç‚¹ï¼Œç„¶åé€šè¿‡å°†çˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹ï¼Œå®ç°å‡½æ•°å¤ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.constructor = Cat;  <span class="comment">//  ä¿®å¤Catçš„æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);  <span class="comment">//  Tom</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  Tom~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal);   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>å¼¥è¡¥äº†æ–¹å¼2çš„ç¼ºé™·ï¼Œå¯ä»¥ç»§æ‰¿å®ä¾‹å±æ€§/æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³•</li>
<li>æ—¢æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹</li>
<li>ä¸å­˜åœ¨å¼•ç”¨å±æ€§å…±äº«é—®é¢˜</li>
<li>å¯ä¼ å‚</li>
<li>å‡½æ•°å¯å¤ç”¨</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹ï¼ˆå­ç±»å®ä¾‹å°†å­ç±»åŸå‹ä¸Šçš„é‚£ä»½å±è”½äº†ï¼‰</li>
</ol>
<h3 id="6-å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#6-å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="6. å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>6. å¯„ç”Ÿç»„åˆç»§æ‰¿</h3><p>æ ¸å¿ƒï¼šé€šè¿‡å¯„ç”Ÿæ–¹å¼ï¼Œç æ‰çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œè¿™æ ·ï¼Œåœ¨è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåˆå§‹åŒ–ä¸¤æ¬¡å®ä¾‹æ–¹æ³•/å±æ€§ï¼Œé¿å…çš„ç»„åˆç»§æ‰¿çš„ç¼ºç‚¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">'Tom'</span>;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//  åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®ä¾‹æ–¹æ³•çš„ç±»</span></span><br><span class="line">  <span class="keyword">var</span> Super = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  Super.prototype = Animal.prototype;</span><br><span class="line">  <span class="comment">//  å°†å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</span></span><br><span class="line">  Cat.prototype = <span class="keyword">new</span> Super();</span><br><span class="line">  Cat.prototype.constructor = Cat;  <span class="comment">//  ä¿®å¤Catçš„æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);  <span class="comment">//  Tom</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep()); <span class="comment">//  Tom~~~</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
</blockquote>
<ol>
<li>å ªç§°å®Œç¾</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<ol>
<li>å®ç°è¾ƒä¸ºå¤æ‚</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://achenjs.github.io/2019/05/09/2019/May/Decorator/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="achen">
      <meta itemprop="description" content="æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="achençš„ä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/09/2019/May/Decorator/README/" itemprop="url">
                  ä¿®é¥°å™¨çš„ä½¿ç”¨
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-09 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-09T00:00:00+08:00">2019-05-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-25 10:50:50" itemprop="dateModified" datetime="2020-05-25T10:50:50+08:00">2020-05-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç”±äºä½¿ç”¨äº†decorator, nodeä¸ç”¨æ­£å¸¸è¯†åˆ«ï¼Œéœ€è¦ä½¿ç”¨babelè½¬æ¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ babel-node test.js</span><br></pre></td></tr></table></figure>
<h3 id="1-ç±»ä¿®é¥°å™¨ï¼ˆåªæœ‰ä¸€ä¸ªå‚æ•°ï¼‰"><a href="#1-ç±»ä¿®é¥°å™¨ï¼ˆåªæœ‰ä¸€ä¸ªå‚æ•°ï¼‰" class="headerlink" title="1. ç±»ä¿®é¥°å™¨ï¼ˆåªæœ‰ä¸€ä¸ªå‚æ•°ï¼‰"></a>1. ç±»ä¿®é¥°å™¨ï¼ˆåªæœ‰ä¸€ä¸ªå‚æ•°ï¼‰</h3><p>target: æŒ‡å‘ç±»ï¼Œå¦‚æœæ˜¯ç±»å‹æ˜¯functionï¼Œåˆ™æŒ‡å‘MyFunction.prototype</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testable</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  target.isTestable = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@testabel</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTestableClass</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ï¼Œ@testableå°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒä¸ºMyTestableClassè¿™ä¸ªç±»æ·»åŠ äº†ä¸€ä¸ªé™æ€å±æ€§isTestable</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testable</span>(<span class="params">isTestable</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">    target.isTestable = isTestable;</span><br><span class="line">    target.prototype.name = <span class="string">'achen'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@testabel(<span class="literal">false</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTestabelClass</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ï¼Œå‘Šè¯‰æˆ‘ä»¬@testableä½•å¦‚ä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”å¦‚ä½•ä¸ºç±»æ·»åŠ åŸå‹å±æ€§æˆ–è€…æ–¹æ³•ã€‚</p>
<h3 id="2-æ–¹æ³•ä¿®é¥°å™¨ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼‰"><a href="#2-æ–¹æ³•ä¿®é¥°å™¨ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼‰" class="headerlink" title="2. æ–¹æ³•ä¿®é¥°å™¨ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼‰"></a>2. æ–¹æ³•ä¿®é¥°å™¨ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼‰</h3><p>target: æ–¹æ³•æ‰€åœ¨çš„ç±»<br>name: æ–¹æ³•åç§°<br>descriptor: æè¿°å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Math</span> </span>&#123;</span><br><span class="line">  @log</span><br><span class="line">  add(a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oldValue = descriptor.value;</span><br><span class="line"></span><br><span class="line">  descriptor.value = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Calling <span class="subst">$&#123;name&#125;</span> with`</span>, <span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> math = <span class="keyword">new</span> <span class="built_in">Math</span>();</span><br><span class="line"></span><br><span class="line">math.add(<span class="number">2</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h4 id="ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ</h4><p>ä¿®é¥°å™¨åªèƒ½ç”¨äºç±»å’Œç±»çš„æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> conuter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter++;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@add</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="achen" />
            
              <p class="site-author-name" itemprop="name">achen</p>
              <p class="site-description motion-element" itemprop="description">æ—¥å¸¸å¤åˆ¶ç²˜è´´,é—®å•¥å•¥ä¸ä¼š</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">49</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/achenjs" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i></a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:hellowwc@aliyun.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">achen</span>

  

  
</div>




  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.4.0</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="æ€»è®¿å®¢é‡">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="æ€»è®¿é—®é‡">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  


  <!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
  <script type="text/javascript" src="/js/src/love.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
