<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[çŸ¥è¯†ç‚¹]]></title>
    <url>%2F2020%2F03%2F31%2F2020%2F3%E6%9C%88%2F0331%2F</url>
    <content type="text"><![CDATA[Reactå®ç°ä¸€ä¸ªåœºæ™¯ï¼Œæ¸²æŸ“å¤šå¼ å›¾ç‰‡ï¼Œä¿è¯å›¾ç‰‡çš„åº•éƒ¨å°½é‡æ˜¯å¯¹é½çš„ï¼Œç„¶åæ»šåŠ¨æ¡æ‹‰åˆ°åº•ï¼Œåœ¨è¯·æ±‚å›¾ç‰‡å†æ¬¡æ¸²æŸ“React ä¸­ key çš„ç”¨æ³•ï¼Œå¸¸ç”¨ä½¿ç”¨åœºæ™¯keyçš„æ¦‚å¿µ react ä¸­çš„ key å±æ€§æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œå®ƒçš„å‡ºç°ä¸æ˜¯ç»™å¼€å‘è€…ç”¨çš„ï¼Œè€Œæ˜¯ç»™ react è‡ªèº«ç”¨çš„ã€‚ç®€å•çš„æ¥è¯´ï¼Œreact åˆ©ç”¨ key æ¥è¯†åˆ«ç»„ä»¶ï¼Œä»–æ˜¯ä¸€ç§èº«ä»½æ ‡è¯†ï¼Œå°±åƒæ¯ä¸ªäººçš„èº«ä»½è¯ä¸€æ ·ã€‚æ¯ä¸ª key å¯¹åº”ä¸€ä¸ªç»„ä»¶ï¼Œç›¸åŒçš„ key, react ä¼šè®¤ä¸ºæ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œè¿™æ ·åç»­ç›¸åŒçš„ key å¯¹åº”çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«åˆ›å»ºã€‚(ç»æµ‹è¯•ï¼Œ16ç‰ˆæœ¬ä¹‹åkeyé‡å¤ä¹Ÿä¼šæ¸²æŸ“å‡ºæ¥ï¼Ÿ) keyçš„ä½¿ç”¨åœºæ™¯ åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œkeyå±æ€§çš„ä½¿ç”¨åœºæ™¯æœ€å¤šçš„è¿˜æ˜¯ç”±æ•°ç»„åŠ¨æ€åˆ›å»ºçš„å­ç»„ä»¶æƒ…å†µï¼Œéœ€è¦ä¸ºæ¯ä¸ªå­ç»„ä»¶æ·»åŠ å”¯ä¸€çš„keyå±æ€§å€¼ã€‚é‚£æœ‰çš„äººä¼šè‡ªç„¶è€Œç„¶æƒ³åˆ°ï¼Œkey å’ŒåŠ¨æ€æ¸²æŸ“çš„å­å…ƒç´ è·å–çš„indexçš„å€¼å¾ˆæ¥è¿‘ï¼Œæ˜¯ä¸æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨indexå€¼ èµ‹å€¼ç»™keyå‘¢ï¼Ÿ 12345&#123; data.map((item, index) =&gt; ( &lt;div key=&#123;index&#125;&gt;item.name&lt;/div&gt; ))&#125; åœ¨å°è¯•åæˆ‘ä»¬å‘ç°æŠ¥é”™æ²¡äº†ï¼Œæ¸²æŸ“ä¹Ÿæ²¡é—®é¢˜ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å¼ºçƒˆä¸æ¨èä½¿ç”¨æ•°ç»„çš„index å€¼æ¥ä½œä¸ºkeyã€‚å¦‚æœæ•°æ®æ›´æ–°ä»…ä»…æ˜¯æ•°ç»„é‡æ–°æ’åºæˆ–åœ¨å…¶ä¸­é—´ä½ç½®æ’å…¥æ–°å…ƒç´ ï¼Œé‚£ä¹ˆæ‰€æœ‰å…ƒç´ éƒ½å°†é‡æ–°æ¸²æŸ“ã€‚ ä¾‹å¦‚ï¼šæœ¬æ¥index=2 çš„å…ƒç´ å‘å‰ç§»åŠ¨åï¼Œé‚£è¯¥å…ƒç´ çš„key ä¸ä¹ŸåŒæ ·å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£è¿™æ ·æ”¹å˜ï¼Œkey å°±æ²¡æœ‰ä»»ä½•å­˜åœ¨çš„æ„ä¹‰äº†ï¼Œæ—¢ç„¶æ˜¯ä½œä¸ºèº«ä»½è¯ä¸€æ ·çš„å­˜åœ¨ï¼Œé‚£å°±ä¸å®¹æœ‰å¤±ï¼Œå½“ç„¶ï¼Œåœ¨ä½ ç”¨keyå€¼åˆ›å»ºå­ç»„ä»¶çš„æ—¶å€™ï¼Œè‹¥æ•°ç»„çš„å†…å®¹åªæ˜¯ä½œä¸ºçº¯å±•ç¤ºï¼Œè€Œä¸æ¶‰åŠåˆ°æ•°ç»„çš„åŠ¨æ€å˜æ›´ï¼Œå…¶å®æ˜¯å¯ä»¥ä½¿ç”¨index ä½œä¸ºkeyçš„ï¼Œ keyçš„å€¼å¿…é¡»ä¿è¯å”¯ä¸€ä¸”ç¨³å®š æˆ‘ä»¬åœ¨ä¸keyå€¼æ‰“è¿‡å‡ æ¬¡äº¤åˆ°ä»¥åï¼Œæ„Ÿè§‰keyå€¼å°±ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„ä¸»é”®idä¸€æ ·ï¼Œæœ‰ä¸”å”¯ä¸€ã€‚ Reactå¦‚ä½•å¤„ç†æ›´æ–°React å†…éƒ¨ setState æ˜¯å¦‚ä½•æ‰¹å¤„ç†çš„setState çš„æ‰¹é‡æ›´æ–°æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œé¡ºåºæ›´æ–°ã€‚ åœ¨ react çš„ event handler å†…éƒ¨åŒæ­¥çš„å¤šæ¬¡ setState ä¼šè¢« batch ä¸ºä¸€æ¬¡æ›´æ–° åœ¨ä¸€ä¸ªå¼‚æ­¥çš„äº‹ä»¶å¾ªç¯é‡Œé¢å¤šæ¬¡ setStateï¼Œreact ä¸ä¼š batch å¯ä»¥ä½¿ç”¨React.unstable_batchedUpdates æ¥å¼ºåˆ¶ batch ä¸ºä»€ä¹ˆåœ¨ setTimeout ä¸­å¤šæ¬¡ setStateï¼Œreact ä¸ä¼š batchï¼Ÿ å› ä¸º React çš„æ›´æ–°æ˜¯åŸºäº Transactionï¼ˆäº‹åŠ¡ï¼‰çš„ï¼ŒTransacation å°±æ˜¯ç»™ç›®æ ‡æ‰§è¡Œçš„å‡½æ•°åŒ…è£¹ä¸€ä¸‹ï¼ŒåŠ ä¸Šå‰ç½®å’Œåç½®çš„ hook ï¼ˆæœ‰ç‚¹ç±»ä¼¼ koa çš„ middlewareï¼‰ï¼Œåœ¨å¼€å§‹æ‰§è¡Œä¹‹å‰å…ˆæ‰§è¡Œ initialize hookï¼Œç»“æŸä¹‹åå†æ‰§è¡Œ close hookï¼Œè¿™æ ·æ­é…ä¸Š isBatchingUpdates è¿™æ ·çš„å¸ƒå°”æ ‡å¿—ä½å°±å¯ä»¥å®ç°ä¸€æ•´ä¸ªå‡½æ•°è°ƒç”¨æ ˆå†…çš„å¤šæ¬¡ setState å…¨éƒ¨å…¥ pending é˜Ÿåˆ—ï¼Œç»“æŸåç»Ÿä¸€ apply äº†ã€‚ ä½†æ˜¯ setTimeout è¿™æ ·çš„æ–¹æ³•æ‰§è¡Œæ˜¯è„±ç¦»äº†äº‹åŠ¡çš„ï¼Œreact ç®¡æ§ä¸åˆ°ï¼Œæ‰€ä»¥å°±æ²¡æ³• batch äº†ã€‚ Reactæ²¡æœ‰æ§åˆ¶æƒçš„å‡½æ•° setTimeout ä¸ºä»€ä¹ˆ react è¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ 123456789101112131415161718function Parent() &#123; let [count, setCount] = useState(0); return ( &lt;div onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Parent clicked &#123;count&#125; times &lt;Child /&gt; &lt;/div&gt; );&#125;function Child() &#123; let [count, setCount] = useState(0); return ( &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Child clicked &#123;count&#125; times &lt;/button&gt; );&#125; ä¸Šé¢è¿™æ ·çš„ demoï¼Œç”±äºç‚¹å‡»äº‹ä»¶å†’æ³¡çš„ç¼˜æ•…ï¼Œæˆ‘ä»¬å‡è®¾å¦‚æœ react ä¸ batch ç«‹å³æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆç‚¹äº† child button ä¹‹åçš„é€»è¾‘ä¼šæ˜¯å¦‚ä¸‹è¿™æ · 123456789*** è¿›å…¥ react click çš„äº‹ä»¶å‡½æ•° ***Child (onClick) è§¦å‘ç‚¹å‡» - setState ä¿®æ”¹ state - re-render Child é‡æ–°æ¸²æŸ“ // ğŸ˜ ä¸å¿…è¦çš„Parent (onClick) è§¦å‘ç‚¹å‡»ï¼ˆå†’æ³¡ï¼‰ - setState ä¿®æ”¹ state - re-render Parent é‡æ–°æ¸²æŸ“ - re-render Child é‡æ–°æ¸²æŸ“ ï¼ˆæ¸²æŸ“æ˜¯è‡ªé¡¶å‘ä¸‹çš„ï¼Œçˆ¶äº²æ›´æ–°ä¼šå¯¼è‡´å„¿å­æ›´æ–°ï¼‰*** é€€å‡º react click çš„äº‹ä»¶å‡½æ•° *** ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ¬¡å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å®Œå…¨æ˜¯æµªè´¹çš„ã€‚ æ‰€ä»¥ React è®¾è®¡æˆ setState ä¸ç«‹å³è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯å…ˆæ‰§è¡Œå®Œæ‰€æœ‰çš„ event handlerï¼Œç„¶åç”¨ä¸€æ¬¡é‡æ–°æ¸²æŸ“å®Œæˆæ‰€æœ‰æ›´æ–°ã€‚ forceUpdateçš„è¯´æ˜ forceUpdate ä»å‡½æ•°åä¸Šç†è§£ï¼šâ€œå¼ºåˆ¶æ›´æ–°â€ã€‚ forceUpdate æ˜¯åŒæ­¥çš„å—ï¼Ÿâ€œå¼ºåˆ¶â€ä¼šä¿è¯è°ƒç”¨ç„¶åç›´æ¥dom-diffå—ï¼Ÿ forceUpdateåœ¨æ‰¹é‡ä¸å¦çš„è¡¨ç°ä¸Šï¼Œå’ŒsetStateæ˜¯ä¸€æ ·çš„ã€‚åœ¨Reactæœ‰æ§åˆ¶æƒçš„å‡½æ•°é‡Œï¼Œæ˜¯æ‰¹é‡çš„ã€‚ â€œå¼ºåˆ¶â€æ›´æ–°æ•´ä¸ªç»„ä»¶æ ‘å—ï¼ŸåŒ…æ‹¬è‡ªå·±ï¼Œå­å­™åä»£ç»„ä»¶å—ï¼Ÿ forceUpdateåªä¼šå¼ºåˆ¶æœ¬èº«ç»„ä»¶çš„æ›´æ–°ï¼Œå³ä¸è°ƒç”¨â€œshouldComponentUpdateâ€ç›´æ¥æ›´æ–°ï¼Œå¯¹äºå­å­™åä»£ç»„ä»¶è¿˜æ˜¯è¦è°ƒç”¨è‡ªå·±çš„â€œshouldComponentUpdateâ€æ¥å†³å®šçš„ã€‚ React15å¦‚ä½•å»ä¼˜åŒ–useCallback useMemoçš„åŒºåˆ«useMemo 1const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]); æŠŠåˆ›å»ºå‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥useMemoï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—memoizedå€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚ useCallback 1234const memoizedCallback = useCallback( () =&gt; doSomething(a, b), [a, b]); æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥useCallback, å®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦çš„æ¸²æŸ“çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ çœ‹èµ·æ¥ä¼¼ä¹å’ŒuseMemoå·®ä¸å¤šï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆå¼‚åŒï¼š useMemo å’Œ useCallback æ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰æ‰§è¡Œï¼Œéƒ½æ˜¯è¿”å›ç¼“å­˜çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº useMemo è¿”å›çš„æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼ŒuseCallbackè¿”å›çš„å‡½æ•°ã€‚ useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps) React Hooksæ²¡æœ‰ç ´åæ€§æ”¹åŠ¨ å®Œå…¨æ˜¯å¯é€‰çš„ã€‚ 100%å‘åå…¼å®¹çš„ã€‚ ç°åœ¨å¯ç”¨ï¼Œhook å‘å¸ƒäº v16.8.0 æ²¡æœ‰è®¡åˆ’ä»Reactç§»é™¤classã€‚Hookä¸ä¼šå½±å“ä½ å¯¹ React æ¦‚å¿µçš„ç†è§£ã€‚ åŠ¨æœºHook è§£å†³äº†æˆ‘ä»¬äº”å¹´æ¥ç¼–å†™å’Œç»´æŠ¤æˆåƒä¸Šä¸‡çš„ç»„ä»¶æ—¶é‡åˆ°çš„å„ç§å„æ ·çœ‹èµ·æ¥ä¸ç›¸å…³çš„é—®é¢˜ã€‚ åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ä½ å¯ä»¥ä½¿ç”¨ Hook ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£æˆ‘ä»¬ç»å¸¸ç»´æŠ¤ä¸€äº›ç»„ä»¶ï¼Œç»„ä»¶èµ·åˆå¾ˆç®€å•ï¼Œä½†æ˜¯é€æ¸ä¼šè¢«çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨å……æ–¥ã€‚æ¯ä¸ªç”Ÿå‘½å‘¨æœŸå¸¸å¸¸åŒ…å«ä¸€äº›ä¸ç›¸å…³çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶å¸¸å¸¸åœ¨ componentDidMount å’Œ componentDidUpdate ä¸­è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ª componentDidMount ä¸­å¯èƒ½ä¹ŸåŒ…å«å¾ˆå¤šå…¶å®ƒçš„é€»è¾‘ï¼Œå¦‚è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œè€Œä¹‹åéœ€åœ¨ componentWillUnmount ä¸­æ¸…é™¤ã€‚ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«è¿›è¡Œäº†æ‹†åˆ†ï¼Œè€Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æ­¤å¾ˆå®¹æ˜“äº§ç”Ÿ bugï¼Œå¹¶ä¸”å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ reducer æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚ éš¾ä»¥ç†è§£çš„ classé™¤äº†ä»£ç å¤ç”¨å’Œä»£ç ç®¡ç†ä¼šé‡åˆ°å›°éš¾å¤–ï¼Œæˆ‘ä»¬è¿˜å‘ç° class æ˜¯å­¦ä¹  React çš„ä¸€å¤§å±éšœã€‚ä½ å¿…é¡»å»ç†è§£ JavaScript ä¸­ this çš„å·¥ä½œæ–¹å¼ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚è¿˜ä¸èƒ½å¿˜è®°ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚æ²¡æœ‰ç¨³å®šçš„è¯­æ³•ææ¡ˆï¼Œè¿™äº›ä»£ç éå¸¸å†—ä½™ã€‚å¤§å®¶å¯ä»¥å¾ˆå¥½åœ°ç†è§£ propsï¼Œstate å’Œè‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµï¼Œä½†å¯¹ class å´ä¸€ç­¹è«å±•ã€‚å³ä¾¿åœ¨æœ‰ç»éªŒçš„ React å¼€å‘è€…ä¹‹é—´ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶çš„å·®å¼‚ä¹Ÿå­˜åœ¨åˆ†æ­§ï¼Œç”šè‡³è¿˜è¦åŒºåˆ†ä¸¤ç§ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ã€‚class ä¹Ÿç»™ç›®å‰çš„å·¥å…·å¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œclass ä¸èƒ½å¾ˆå¥½çš„å‹ç¼©ï¼Œå¹¶ä¸”ä¼šä½¿çƒ­é‡è½½å‡ºç°ä¸ç¨³å®šçš„æƒ…å†µã€‚å› æ­¤ï¼Œæˆ‘ä»¬æƒ³æä¾›ä¸€ä¸ªä½¿ä»£ç æ›´æ˜“äºä¼˜åŒ–çš„ APIã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥åŸåˆ™ã€‚Hook æä¾›äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„å‡½æ•°å¼æˆ–å“åº”å¼ç¼–ç¨‹æŠ€æœ¯ã€‚ React Context å¦‚ä½•å»ä½¿ç”¨ React.createContext 1const MyContext = React.createContext(null); Context.Provider 1&lt;MyContext.Provider value=&#123;value&#125;&gt; æ¯ä¸ª Context ç»„ä»¶éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider Reactç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚ Class.contextType 123456789101112131415class Myclass extends React.Component &#123; static contextType = MyContext; componentDidMount() &#123; let value = this.context; &#125; componentDidUpdate() &#123; let value = this.context; &#125; render() &#123; let value = this.context; &#125;&#125; æŒ‚è½½åœ¨classä¸Šçš„ contextType å±æ€§ä¼šè¢«é‡èµ‹å€¼ä¸ºä¸€ä¸ªç”± React.createContext() åˆ›å»ºçš„ Context å¯¹è±¡ã€‚ è¿™èƒ½è®©ä½ ä½¿ç”¨this.context æ¥æ¶ˆè´¹æœ€è¿‘ Context ä¸Šçš„å€¼ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸä¸­è®¿é—®åˆ°å®ƒï¼ŒåŒ…æ‹¬renderå‡½æ•°ä¸­ã€‚ Context.Consumer 12345&lt;MyContext.Consumer&gt; &#123; value =&gt; /* åŸºäºcontextçš„å€¼æ¸²æŸ“ */ &#125;&lt;/MyContext.consumer&gt; Redux å’Œ Mobx çš„åŒºåˆ«Reactå¦‚ä½•å®ç°è½®æ’­å›¾åœ¨ä½¿ç”¨Reduxä¸­ï¼Œå½“ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼Œå‘ç°ç»„ä»¶æ²¡æœ‰æ›´æ–°ï¼Œå¯èƒ½çš„åŸå› æœ‰å“ªäº› æ˜¯å¦ key å€¼é‡å¤å¯¼è‡´ æ˜¯å¦æ­£ç¡®çš„å¼•å…¥æ•°æ®, æˆ–è€…ä¼ é€’props æ˜¯å¦ç»„ä»¶å†…éƒ¨å¿˜è®°connect React16 å‡½æ•°å¼ç¼–ç¨‹æ€ä¹ˆå»ä¼˜åŒ– useMemo useCallback fragments]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çŸ¥è¯†ç‚¹]]></title>
    <url>%2F2020%2F03%2F30%2F2020%2F3%E6%9C%88%2F0330%2F</url>
    <content type="text"><![CDATA[è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«CDNCDN å†…å®¹åˆ†å‘ç½‘ç»œï¼Œé€šè¿‡ä¸­å¿ƒå¹³å°çš„è´Ÿè½½å‡è¡¡ã€å†…å®¹åˆ†å‘ã€è°ƒåº¦ç­‰åŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œé˜»å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®å“åº”æ•ˆç‡å’Œå‘½ä¸­ç‡ã€‚CDN çš„å…³é”®æŠ€æœ¯æœ‰å†…å®¹å­˜å‚¨å’Œåˆ†å‘æŠ€æœ¯ã€‚ æ‰“å°ä¸€ä¸ªæ ‘ç»“æ„çš„å¯¹è±¡flexå¸ƒå±€jså‡½æ•°çš„4ç§è°ƒç”¨æ–¹å¼ ä½œä¸ºå‡½æ•°ç›´æ¥è°ƒç”¨ ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ ä½¿ç”¨callã€applyåŠ¨æ€è°ƒç”¨ newå‘½ä»¤é—´æ¥è°ƒç”¨ thisçš„æŒ‡å‘æœ‰å“ªå‡ ç§æƒ…å†µï¼Ÿ ä½œä¸ºå‡½æ•°ç›´æ¥è°ƒç”¨ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘windowï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefined ä½œä¸ºæŸå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼ŒthisæŒ‡å‘è¿™ä¸ªå¯¹è±¡ ä½¿ç”¨applyã€callã€bindè°ƒç”¨ï¼Œthisæ˜¯ç¬¬ä¸€ä¸ªä¼ é€’è¿›å»çš„å€¼ åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ï¼ŒthisæŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ ç®­å¤´å‡½æ•°ä¸­æ²¡æœ‰thisï¼Œthisåœ¨ç®­å¤´å‡½æ•°åˆ›å»ºæ—¶ç¡®å®šï¼Œå®ƒä¸å£°æ˜æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç›¸åŒã€‚ regexpæ­£åˆ™ï¼Œè®²è®²è´ªå©ªæ¨¡å¼æ­£åˆ™é»˜è®¤æ˜¯è´ªå©ªæ¨¡å¼ï¼Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼ä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ linuxå¸¸ç”¨å‘½ä»¤é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«ï¼Œä»¥åŠä»–ä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹Csså®ç°ç€‘å¸ƒæµCss å®ç°åœ†å½¢è¿›åº¦æ¡less sassçš„åŒºåˆ«é“¾è¡¨å’Œæ•°ç»„çš„åŒºåˆ«jsä¸ºä»€ä¹ˆå•çº¿ç¨‹è¯´è¯´ typescript çš„ç‰¹æ€§ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ç§»åŠ¨ç«¯é€‚é…æ€ä¹ˆåš]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP----HTTPç¼“å­˜æœºåˆ¶]]></title>
    <url>%2F2020%2F03%2F24%2F2020%2F3%E6%9C%88%2F0324-02%2F</url>
    <content type="text"><![CDATA[HTTPâ€”-HTTPç¼“å­˜æœºåˆ¶ç¼“å­˜çš„è§„åˆ™æˆ‘ä»¬çŸ¥é“httpçš„ç¼“å­˜å±äºå®¢æˆ·ç«¯ç¼“å­˜ï¼Œåé¢ä¼šæåˆ°ä¸ºä»€ä¹ˆå±äºå®¢æˆ·ç«¯ç¼“å­˜ã€‚æ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºæµè§ˆå™¨å­˜åœ¨ä¸€ä¸ªç¼“å­˜æ•°æ®åº“ï¼Œç”¨äºå‚¨å­˜ä¸€äº›ä¸ç»å¸¸å˜åŒ–çš„é™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€cssã€jsç­‰ï¼‰ã€‚æˆ‘ä»¬å°†ç¼“å­˜åˆ†ä¸ºå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚ä¸‹é¢æˆ‘å°†åˆ†åˆ«è¯¦ç»†çš„ä»‹ç»è¿™ä¸¤ç§ç¼“å­˜çš„ç¼“å­˜è§„åˆ™ã€‚ å¼ºåˆ¶ç¼“å­˜å½“ç¼“å­˜æ•°æ®åº“ä¸­å·²æœ‰æ‰€è¯·æ±‚çš„æ•°æ®æ—¶ã€‚å®¢æˆ·ç«¯ç›´æ¥ä»ç¼“å­˜æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚å½“ç¼“å­˜æ•°æ®åº“ä¸­æ²¡æœ‰æ‰€è¯·æ±‚çš„æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯çš„æ‰ä¼šä»æœåŠ¡ç«¯è·å–æ•°æ®ã€‚ åå•†ç¼“å­˜åˆç§°å¯¹æ¯”ç¼“å­˜ï¼Œå®¢æˆ·ç«¯ä¼šå…ˆä»ç¼“å­˜æ•°æ®åº“ä¸­è·å–åˆ°ä¸€ä¸ªç¼“å­˜æ•°æ®çš„æ ‡è¯†ï¼Œå¾—åˆ°æ ‡è¯†åè¯·æ±‚æœåŠ¡ç«¯éªŒè¯æ˜¯å¦å¤±æ•ˆï¼Œå¦‚æœæ²¡æœ‰å¤±æ•ˆæœåŠ¡ç«¯ä¼šè¿”å›304ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ‰€ä»¥è¯·æ±‚çš„æ•°æ®ï¼Œå¦‚æœæ ‡è¯†å¤±æ•ˆï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›æ›´æ–°åçš„æ•°æ®ã€‚ ä¸¤ç±»ç¼“å­˜æœºåˆ¶å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¼ºåˆ¶ç¼“å­˜çš„ä¼˜å…ˆçº§é«˜äºåå•†ç¼“å­˜ï¼Œå½“æ‰§è¡Œå¼ºåˆ¶ç¼“å­˜æ—¶ï¼Œå¦‚è‹¥ç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®åº“æ•°æ®ï¼Œä¸åœ¨è¿›è¡Œç¼“å­˜åå•†ã€‚ ç¼“å­˜çš„æ–¹æ¡ˆå¼ºåˆ¶ç¼“å­˜å¯¹äºå¼ºåˆ¶ç¼“å­˜ï¼ŒæœåŠ¡å™¨å“åº”çš„headerä¸­ä¼šç”¨ä¸¤ä¸ªå­—æ®µæ¥è¡¨æ˜ â€”â€“ Expireså’ŒCache-Control ExpiresExpiresçš„å€¼ä¸ºæœåŠ¡ç«¯è¿”å›çš„æ•°æ®åˆ°æœŸæ—¶é—´ã€‚å½“å†æ¬¡è¯·æ±‚æ—¶çš„è¯·æ±‚æ—¶é—´å°äºè¿”å›çš„æ­¤æ—¶é—´ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚ä½†ç”±äºæœåŠ¡ç«¯æ—¶é—´å’Œå®¢æˆ·ç«¯æ—¶é—´å¯èƒ½æœ‰è¯¯å·®ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´ç¼“å­˜å‘½ä¸­çš„è¯¯å·®ï¼Œå¦ä¸€æ–¹é¢ï¼ŒExpiresæ˜¯HTTP1.0çš„äº§ç‰©ï¼Œæ•…ç°åœ¨å¤§å¤šæ•°ä½¿ç”¨Cache-controlæ›¿ä»£ã€‚ Cache-ControlCache-controlæœ‰å¾ˆå¤šå±æ€§ï¼Œä¸åŒçš„å±æ€§ä»£è¡¨çš„æ„ä¹‰ä¹Ÿä¸åŒã€‚privateï¼šå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜publicï¼šå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜max-ageï¼šç¼“å­˜å†…å®¹å°†åœ¨tç§’åå¤±æ•ˆno-cacheï¼šéœ€è¦ä½¿ç”¨åå•†ç¼“å­˜æ¥éªŒè¯æ•°æ®no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ åå•†ç¼“å­˜åå•†ç¼“å­˜éœ€è¦è¿›è¡Œå¯¹æ¯”åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¼šé™ç¼“å­˜æ ‡è¯†ä¸æ•°æ®ä¸€èµ·å“åº”ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†å®ƒä»¬å¤‡ä»½è‡³ç¼“å­˜ä¸­ã€‚å†æ¬¡è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†ç¼“å­˜ä¸­çš„æ ‡è¯†å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®æ­¤æ ‡è¯†åˆ¤æ–­ã€‚ Last-midifiedLast-midified: æœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚æ—¶ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ Etag: æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œé€šè¿‡æ­¤å­—æ®µå‘Šè¯‰æµè§ˆå™¨å½“å‰èµ„æºåœ¨æœåŠ¡å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼ˆç”Ÿæˆè§„åˆ™ç”±æœåŠ¡å™¨å†³å®šï¼‰ ç¼“å­˜çš„ä¼˜ç‚¹ å‡å°‘äº†å†—ä½™çš„æ•°æ®ä¼ é€’ï¼ŒèŠ‚çœå®½å¸¦æµé‡ å‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œå¤§å¤§æé«˜äº†ç½‘ç«™æ€§èƒ½ åŠ å¿«äº†å®¢æˆ·ç«¯åŠ è½½ç½‘é¡µçš„é€Ÿåº¦ ä¸åŒåˆ·æ–°çš„è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ æµè§ˆå™¨åœ°å€æ å†™å…¥URLï¼Œå›è½¦ï¼Œæµè§ˆå™¨å‘ç°ç¼“å­˜ä¸­æœ‰è¿™ä¸ªæ–‡ä»¶äº†ï¼Œä¸ç”¨ç»§ç»­è¯·æ±‚äº†ï¼Œç›´æ¥å»ç¼“å­˜æ‹¿ã€‚ï¼ˆæœ€å¿«ï¼‰ F5åˆ·æ–°ï¼Œåˆ«å·æ‡’å¥½æ­¹å»æœåŠ¡å™¨çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦è¿‡æœŸäº†ã€‚äºæ˜¯æµè§ˆå™¨å°±åœ¨è¯·æ±‚ä¸Šå¸¦ä¸Šä¸€ä¸ªif-modify-sinceã€‚0 Ctrl+F5å‘Šè¯‰æµè§ˆå™¨ï¼Œä½ å…ˆæŠŠä½ ç¼“å­˜ä¸­çš„è¿™ä¸ªæ–‡ä»¶ç»™æˆ‘åˆ äº†ï¼Œç„¶åå†å»æœåŠ¡å™¨è¯·æ±‚ä¸ªå®Œæ•´çš„èµ„æºæ–‡ä»¶ä¸‹æ¥ã€‚äºæ˜¯å®¢æˆ·ç«¯å®Œæˆäº†å¼ºè¡Œæ›´æ–°çš„æ“ä½œã€‚]]></content>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[csså¸¸è§å¸ƒå±€]]></title>
    <url>%2F2020%2F03%2F24%2F2020%2F3%E6%9C%88%2F0324-01%2F</url>
    <content type="text"><![CDATA[åŒé£ç‡•å¸ƒå±€åœ£æ¯å¸ƒå±€1234567&lt;header&gt;åœ£æ¯å¸ƒå±€&lt;/header&gt;&lt;div class="bd"&gt; &lt;div class="main"&gt;main&lt;/div&gt; &lt;div class="left"&gt;left&lt;/div&gt; &lt;div class="right"&gt;right&lt;/div&gt;&lt;/div&gt;&lt;footer&gt;footer&lt;/footer&gt; flex]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸è§æ•°æ®ç»“æ„]]></title>
    <url>%2F2020%2F03%2F19%2F2020%2F3%E6%9C%88%2F0319-01%2F</url>
    <content type="text"><![CDATA[æ—¶é—´å¤æ‚åº¦é€šå¸¸ä½¿ç”¨æœ€å·®çš„æ—¶é—´å¤æ‚åº¦æ¥è¡¡é‡ä¸€ä¸ªç®—æ³•çš„å¥½åã€‚å¸¸æ•°æ—¶é—´O(1)ä»£è¡¨è¿™ä¸ªæ“ä½œå’Œæ•°æ®é‡æ²¡æœ‰å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªå›ºå®šæ—¶é—´çš„æ“ä½œï¼Œæ¯”å¦‚è¯´å››åˆ™è¿ç®—ã€‚ å¯¹äºä¸€ä¸ªç®—æ³•æ¥è¯´ï¼Œå¯èƒ½ä¼šè®¡ç®—å‡ºæ“ä½œæ¬¡æ•°ä¸º aN + 1ï¼ŒNä»£è¡¨æ•°æ®é‡ã€‚é‚£ä¹ˆè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N)ã€‚å› ä¸ºæˆ‘ä»¬åœ¨è®¡ç®—æ—¶é—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œæ•°æ®é‡é€šå¸¸æ˜¯éå¸¸å¤§çš„ï¼Œè¿™æ—¶å€™ä½é˜¶é¡¹å’Œå¸¸æ•°é¡¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ O(1) &lt; O(logn) &lt; O(n) &lt; O(nlogn) &lt; O(n^2) &lt; O(n^3) &lt; O(2^n) &lt; O(n!) &lt; O(n^n) æ ˆæ¦‚å¿µæ ˆæ˜¯ä¸€ä¸ªçº¿æ€§ç»“æ„ï¼Œåœ¨è®¡ç®—æœºä¸­æ˜¯ä¸€ä¸ªç›¸å½“å¸¸è§çš„æ•°æ®ç»“æ„ã€‚æ ˆçš„ç‰¹ç‚¹æ˜¯åªèƒ½åœ¨æŸä¸€ç«¯æ·»åŠ æˆ–åˆ é™¤æ•°æ®ï¼Œéµå¾ªå…ˆè¿›åå‡ºçš„åŸåˆ™ã€‚ å®ç°æ¯ç§æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å®ç°ï¼Œå…¶å®å¯ä»¥æŠŠæ ˆå½“åšä¸€ä¸ªæ•°ç»„çš„å­é›†ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨æ•°ç»„æ¥å®ç° 1234567891011121314151617181920class Stack &#123; constructor() &#123; this.stack = []; &#125; push(item) &#123; this.stack.push(item); &#125; pop() &#123; this.stack.pop(); &#125; getCount() &#123; return this.stack.length; &#125; peek() &#123; return this.stack[this.getCount - 1]; &#125; isEmpty() &#123; return this.getCount() === 0; &#125;&#125; åº”ç”¨åŒ¹é…æ‹¬å·ï¼Œå¯ä»¥é€šè¿‡æ ˆçš„ç‰¹æ€§æ¥å®Œæˆ 12345678910111213141516171819202122232425262728var isValid = function(s) &#123; let map = &#123; '(': -1, ')': 1, '[': -2, ']': 2, '&#123;': -3, '&#125;': 3, &#125;; let stack = []; for (let i of s) &#123; if (map[i] &lt; 0) &#123; stack.push(i); &#125; else &#123; let last = stack.pop(); if (map[last] + map[i] !== 0) &#123; return false; &#125; &#125; &#125; if (stack.length &gt; 0) &#123; return false; &#125; return true;&#125; é˜Ÿåˆ—æ¦‚å¿µé˜Ÿåˆ—æ˜¯ä¸€ä¸ªçº¿æ€§ç»“æ„ï¼Œç‰¹ç‚¹æ˜¯åœ¨æŸä¸€ç«¯æ·»åŠ æ•°æ®ï¼Œåœ¨å¦ä¸€ç«¯åˆ é™¤æ•°æ®ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ å®ç°å•é“¾é˜Ÿåˆ—å’Œå¾ªç¯é˜Ÿåˆ— å•é“¾é˜Ÿåˆ—1234567891011121314151617181920class Queue &#123; constructor() &#123; this.queue = []; &#125; enQueue(item) &#123; this.queue.push(item); &#125; deQueue() &#123; return this.queue.shift(); &#125; getHeader() &#123; return this.queue[0]; &#125; getLength() &#123; return this.queue.length; &#125; isEmpty() &#123; return this.queue.length === 0; &#125;&#125; å¾ªç¯é˜Ÿåˆ—é“¾è¡¨]]></content>
      <tags>
        <tag>è®¡ç®—æœºçŸ¥è¯†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€»ç»“]]></title>
    <url>%2F2020%2F03%2F17%2F2020%2F3%E6%9C%88%2F0317-01%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•å®ç°ä¸€ä¸ªbabelæ’ä»¶Babel æ˜¯ JavaScript ç¼–è¯‘å™¨ï¼Œæ›´ç¡®åˆ‡åœ°è¯´æ˜¯æºç åˆ°æºç çš„ç¼–è¯‘å™¨ï¼Œé€šå¸¸ä¹Ÿå«åšâ€œè½¬æ¢ç¼–è¯‘å™¨ï¼ˆtranspilerï¼‰â€ã€‚ æ„æ€æ˜¯è¯´ä½ ä¸º Babel æä¾›ä¸€äº› JavaScript ä»£ç ï¼ŒBabel æ›´æ”¹è¿™äº›ä»£ç ï¼Œç„¶åè¿”å›ç»™ä½ æ–°ç”Ÿæˆçš„ä»£ç ã€‚ æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰Babel çš„å¤„ç†æ­¥éª¤Babel çš„ä¸‰ä¸ªä¸»è¦å¤„ç†æ­¥éª¤åˆ†åˆ«æ˜¯ï¼š è§£æï¼ˆparseï¼‰ï¼Œè½¬æ¢ï¼ˆtransformï¼‰ï¼Œç”Ÿæˆï¼ˆgenerateï¼‰ã€‚ å¦‚ä½•å®ç°ä¸€ä¸ªwebpack-loader å¦‚ä½•å®ç°ä¸€ä¸ªwebpack-plugins å¦‚ä½•å®ç°ä¸€ä¸ªpromise12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970const PENDING = 'PENDING';const RESOLVED = 'RESOLVED';const REJECTED = 'REJECTED';function MyPromise(fn) &#123; const that = this; that.value = null; that.state = PENDING; that.resolvedCallbacks = []; that.rejectedCallbacks = []; function resolve(value) &#123; if (value instanceof MyPromise) &#123; return value.then(resolve, reject); &#125; if (that.state === PENDING) &#123; that.state = RESOLVED; that.value = value; that.resolvedCallbacks.map(cb =&gt; cb(that.value)); &#125; &#125; function reject(value) &#123; if (that.state === PENDING) &#123; that.state = REJECTED; that.value = value; that.rejectedCallbacks.map(cb =&gt; cb(that.value)); &#125; &#125; try &#123; fn(resolve, reject); &#125; catch(e) &#123; reject(e); &#125;&#125;MyPromise.prototype.then = function(onFulfilled, onRejected) &#123; const that = this; onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : v =&gt; v; onRejected = typeof onRejected === 'function' ? onRejected : r =&gt; &#123; throw r &#125;; if (that.state === PENDING) &#123; that.resolvedCallbacks.push(onFulfilled); that.rejectedCallbacks.push(onRejected); &#125; if (that.state === RESOLVED) &#123; onFulfilled(that.value); &#125; if (that.state === REJECTED) &#123; onRejected(that.value); &#125; return that;&#125;new MyPromise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(111); &#125;, 0);&#125;).then(value =&gt; &#123; console.log(value);&#125;).then(value =&gt; &#123; console.log(value);&#125;) nodeè°ƒè¯•ï¼Œé”™è¯¯ç›‘æ§ httpå’ŒhttpsåŒºåˆ«httpså°±æ˜¯httpå’ŒTCPä¹‹é—´æœ‰ä¸€å±‚SSLå±‚ï¼Œè¿™ä¸€å±‚çš„å®é™…ä½œç”¨æ˜¯é˜²æ­¢é’“é±¼å’ŒåŠ å¯†ã€‚é˜²æ­¢é’“é±¼é€šè¿‡ç½‘ç«™çš„è¯ä¹¦ï¼Œç½‘ç«™å¿…é¡»æœ‰CAè¯ä¹¦ï¼Œè¯ä¹¦ç±»ä¼¼äºä¸€ä¸ªè§£å¯†çš„ç­¾åã€‚å¦å¤–æ˜¯åŠ å¯†ï¼ŒåŠ å¯†éœ€è¦ä¸€ä¸ªå¯†é’¥äº¤æ¢ç®—æ³•ï¼ŒåŒæ–¹é€šè¿‡äº¤æ¢åçš„å¯†é’¥åŠ è§£å¯†ã€‚ httpsåè®®éœ€è¦åˆ°caç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹ã€‚ httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttps åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚ httpå’Œhttpsä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼Œåè€…æ˜¯443ã€‚ httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚ HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”httpåè®®å®‰å…¨ã€‚ ç™¾åº¦å’Œè°·æ­Œä¸¤å¤§æœç´¢å¼•æ“éƒ½å·²ç»æ˜ç¡®è¡¨ç¤ºï¼ŒHTTPSç½‘ç«™å°†ä¼šä½œä¸ºæœç´¢æ’åçš„ä¸€ä¸ªé‡è¦æƒé‡æŒ‡æ ‡ã€‚ä¹Ÿå°±æ˜¯è¯´HTTPSç½‘ç«™æ¯”èµ·HTTPç½‘ç«™åœ¨æœç´¢æ’åä¸­æ›´æœ‰ä¼˜åŠ¿ã€‚ reactï¼Œvueç”Ÿå‘½å‘¨æœŸvue brforeCreate create beforeMountd mounted beforeUpdate updated activated deactivated beforeDestroy destroy errorCaptured reactcalssç¼–ç¨‹ç”Ÿå‘½å‘¨æœŸ åˆå§‹é˜¶æ®µ constructor æŒ‚è½½é˜¶æ®µ componentWillMount render componentDidMount æ›´æ–°é˜¶æ®µ componentWillReceiveProps shouldComponentUpdate componentWillUpdate render componentDidUpdate å¸è½½é˜¶æ®µ componentWillUnmount åˆ°äº†React v16.3ï¼Œå¤§æ”¹åŠ¨æ¥äº†ï¼Œå¼•å…¥äº†ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š getDerivedStateFromPropsï¼ŒgetSnapshotBeforeUpdate static getDerivedStateFromProps(props, state) åœ¨ç»„ä»¶åˆ›å»ºæ—¶å’Œæ›´æ–°æ—¶çš„renderæ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–°çŠ¶æ€ï¼Œæˆ–è€…è¿”å›nullæ¥ä¸æ›´æ–°ä»»ä½•å†…å®¹ã€‚ getSnapshotBeforeUpdate() è¢«è°ƒç”¨äºrenderä¹‹åï¼Œå¯ä»¥è¯»å–ä½†æ— æ³•ä½¿ç”¨DOMçš„æ—¶å€™ã€‚å®ƒä½¿æ‚¨çš„ç»„ä»¶å¯ä»¥åœ¨å¯èƒ½æ›´æ”¹ä¹‹å‰ä»DOMæ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™componentDidUpdateï¼ˆï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132class ScrollingList extends React.Component &#123; constructor(props) &#123; super(props); this.listRef = React.createRef(); &#125; getSnapshotBeforeUpdate(prevProps, prevState) &#123; //æˆ‘ä»¬æ˜¯å¦è¦æ·»åŠ æ–°çš„ items åˆ°åˆ—è¡¨? // æ•æ‰æ»šåŠ¨ä½ç½®ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç¨åè°ƒæ•´æ»šåŠ¨. if (prevProps.list.length &lt; this.props.list.length) &#123; const list = this.listRef.current; return list.scrollHeight - list.scrollTop; &#125; return null; &#125; componentDidUpdate(prevProps, prevState, snapshot) &#123; //å¦‚æœæˆ‘ä»¬æœ‰snapshotå€¼, æˆ‘ä»¬å·²ç»æ·»åŠ äº† æ–°çš„items. // è°ƒæ•´æ»šåŠ¨ä»¥è‡³äºè¿™äº›æ–°çš„items ä¸ä¼šå°†æ—§itemsæ¨å‡ºè§†å›¾ã€‚ // (è¿™è¾¹çš„snapshotæ˜¯ getSnapshotBeforeUpdateæ–¹æ³•çš„è¿”å›å€¼) if (snapshot !== null) &#123; const list = this.listRef.current; list.scrollTop = list.scrollHeight - snapshot; &#125; &#125; render() &#123; return ( &lt;div ref=&#123;this.listRef&#125;&gt;&#123;/* ...contents... */&#125;&lt;/div&gt; ); &#125;&#125; reduxå’Œrematch webpackæ€§èƒ½ä¼˜åŒ–å‡å°‘webpackæ‰“åŒ…æ—¶é—´ ä¼˜åŒ– Loader å¯¹äº Loader æ¥è¯´ï¼Œå½±å“æ‰“åŒ…æ•ˆç‡é¦–å½“å…¶å†²å¿…å± Babel äº†ã€‚å› ä¸º Babel ä¼šå°†ä»£ç è½¬ä¸ºå­—ç¬¦ä¸²ç”Ÿæˆ ASTï¼Œç„¶åå¯¹ AST ç»§ç»­è¿›è¡Œè½¬å˜æœ€åå†ç”Ÿæˆæ–°çš„ä»£ç ï¼Œé¡¹ç›®è¶Šå¤§ï¼Œè½¬æ¢ä»£ç è¶Šå¤šï¼Œæ•ˆç‡å°±è¶Šä½ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬æ˜¯æœ‰åŠæ³•ä¼˜åŒ–çš„ã€‚ é¦–å…ˆæˆ‘ä»¬å¯ä»¥ä¼˜åŒ– Loader çš„æ–‡ä»¶æœç´¢èŒƒå›´ 123456789101112131415module.exports = &#123; module: &#123; rules: [ &#123; // js æ–‡ä»¶æ‰ä½¿ç”¨ babel test: /\.js$/, loader: 'babel-loader', // åªåœ¨ src æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾ include: [resolve('src')], // ä¸ä¼šå»æŸ¥æ‰¾çš„è·¯å¾„ exclude: /node_modules/ &#125; ] &#125;&#125; å¯¹äº Babel æ¥è¯´ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯å¸Œæœ›åªä½œç”¨åœ¨ JS ä»£ç ä¸Šçš„ï¼Œç„¶å node_modules ä¸­ä½¿ç”¨çš„ä»£ç éƒ½æ˜¯ç¼–è¯‘è¿‡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå®Œå…¨æ²¡æœ‰å¿…è¦å†å»å¤„ç†ä¸€éã€‚ å½“ç„¶è¿™æ ·åšè¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°† Babel ç¼–è¯‘è¿‡çš„æ–‡ä»¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡åªéœ€è¦ç¼–è¯‘æ›´æ”¹è¿‡çš„ä»£ç æ–‡ä»¶å³å¯ï¼Œè¿™æ ·å¯ä»¥å¤§å¹…åº¦åŠ å¿«æ‰“åŒ…æ—¶é—´ 1loader: 'babel-loader?cacheDirectory=true' HappyPack å—é™äº Node æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ Webpack åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å•çº¿ç¨‹çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œ Loader çš„æ—¶å€™ï¼Œé•¿æ—¶é—´ç¼–è¯‘çš„ä»»åŠ¡å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç­‰å¾…çš„æƒ…å†µã€‚HappyPack å¯ä»¥å°† Loader çš„åŒæ­¥æ‰§è¡Œè½¬æ¢ä¸ºå¹¶è¡Œçš„ï¼Œè¿™æ ·å°±èƒ½å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºæ¥åŠ å¿«æ‰“åŒ…æ•ˆç‡ 12345678910111213141516171819module: &#123; loaders: [ &#123; test: /\.js$/, include: [resolve('src')], exclude: /node_modules/, // id åé¢çš„å†…å®¹å¯¹åº”ä¸‹é¢ loader: 'happypack/loader?id=happybabel' &#125; ]&#125;,plugins: [ new HappyPack(&#123; id: 'happybabel', loaders: ['babel-loader?cacheDirectory'], // å¼€å¯ 4 ä¸ªçº¿ç¨‹ threads: 4 &#125;)] DllPlugin DllPlugin å¯ä»¥å°†ç‰¹å®šçš„ç±»åº“æå‰æ‰“åŒ…ç„¶åå¼•å…¥ã€‚è¿™ç§æ–¹å¼å¯ä»¥æå¤§çš„å‡å°‘æ‰“åŒ…ç±»åº“çš„æ¬¡æ•°ï¼Œåªæœ‰å½“ç±»åº“æ›´æ–°ç‰ˆæœ¬æ‰æœ‰éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä¸”ä¹Ÿå®ç°äº†å°†å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬æ–‡ä»¶çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚ å‡å°‘webpackæ‰“åŒ…åçš„ä½“ç§¯ æŒ‰éœ€åŠ è½½ æƒ³å¿…å¤§å®¶åœ¨å¼€å‘ SPA é¡¹ç›®çš„æ—¶å€™ï¼Œé¡¹ç›®ä¸­éƒ½ä¼šå­˜åœ¨åå‡ ç”šè‡³æ›´å¤šçš„è·¯ç”±é¡µé¢ã€‚å¦‚æœæˆ‘ä»¬å°†è¿™äº›é¡µé¢å…¨éƒ¨æ‰“åŒ…è¿›ä¸€ä¸ª JS æ–‡ä»¶çš„è¯ï¼Œè™½ç„¶å°†å¤šä¸ªè¯·æ±‚åˆå¹¶äº†ï¼Œä½†æ˜¯åŒæ ·ä¹ŸåŠ è½½äº†å¾ˆå¤šå¹¶ä¸éœ€è¦çš„ä»£ç ï¼Œè€—è´¹äº†æ›´é•¿çš„æ—¶é—´ã€‚é‚£ä¹ˆä¸ºäº†é¦–é¡µèƒ½æ›´å¿«åœ°å‘ˆç°ç»™ç”¨æˆ·ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯å¸Œæœ›é¦–é¡µèƒ½åŠ è½½çš„æ–‡ä»¶ä½“ç§¯è¶Šå°è¶Šå¥½ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æŒ‰éœ€åŠ è½½ï¼Œå°†æ¯ä¸ªè·¯ç”±é¡µé¢å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚å½“ç„¶ä¸ä»…ä»…è·¯ç”±å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œå¯¹äº loadash è¿™ç§å¤§å‹ç±»åº“åŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ ç›‘æ§å‰ç«¯ç›‘æ§ä¸€èˆ¬åˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºé¡µé¢åŸ‹ç‚¹ã€æ€§èƒ½ç›‘æ§ä»¥åŠå¼‚å¸¸ç›‘æ§ã€‚ é¡µé¢åŸ‹ç‚¹é¡µé¢åŸ‹ç‚¹åº”è¯¥æ˜¯å¤§å®¶æœ€å¸¸å†™çš„ç›‘æ§äº†ï¼Œä¸€èˆ¬èµ·ç ä¼šç›‘æ§ä»¥ä¸‹å‡ ä¸ªæ•°æ®ï¼š PV/UV åœç•™æ—¶é•¿ æµé‡æ¥æº ç”¨æˆ·äº¤äº’ å¯¹äºè¿™å‡ ç±»ç»Ÿè®¡ï¼Œä¸€èˆ¬çš„å®ç°æ€è·¯å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºæ‰‹å†™åŸ‹ç‚¹å’Œæ— åŸ‹ç‚¹çš„æ–¹å¼ã€‚ ç›¸ä¿¡ç¬¬ä¸€ç§æ–¹å¼ä¹Ÿæ˜¯å¤§å®¶æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå¯ä»¥è‡ªä¸»é€‰æ‹©éœ€è¦ç›‘æ§çš„æ•°æ®ç„¶ååœ¨ç›¸åº”çš„åœ°æ–¹å†™å…¥ä»£ç ã€‚è¿™ç§æ–¹å¼çš„çµæ´»æ€§å¾ˆå¤§ï¼Œä½†æ˜¯å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯å·¥ä½œé‡è¾ƒå¤§ï¼Œæ¯ä¸ªéœ€è¦ç›‘æ§çš„åœ°æ–¹éƒ½å¾—æ’å…¥ä»£ç ã€‚ å¦ä¸€ç§æ— åŸ‹ç‚¹çš„æ–¹å¼åŸºæœ¬ä¸éœ€è¦å¼€å‘è€…æ‰‹å†™åŸ‹ç‚¹äº†ï¼Œè€Œæ˜¯ç»Ÿè®¡æ‰€æœ‰çš„äº‹ä»¶å¹¶ä¸”å®šæ—¶ä¸ŠæŠ¥ã€‚è¿™ç§æ–¹å¼è™½ç„¶æ²¡æœ‰å‰ä¸€ç§æ–¹å¼ç¹çäº†ï¼Œä½†æ˜¯å› ä¸ºç»Ÿè®¡çš„æ˜¯æ‰€æœ‰äº‹ä»¶ï¼Œæ‰€ä»¥è¿˜éœ€è¦åæœŸè¿‡æ»¤å‡ºéœ€è¦çš„æ•°æ®ã€‚ æ€§èƒ½ç›‘æ§æ€§èƒ½ç›‘æ§å¯ä»¥å¾ˆå¥½çš„å¸®åŠ©å¼€å‘è€…äº†è§£åœ¨å„ç§çœŸå®ç¯å¢ƒä¸‹ï¼Œé¡µé¢çš„æ€§èƒ½æƒ…å†µæ˜¯å¦‚ä½•çš„ã€‚ å¯¹äºæ€§èƒ½ç›‘æ§æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦çš„ Performance API æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ å¯¹äºæ€§èƒ½ç›‘æ§æ¥è¯´ï¼Œå…¶å®æˆ‘ä»¬åªéœ€è¦è°ƒç”¨ performance.getEntriesByType(â€˜navigationâ€™) è¿™è¡Œä»£ç å°±è¡Œäº†ã€‚å¯¹ï¼Œä½ æ²¡çœ‹é”™ï¼Œä¸€è¡Œä»£ç æˆ‘ä»¬å°±å¯ä»¥è·å¾—é¡µé¢ä¸­å„ç§è¯¦ç»†çš„æ€§èƒ½ç›¸å…³ä¿¡æ¯ã€‚ å¼‚å¸¸ç›‘æ§å¯¹äºå¼‚å¸¸ç›‘æ§æ¥è¯´ï¼Œä»¥ä¸‹ä¸¤ç§ç›‘æ§æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œåˆ†åˆ«æ˜¯ä»£ç æŠ¥é”™ä»¥åŠæ¥å£å¼‚å¸¸ä¸ŠæŠ¥ å¯¹äºä»£ç è¿è¡Œé”™è¯¯ï¼Œé€šå¸¸çš„åŠæ³•æ˜¯ä½¿ç”¨window.onerroræ‹¦æˆªæŠ¥é”™ã€‚è¯¥æ–¹æ³•èƒ½æ‹¦æˆªåˆ°å¤§éƒ¨åˆ†çš„è¯¦ç»†æŠ¥é”™ä¿¡æ¯ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ã€‚ 12345678910111213/** * @param &#123;String&#125; msg é”™è¯¯ä¿¡æ¯ * @param &#123;String&#125; url å‡ºé”™æ–‡ä»¶ * @param &#123;Number&#125; row è¡Œå· * @param &#123;Number&#125; col åˆ—å· * @param &#123;Object&#125; error é”™è¯¯è¯¦ç»†ä¿¡æ¯ */window.onerror = function (msg, url, row, col, error) &#123; console.log(&#123; msg, url, row, col, error &#125;) return true; // æ³¨æ„ï¼Œåœ¨è¿”å› true çš„æ—¶å€™ï¼Œå¼‚å¸¸æ‰ä¸ä¼šç»§ç»­å‘ä¸ŠæŠ›å‡ºerror;&#125;; å¯¹äºè·¨åŸŸçš„ä»£ç è¿è¡Œé”™è¯¯ä¼šæ˜¾ç¤ºScript errorã€‚å¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦ç»™scriptæ ‡ç­¾æ·»åŠ crossoriginå±æ€§ å¯¹äºæŸäº›æµè§ˆå™¨å¯èƒ½ä¸ä¼šæ˜¾ç¤ºè°ƒç”¨æ ˆä¿¡æ¯ï¼Œè¿™ç§æƒ…å†µé€šè¿‡arguments.callee.calleræ¥åšæ ˆé€’å½’ã€‚ å¯¹äºå¼‚æ­¥ä»£ç æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨catchçš„æ–¹å¼æ•è·é”™è¯¯ã€‚æ¯”å¦‚Promiseå¯ä»¥ç›´æ¥ä½¿ç”¨catchå‡½æ•°ï¼Œawait asyncå¯ä»¥ä½¿ç”¨try catchã€‚ ä½†æ˜¯è¦æ³¨æ„çº¿ä¸Šè¿è¡Œçš„ä»£ç éƒ½æ˜¯å‹ç¼©è¿‡çš„ï¼Œéœ€è¦åœ¨æ‰“åŒ…æ—¶ç”ŸæˆsourceMapæ–‡ä»¶ä¾¿äºdebugã€‚ å¯¹äºæ•è·çš„é”™è¯¯éœ€è¦ä¸Šä¼ ç»™æœåŠ¡å™¨**å¯ä»¥é€šè¿‡ajaxå‘é€æ•°æ®è¿˜å¯ä»¥é€šè¿‡imgæ ‡ç­¾çš„srcå‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚ 1234function report(error) &#123; var report = 'https://xxx/report'; new Image().src = report + 'error=' + error;&#125; å¦å¤–æ¥å£å¼‚å¸¸å°±ç›¸å¯¹æ¥è¯´ç®€å•äº†ï¼Œå¯ä»¥åˆ—ä¸¾å‡ºå‡ºé”™çš„çŠ¶æ€ç ã€‚ä¸€æ—¦å‡ºç°æ­¤ç±»çš„çŠ¶æ€ç å°±å¯ä»¥ç«‹å³ä¸ŠæŠ¥å‡ºé”™ã€‚æ¥å£å¼‚å¸¸ä¸ŠæŠ¥å¯ä»¥è®©å¼€å‘äººå‘˜è¿…é€ŸçŸ¥é“æœ‰å“ªäº›æ¥å£å‡ºç°äº†å¤§é¢ç§¯çš„æŠ¥é”™ï¼Œä»¥ä¾¿è¿…é€Ÿä¿®å¤é—®é¢˜ã€‚ æ™®é€šå‡½æ•°è·Ÿç®­å¤´å‡½æ•°çš„åŒºåˆ« è¯­æ³•æ›´åŠ ç®€æ´ã€æ¸…æ™° ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„thisï¼Œå®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿this 12345678910111213var id = 'GLOBAL';var obj = &#123; id: 'OBJ', a: function()&#123; console.log(this.id); &#125;, b: () =&gt; &#123; console.log(this.id); &#125;&#125;;obj.a(); // 'OBJ'obj.b(); // 'GLOBAL' ç®­å¤´å‡½æ•°ç»§æ‰¿è€Œæ¥çš„thisæŒ‡å‘æ°¸è¿œä¸å˜ call/apply/bindæ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘ .call()/.apply()/.bind()æ–¹æ³•å¯ä»¥ç”¨æ¥åŠ¨æ€ä¿®æ”¹å‡½æ•°æ‰§è¡Œæ—¶thisçš„æŒ‡å‘ï¼Œä½†ç”±äºç®­å¤´å‡½æ•°çš„thiså®šä¹‰æ—¶å°±å·²ç»ç¡®å®šä¸”æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚æ‰€ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ°¸è¿œä¹Ÿæ”¹å˜ä¸äº†ç®­å¤´å‡½æ•°thisçš„æŒ‡å‘ï¼Œè™½ç„¶è¿™ä¹ˆåšä»£ç ä¸ä¼šæŠ¥é”™ã€‚ 1234567891011var id = 'Global';// ç®­å¤´å‡½æ•°å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸlet fun1 = () =&gt; &#123; console.log(this.id)&#125;;fun1(); // 'Global'// thisçš„æŒ‡å‘ä¸ä¼šæ”¹å˜ï¼Œæ°¸è¿œæŒ‡å‘Windowå¯¹è±¡fun1.call(&#123;id: 'Obj'&#125;); // 'Global'fun1.apply(&#123;id: 'Obj'&#125;); // 'Global'fun1.bind(&#123;id: 'Obj'&#125;)(); // 'Global' ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ å› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thiså…¶å®æ˜¯ç»§æ‰¿äº†å¤–å±‚æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œä¸”thisæŒ‡å‘æ°¸è¿œä¸ä¼šéšåœ¨å“ªé‡Œè°ƒç”¨ã€è¢«è°è°ƒç”¨è€Œæ”¹å˜ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œæˆ–è€…è¯´æ„é€ å‡½æ•°ä¸èƒ½å®šä¹‰æˆç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ç”¨newè°ƒç”¨æ—¶ä¼šæŠ¥é”™ï¼ 1234567let Fun = (name, age) =&gt; &#123; this.name = name; this.age = age;&#125;;// æŠ¥é”™let p = new Fun('cao', 24); ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„argumentsï¼Œåœ¨ç®­å¤´å‡½æ•°ä¸­è®¿é—®argumentså®é™…ä¸Šè·å¾—çš„æ˜¯å¤–å±‚å±€éƒ¨ï¼ˆå‡½æ•°ï¼‰æ‰§è¡Œç¯å¢ƒä¸­çš„å€¼ã€‚ 12345678910111213141516171819202122// ä¾‹å­ä¸€let fun = (val) =&gt; &#123; console.log(val); // 111 // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ // Uncaught ReferenceError: arguments is not defined // å› ä¸ºå¤–å±‚å…¨å±€ç¯å¢ƒæ²¡æœ‰argumentså¯¹è±¡ console.log(arguments);&#125;;fun(111);// ä¾‹å­äºŒfunction outer(val1, val2) &#123; let argOut = arguments; console.log(argOut); // [111, 222] let fun = () =&gt; &#123; let argIn = arguments; console.log(argIn); // // [111, 222] console.log(argOut === argIn); // true &#125;; fun();&#125;outer(111, 222); ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹prototype 1234let sayHi = () =&gt; &#123; console.log('Hello World !')&#125;;console.log(sayHi.prototype); // undefined æ‰‹å†™ä¸€ä¸ªwebpack æ‰‹å†™ä¸€ä¸ªwebpack]]></content>
      <tags>
        <tag>æ€»ç»“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jså®ç°æ·±æ‹·è´]]></title>
    <url>%2F2020%2F03%2F15%2F2020%2F3%E6%9C%88%2F0315-02%2F</url>
    <content type="text"><![CDATA[æ·±æµ…æ‹·è´æµ…æ‹·è´ Object.assign å±•å¼€è¿ç®—ç¬¦â€¦ Array.slice(); é¦–å…ˆå¯ä»¥é€šè¿‡ Object.assign æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šäººè®¤ä¸ºè¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ·±æ‹·è´çš„ã€‚å…¶å®å¹¶ä¸æ˜¯ï¼ŒObject.assign åªä¼šæ‹·è´æ‰€æœ‰çš„å±æ€§å€¼åˆ°æ–°çš„å¯¹è±¡ä¸­ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¯¹è±¡çš„è¯ï¼Œæ‹·è´çš„æ˜¯åœ°å€ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ·±æ‹·è´ã€‚ 123456let a = &#123; age: 1&#125;let b = Object.assign(&#123;&#125;, a)a.age = 2console.log(b.age) // 1 å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å±•å¼€è¿ç®—ç¬¦ â€¦ æ¥å®ç°æµ…æ‹·è´ 123456let a = &#123; age: 1&#125;let b = &#123; ...a &#125;a.age = 2console.log(b.age) // 1 é€šå¸¸æµ…æ‹·è´å°±èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜äº†ï¼Œä½†æ˜¯å½“æˆ‘ä»¬é‡åˆ°å¦‚ä¸‹æƒ…å†µå°±å¯èƒ½éœ€è¦ä½¿ç”¨åˆ°æ·±æ‹·è´äº† 123456789let a = &#123; age: 1, jobs: &#123; first: 'FE' &#125;&#125;let b = &#123; ...a &#125;a.jobs.first = 'native'console.log(b.jobs.first) // native æµ…æ‹·è´åªè§£å†³äº†ç¬¬ä¸€å±‚çš„é—®é¢˜ï¼Œå¦‚æœæ¥ä¸‹å»çš„å€¼ä¸­è¿˜æœ‰å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆå°±åˆå›åˆ°æœ€å¼€å§‹çš„è¯é¢˜äº†ï¼Œä¸¤è€…äº«æœ‰ç›¸åŒçš„åœ°å€ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¾—ä½¿ç”¨æ·±æ‹·è´äº†ã€‚ æ·±æ‹·è´è¿™ä¸ªé—®é¢˜é€šå¸¸å¯ä»¥é€šè¿‡ JSON.parse(JSON.stringify(object)) æ¥è§£å†³ã€‚ 123456789let a = &#123; age: 1, jobs: &#123; first: 'FE' &#125;&#125;let b = JSON.parse(JSON.stringify(a))a.jobs.first = 'native'console.log(b.jobs.first) // FE ä½†æ˜¯è¯¥æ–¹æ³•ä¹Ÿæ˜¯æœ‰å±€é™æ€§çš„ï¼š ä¼šå¿½ç•¥ undefined ä¼šå¿½ç•¥ symbol ä¸èƒ½åºåˆ—åŒ–å‡½æ•° ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ 1234567891011121314let obj = &#123; a: 1, b: &#123; c: 2, d: 3, &#125;,&#125;obj.c = obj.bobj.e = obj.aobj.b.c = obj.cobj.b.d = obj.bobj.b.e = obj.b.clet newObj = JSON.parse(JSON.stringify(obj))console.log(newObj) å¦‚æœä½ æœ‰è¿™ä¹ˆä¸€ä¸ªå¾ªç¯å¼•ç”¨å¯¹è±¡ï¼Œä½ ä¼šå‘ç°å¹¶ä¸èƒ½é€šè¿‡è¯¥æ–¹æ³•å®ç°æ·±æ‹·è´åœ¨é‡åˆ°å‡½æ•°ã€ undefined æˆ–è€… symbol çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä¹Ÿä¸èƒ½æ­£å¸¸çš„åºåˆ—åŒ– 12345678let a = &#123; age: undefined, sex: Symbol('male'), jobs: function() &#123;&#125;, name: 'yck'&#125;let b = JSON.parse(JSON.stringify(a))console.log(b) // &#123;name: "yck"&#125; ä½ ä¼šå‘ç°åœ¨ä¸Šè¿°æƒ…å†µä¸­ï¼Œè¯¥æ–¹æ³•ä¼šå¿½ç•¥æ‰å‡½æ•°å’Œ undefined ã€‚ ä½†æ˜¯åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤æ‚æ•°æ®éƒ½æ˜¯å¯ä»¥åºåˆ—åŒ–çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°å¯ä»¥è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚ å¦‚æœä½ æ‰€éœ€æ‹·è´çš„å¯¹è±¡å«æœ‰å†…ç½®ç±»å‹å¹¶ä¸”ä¸åŒ…å«å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ MessageChannel å½“ç„¶ä½ å¯èƒ½æƒ³è‡ªå·±æ¥å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Œä½†æ˜¯å…¶å®å®ç°ä¸€ä¸ªæ·±æ‹·è´æ˜¯å¾ˆå›°éš¾çš„ï¼Œéœ€è¦æˆ‘ä»¬è€ƒè™‘å¥½å¤šç§è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚åŸå‹é“¾å¦‚ä½•å¤„ç†ã€DOM å¦‚ä½•å¤„ç†ç­‰ç­‰ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å®ç°çš„æ·±æ‹·è´åªæ˜¯ç®€æ˜“ç‰ˆï¼Œå¹¶ä¸”æˆ‘å…¶å®æ›´æ¨èä½¿ç”¨ lodash çš„æ·±æ‹·è´å‡½æ•°ã€‚ 123456789101112131415161718function deepClone(obj) &#123; function isObject(o) &#123; return (typeof o === 'object' || typeof o === 'function') &amp;&amp; o !== null; &#125; if (!isObject(obj)) &#123; throw new Error('éå¯¹è±¡'); &#125; let isArray = Array.isArray(obj); let newObj = isArray ? [...obj] : &#123;...obj&#125;; Reflect.hasOwn(newObj).forEach(key =&gt; &#123; newObj[key] = isObject(obj[key]) ? deepClone(newObj[key]) : obj[key]; &#125;) return newObj;&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å®‰å…¨é—®é¢˜]]></title>
    <url>%2F2020%2F03%2F15%2F2020%2F3%E6%9C%88%2F0315-01%2F</url>
    <content type="text"><![CDATA[XSSXSS ç®€å•ç‚¹æ¥è¯´ï¼Œå°±æ˜¯æ”»å‡»è€…æƒ³å°½ä¸€åˆ‡åŠæ³•å°†å¯ä»¥æ‰§è¡Œçš„ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸­ã€‚XSS å¯ä»¥åˆ†ä¸ºå¤šç§ç±»å‹ï¼Œä½†æ˜¯æ€»ä½“ä¸Šæˆ‘è®¤ä¸ºåˆ†ä¸ºä¸¤ç±»ï¼šæŒä¹…å‹å’ŒéæŒä¹…å‹ã€‚ æŒä¹…å‹ä¹Ÿå°±æ˜¯æ”»å‡»çš„ä»£ç è¢«æœåŠ¡ç«¯å†™å…¥è¿›æ•°æ®åº“ä¸­ï¼Œè¿™ç§æ”»å‡»å±å®³æ€§å¾ˆå¤§ï¼Œå› ä¸ºå¦‚æœç½‘ç«™è®¿é—®é‡å¾ˆå¤§çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å¤§é‡æ­£å¸¸è®¿é—®é¡µé¢çš„ç”¨æˆ·éƒ½å—åˆ°æ”»å‡»ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºè¯„è®ºåŠŸèƒ½æ¥è¯´ï¼Œå°±å¾—é˜²èŒƒæŒä¹…å‹ XSS æ”»å‡»ï¼Œå› ä¸ºæˆ‘å¯ä»¥åœ¨è¯„è®ºä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ 1&lt;script&gt;alert(1);&lt;/script&gt; éæŒä¹…å‹ç›¸æ¯”äºå‰è€…å±å®³å°±å°çš„å¤šäº†ï¼Œä¸€èˆ¬é€šè¿‡ä¿®æ”¹ URL å‚æ•°çš„æ–¹å¼åŠ å…¥æ”»å‡»ä»£ç ï¼Œè¯±å¯¼ç”¨æˆ·è®¿é—®é“¾æ¥ä»è€Œè¿›è¡Œæ”»å‡»ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœé¡µé¢éœ€è¦ä» URL ä¸­è·å–æŸäº›å‚æ•°ä½œä¸ºå†…å®¹çš„è¯ï¼Œä¸ç»è¿‡è¿‡æ»¤å°±ä¼šå¯¼è‡´æ”»å‡»ä»£ç è¢«æ‰§è¡Œ 12&lt;!-- http://www.domain.com?name=&lt;script&gt;alert(1)&lt;/script&gt; --&gt;&lt;div&gt;&#123;&#123;name&#125;&#125;&lt;/div&gt; ä½†æ˜¯å¯¹äºè¿™ç§æ”»å‡»æ–¹å¼æ¥è¯´ï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨ Chrome è¿™ç±»æµè§ˆå™¨çš„è¯ï¼Œæµè§ˆå™¨å°±èƒ½è‡ªåŠ¨å¸®åŠ©ç”¨æˆ·é˜²å¾¡æ”»å‡»ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å› æ­¤å°±ä¸é˜²å¾¡æ­¤ç±»æ”»å‡»äº†ï¼Œå› ä¸ºæˆ‘ä¸èƒ½ç¡®ä¿ç”¨æˆ·éƒ½ä½¿ç”¨äº†è¯¥ç±»æµè§ˆå™¨ã€‚ å¯¹äº XSS æ”»å‡»æ¥è¯´ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”¨æ¥é˜²å¾¡ã€‚ è½¬ä¹‰å­—ç¬¦é¦–å…ˆï¼Œå¯¹äºç”¨æˆ·çš„è¾“å…¥åº”è¯¥æ˜¯æ°¸è¿œä¸ä¿¡ä»»çš„ã€‚æœ€æ™®éçš„åšæ³•å°±æ˜¯è½¬ä¹‰è¾“å…¥è¾“å‡ºçš„å†…å®¹ï¼Œå¯¹äºå¼•å·ã€å°–æ‹¬å·ã€æ–œæ è¿›è¡Œè½¬ä¹‰ 12345678910function escape(str) &#123; str = str.replace(/&amp;/g, '&amp;amp;') str = str.replace(/&lt;/g, '&amp;lt;') str = str.replace(/&gt;/g, '&amp;gt;') str = str.replace(/"/g, '&amp;quto;') str = str.replace(/'/g, '&amp;#39;') str = str.replace(/`/g, '&amp;#96;') str = str.replace(/\//g, '&amp;#x2F;') return str&#125; CSPCSP æœ¬è´¨ä¸Šå°±æ˜¯å»ºç«‹ç™½åå•ï¼Œå¼€å‘è€…æ˜ç¡®å‘Šè¯‰æµè§ˆå™¨å“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œã€‚æˆ‘ä»¬åªéœ€è¦é…ç½®è§„åˆ™ï¼Œå¦‚ä½•æ‹¦æˆªæ˜¯ç”±æµè§ˆå™¨è‡ªå·±å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å°½é‡å‡å°‘ XSS æ”»å‡»ã€‚ é€šå¸¸å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å¼€å¯ CSPï¼š è®¾ç½® HTTP Header ä¸­çš„ Content-Security-Policy è®¾ç½® meta æ ‡ç­¾çš„æ–¹å¼ CSRFCSRF ä¸­æ–‡åä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚åŸç†å°±æ˜¯æ”»å‡»è€…æ„é€ å‡ºä¸€ä¸ªåç«¯è¯·æ±‚åœ°å€ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»æˆ–è€…é€šè¿‡æŸäº›é€”å¾„è‡ªåŠ¨å‘èµ·è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·æ˜¯åœ¨ç™»å½•çŠ¶æ€ä¸‹çš„è¯ï¼Œåç«¯å°±ä»¥ä¸ºæ˜¯ç”¨æˆ·åœ¨æ“ä½œï¼Œä»è€Œè¿›è¡Œç›¸åº”çš„é€»è¾‘ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç½‘ç«™ä¸­æœ‰ä¸€ä¸ªé€šè¿‡ GET è¯·æ±‚æäº¤ç”¨æˆ·è¯„è®ºçš„æ¥å£ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥åœ¨é’“é±¼ç½‘ç«™ä¸­åŠ å…¥ä¸€ä¸ªå›¾ç‰‡ï¼Œå›¾ç‰‡çš„åœ°å€å°±æ˜¯è¯„è®ºæ¥å£ 1&lt;img src="http://www.domain.com/xxx?comment='attack'"/&gt; é‚£ä¹ˆä½ æ˜¯å¦ä¼šæƒ³åˆ°ä½¿ç”¨ POST æ–¹å¼æäº¤è¯·æ±‚æ˜¯ä¸æ˜¯å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†å‘¢ï¼Ÿå…¶å®å¹¶ä¸æ˜¯ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ä¹Ÿä¸æ˜¯ç™¾åˆ†ç™¾å®‰å…¨çš„ï¼Œæ”»å‡»è€…åŒæ ·å¯ä»¥è¯±å¯¼ç”¨æˆ·è¿›å…¥æŸä¸ªé¡µé¢ï¼Œåœ¨é¡µé¢ä¸­é€šè¿‡è¡¨å•æäº¤ POST è¯·æ±‚ã€‚ å¦‚ä½•é˜²å¾¡é˜²èŒƒ CSRF æ”»å‡»å¯ä»¥éµå¾ªä»¥ä¸‹å‡ ç§è§„åˆ™ï¼š Get è¯·æ±‚ä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ ä¸è®©ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®åˆ°ç”¨æˆ· Cookie é˜»æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚æ¥å£ è¯·æ±‚æ—¶é™„å¸¦éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚éªŒè¯ç æˆ–è€… Token SameSiteå¯ä»¥å¯¹ Cookie è®¾ç½® SameSite å±æ€§ã€‚è¯¥å±æ€§è¡¨ç¤º Cookie ä¸éšç€è·¨åŸŸè¯·æ±‚å‘é€ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦å‡å°‘ CSRF çš„æ”»å‡»ï¼Œä½†æ˜¯è¯¥å±æ€§ç›®å‰å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹ã€‚ éªŒè¯ Refererå¯¹äºéœ€è¦é˜²èŒƒ CSRF çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éªŒè¯ Referer æ¥åˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦ä¸ºç¬¬ä¸‰æ–¹ç½‘ç«™å‘èµ·çš„ã€‚ TokenæœåŠ¡å™¨ä¸‹å‘ä¸€ä¸ªéšæœº Tokenï¼Œæ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶å°† Token æºå¸¦ä¸Šï¼ŒæœåŠ¡å™¨éªŒè¯ Token æ˜¯å¦æœ‰æ•ˆã€‚ ç‚¹å‡»åŠ«æŒç‚¹å‡»åŠ«æŒæ˜¯ä¸€ç§è§†è§‰æ¬ºéª—çš„æ”»å‡»æ‰‹æ®µã€‚æ”»å‡»è€…å°†éœ€è¦æ”»å‡»çš„ç½‘ç«™é€šè¿‡ iframe åµŒå¥—çš„æ–¹å¼åµŒå…¥è‡ªå·±çš„ç½‘é¡µä¸­ï¼Œå¹¶å°† iframe è®¾ç½®ä¸ºé€æ˜ï¼Œåœ¨é¡µé¢ä¸­é€å‡ºä¸€ä¸ªæŒ‰é’®è¯±å¯¼ç”¨æˆ·ç‚¹å‡»ã€‚ å¯¹äºè¿™ç§æ”»å‡»æ–¹å¼ï¼Œæ¨èé˜²å¾¡çš„æ–¹æ³•æœ‰ä¸¤ç§ã€‚ X-FRAME-OPTIONSX-FRAME-OPTIONS æ˜¯ä¸€ä¸ª HTTP å“åº”å¤´ï¼Œåœ¨ç°ä»£æµè§ˆå™¨æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ”¯æŒã€‚è¿™ä¸ª HTTP å“åº”å¤´ å°±æ˜¯ä¸ºäº†é˜²å¾¡ç”¨ iframe åµŒå¥—çš„ç‚¹å‡»åŠ«æŒæ”»å‡»ã€‚ è¯¥å“åº”å¤´æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼Œåˆ†åˆ«æ˜¯ DENYï¼Œè¡¨ç¤ºé¡µé¢ä¸å…è®¸é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º SAMEORIGINï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨ç›¸åŒåŸŸåä¸‹é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º ALLOW-FROMï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨æŒ‡å®šæ¥æºçš„ iframe ä¸­å±•ç¤º JS é˜²å¾¡å¯¹äºæŸäº›è¿œå¤æµè§ˆå™¨æ¥è¯´ï¼Œå¹¶ä¸èƒ½æ”¯æŒä¸Šé¢çš„è¿™ç§æ–¹å¼ï¼Œé‚£æˆ‘ä»¬åªæœ‰é€šè¿‡ JS çš„æ–¹å¼æ¥é˜²å¾¡ç‚¹å‡»åŠ«æŒäº†ã€‚ 1234567891011121314151617&lt;head&gt; &lt;style id="click-jack"&gt; html &#123; display: none !important; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; if (self == top) &#123; var style = document.getElementById('click-jack') document.body.removeChild(style) &#125; else &#123; top.location = self.location &#125; &lt;/script&gt;&lt;/body&gt; ä»¥ä¸Šä»£ç çš„ä½œç”¨å°±æ˜¯å½“é€šè¿‡ iframe çš„æ–¹å¼åŠ è½½é¡µé¢æ—¶ï¼Œæ”»å‡»è€…çš„ç½‘é¡µç›´æ¥ä¸æ˜¾ç¤ºæ‰€æœ‰å†…å®¹äº†ã€‚ ä¸­é—´äººæ”»å‡»ä¸­é—´äººæ”»å‡»æ˜¯æ”»å‡»æ–¹åŒæ—¶ä¸æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å»ºç«‹èµ·äº†è¿æ¥ï¼Œå¹¶è®©å¯¹æ–¹è®¤ä¸ºè¿æ¥æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ•´ä¸ªé€šä¿¡è¿‡ç¨‹éƒ½è¢«æ”»å‡»è€…æ§åˆ¶äº†ã€‚æ”»å‡»è€…ä¸ä»…èƒ½è·å¾—åŒæ–¹çš„é€šä¿¡ä¿¡æ¯ï¼Œè¿˜èƒ½ä¿®æ”¹é€šä¿¡ä¿¡æ¯ã€‚ é€šå¸¸æ¥è¯´ä¸å»ºè®®ä½¿ç”¨å…¬å…±çš„ Wi-Fiï¼Œå› ä¸ºå¾ˆå¯èƒ½å°±ä¼šå‘ç”Ÿä¸­é—´äººæ”»å‡»çš„æƒ…å†µã€‚å¦‚æœä½ åœ¨é€šä¿¡çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°äº†æŸäº›æ•æ„Ÿä¿¡æ¯ï¼Œå°±å®Œå…¨æš´éœ²ç»™æ”»å‡»æ–¹äº†ã€‚ å½“ç„¶é˜²å¾¡ä¸­é—´äººæ”»å‡»å…¶å®å¹¶ä¸éš¾ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªå®‰å…¨é€šé“æ¥ä¼ è¾“ä¿¡æ¯ã€‚HTTPS å°±å¯ä»¥ç”¨æ¥é˜²å¾¡ä¸­é—´äººæ”»å‡»ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯è¯´ä½¿ç”¨äº† HTTPS å°±å¯ä»¥é«˜æ•æ— å¿§äº†ï¼Œå› ä¸ºå¦‚æœä½ æ²¡æœ‰å®Œå…¨å…³é—­ HTTP è®¿é—®çš„è¯ï¼Œæ”»å‡»æ–¹å¯ä»¥é€šè¿‡æŸäº›æ–¹å¼å°† HTTPS é™çº§ä¸º HTTP ä»è€Œå®ç°ä¸­é—´äººæ”»å‡»ã€‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSæ•°æ®ç±»å‹]]></title>
    <url>%2F2020%2F03%2F13%2F2020%2F3%E6%9C%88%2F0313-01%2F</url>
    <content type="text"><![CDATA[åŸå§‹(Primitive)ç±»å‹åœ¨JSä¸­ï¼Œå­˜åœ¨6ç§åŸå§‹å€¼ï¼Œåˆ†åˆ«æ˜¯ï¼š number string boolean null undefined symbol bigInt é¦–å…ˆåŸå§‹ç±»å‹å­˜å‚¨çš„éƒ½æ˜¯å€¼ï¼Œæ˜¯æ²¡æœ‰å‡½æ•°å¯ä»¥è°ƒç”¨çš„ï¼Œæ¯”å¦‚undefined.toString() æ­¤æ—¶ä½ è‚¯å®šä¼šæœ‰ç–‘é—®ï¼Œè¿™ä¸å¯¹å•Šï¼Œæ˜æ˜â€™1â€™.toString()æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚å…¶å®åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€™1â€™å·²ç»ä¸æ˜¯åŸå§‹ç±»å‹äº†ï¼Œè€Œæ˜¯è¢«å¼ºåˆ¶è½¬æ¢æˆäº†Stringç±»å‹ä¹Ÿå°±æ˜¯å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨tostringå‡½æ•°ã€‚ å¦å¤–å¯¹äºnullæ¥è¯´ï¼Œå¾ˆå¤šäººä¼šè®¤ä¸ºå®ƒæ˜¯ä¸ªå¯¹è±¡ç±»å‹ï¼Œå…¶å®è¿™æ˜¯é”™çš„ã€‚è™½ç„¶typeof nullä¼šè¾“å‡ºobjectï¼Œä½†æ˜¯è¿™æ˜¯JSå­˜åœ¨çš„ä¸€ä¸ªå†å²bugã€‚åœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ000 å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º objectã€‚è™½ç„¶ç°åœ¨çš„å†…éƒ¨ç±»å‹åˆ¤æ–­ä»£ç å·²ç»æ”¹å˜äº†ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ª Bug å´æ˜¯ä¸€ç›´æµä¼ ä¸‹æ¥ã€‚ å¯¹è±¡ç±»å‹åœ¨JSä¸­ï¼Œé™¤äº†åŸå§‹ç±»å‹å°±æ˜¯å¯¹è±¡ç±»å‹äº†ã€‚å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒçš„æ˜¯ï¼ŒåŸå§‹ç±»å‹å­˜å‚¨çš„æ˜¯å€¼ï¼Œå¯¹è±¡ç±»å‹å­˜å‚¨çš„åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¼šåœ¨å†…å­˜ä¸­å¸®æˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªç©ºé—´æ¥å­˜æ”¾å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´ä¼šæ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚ ç±»å‹è½¬æ¢é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œåœ¨ JS ä¸­ç±»å‹è½¬æ¢åªæœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ï¼š è½¬æ¢ä¸ºå¸ƒå°”å€¼ è½¬æ¢ä¸ºæ•°å­— è½¬æ¢ä¸ºå­—ç¬¦ä¸² è½¬Booleanåœ¨æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œé™¤äº† undefinedï¼Œ nullï¼Œ falseï¼Œ NaNï¼Œ â€˜â€™ï¼Œ 0ï¼Œ -0ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬ä¸º trueï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡ã€‚ å¯¹è±¡è½¬åŸå§‹ç±»å‹å¯¹è±¡åœ¨è½¬æ¢ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å†…ç½®çš„ [[ToPrimitive]] å‡½æ•°ï¼Œå¯¹äºè¯¥å‡½æ•°æ¥è¯´ï¼Œç®—æ³•é€»è¾‘ä¸€èˆ¬æ¥è¯´å¦‚ä¸‹ï¼š å¦‚æœæ˜¯åŸå§‹ç±»å‹ï¼Œé‚£å°±ä¸éœ€è¦è½¬æ¢ å¦‚æœéœ€è¦è½¬å­—ç¬¦ä¸²ç±»å‹é‚£å°±è°ƒç”¨x.toString()ï¼Œè½¬æ¢ä¸ºåŸºç¡€ç±»å‹çš„è¯å°±ä¼šè¿”å›è½¬æ¢çš„å€¼ã€‚ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„è¯å°±å…ˆè°ƒç”¨valueOfï¼Œå¦‚æœä¸æ˜¯åŸºç¡€ç±»å‹çš„è¯åœ¨è°ƒç”¨toStringã€‚ è°ƒç”¨x.valueOf()ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸºç¡€ç±»å‹ï¼Œå°±è¿”å›åŸºç¡€ç±»å‹ã€‚ å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥é‡å†™ Symbol.toPrimitiveï¼Œè¯¥æ–¹æ³•åœ¨è½¬åŸå§‹ç±»å‹æ—¶è°ƒç”¨ä¼˜å…ˆçº§æœ€é«˜ã€‚ 123456789101112let a = &#123; valueOf() &#123; return 0; &#125;, toString() &#123; return '1'; &#125; [Symbol.toPrimitive]() &#123; return 2; &#125;&#125;console.log(1 + a); // 3 å¦‚ä½•å®ç° a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3è¿”å›true 1234567var a = &#123; value: 1, toString() &#123; return a.value++ &#125;&#125;a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 æ¯”è¾ƒè¿ç®—ç¬¦ å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±é€šè¿‡ toPrimitive è½¬æˆåŸå§‹ç±»å‹ å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°±é€šè¿‡ unicode å­—ç¬¦ç´¢å¼•æ¥æ¯”è¾ƒ 123456789let a = &#123; valueOf() &#123; return 0; &#125;, toString() &#123; return '1' &#125;&#125;a &gt; -1; // true]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCP]]></title>
    <url>%2F2020%2F03%2F11%2F2020%2F3%E6%9C%88%2F0311-02%2F</url>
    <content type="text"><![CDATA[TCPä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼ŒTransmission Control Protocolï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚TCP åŸºæœ¬æ˜¯å’Œ UDP åç€æ¥ï¼Œå»ºç«‹è¿æ¥æ–­å¼€è¿æ¥éƒ½éœ€è¦å…ˆéœ€è¦è¿›è¡Œæ¡æ‰‹ã€‚åœ¨ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å„ç§ç®—æ³•ä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œå½“ç„¶å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ç›¸æ¯” UDP æ¥è¯´ä¸é‚£ä¹ˆçš„é«˜æ•ˆã€‚ ä¸‰æ¬¡æ¡æ‰‹é¦–å…ˆå‡è®¾ä¸»åŠ¨å‘èµ·è¯·æ±‚çš„ä¸€ç«¯ç§°ä¸ºå®¢æˆ·ç«¯ï¼Œè¢«åŠ¨è¿æ¥çš„ä¸€ç«¯ç§°ä¸ºæœåŠ¡ç«¯ã€‚ä¸ç®¡æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼ŒTCP è¿æ¥å»ºç«‹å®Œåéƒ½èƒ½å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œæ‰€ä»¥ TCP æ˜¯ä¸€ä¸ªå…¨åŒå·¥çš„åè®®ã€‚èµ·åˆï¼Œä¸¤ç«¯éƒ½ä¸º CLOSED çŠ¶æ€ã€‚åœ¨é€šä¿¡å¼€å§‹å‰ï¼ŒåŒæ–¹éƒ½ä¼šåˆ›å»º TCBã€‚ æœåŠ¡å™¨åˆ›å»ºå®Œ TCB åä¾¿è¿›å…¥ LISTEN çŠ¶æ€ï¼Œæ­¤æ—¶å¼€å§‹ç­‰å¾…å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚è¯¥æŠ¥æ–‡æ®µä¸­åŒ…å«è‡ªèº«çš„æ•°æ®é€šè®¯åˆå§‹åºå·ã€‚è¯·æ±‚å‘é€åï¼Œå®¢æˆ·ç«¯ä¾¿è¿›å…¥ SYN-SENT çŠ¶æ€ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ æœåŠ¡ç«¯æ”¶åˆ°è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå¦‚æœåŒæ„è¿æ¥ï¼Œåˆ™ä¼šå‘é€ä¸€ä¸ªåº”ç­”ï¼Œè¯¥åº”ç­”ä¸­ä¹Ÿä¼šåŒ…å«è‡ªèº«çš„æ•°æ®é€šè®¯åˆå§‹åºå·ï¼Œå‘é€å®Œæˆåä¾¿è¿›å…¥ SYN-RECEIVED çŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å½“å®¢æˆ·ç«¯æ”¶åˆ°è¿æ¥åŒæ„çš„åº”ç­”åï¼Œè¿˜è¦å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯å‘å®Œè¿™ä¸ªæŠ¥æ–‡æ®µåä¾¿è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¿™ä¸ªåº”ç­”åä¹Ÿè¿›å…¥ ESTABLISHED çŠ¶æ€ï¼Œæ­¤æ—¶è¿æ¥å»ºç«‹æˆåŠŸã€‚ å››æ¬¡æŒ¥æ‰‹TCP æ˜¯å…¨åŒå·¥çš„ï¼Œåœ¨æ–­å¼€è¿æ¥æ—¶ä¸¤ç«¯éƒ½éœ€è¦å‘é€ FIN å’Œ ACKã€‚ ç¬¬ä¸€æ¬¡ï¼š å½“ä¸»æœºAå®Œæˆæ•°æ®ä¼ è¾“å,å°†æ§åˆ¶ä½FINç½®1ï¼Œæå‡ºåœæ­¢TCPè¿æ¥çš„è¯·æ±‚ ï¼› ç¬¬äºŒæ¬¡ï¼š ä¸»æœºBæ”¶åˆ°FINåå¯¹å…¶ä½œå‡ºå“åº”ï¼Œç¡®è®¤è¿™ä¸€æ–¹å‘ä¸Šçš„TCPè¿æ¥å°†å…³é—­,å°†ACKç½®1ï¼› ç¬¬ä¸‰æ¬¡ï¼š ç”±B ç«¯å†æå‡ºåæ–¹å‘çš„å…³é—­è¯·æ±‚,å°†FINç½®1 ï¼› ç¬¬å››æ¬¡ï¼š ä¸»æœºAå¯¹ä¸»æœºBçš„è¯·æ±‚è¿›è¡Œç¡®è®¤ï¼Œå°†ACKç½®1ï¼ŒåŒæ–¹å‘çš„å…³é—­ç»“æŸã€‚ åè¯è§£é‡Š1ã€ACK æ˜¯TCPæŠ¥å¤´çš„æ§åˆ¶ä½ä¹‹ä¸€ï¼Œå¯¹æ•°æ®è¿›è¡Œç¡®è®¤ã€‚ç¡®è®¤ç”±ç›®çš„ç«¯å‘å‡ºï¼Œ ç”¨å®ƒæ¥å‘Šè¯‰å‘é€ç«¯è¿™ä¸ªåºåˆ—å·ä¹‹å‰çš„æ•°æ®æ®µéƒ½æ”¶åˆ°äº†ã€‚ æ¯”å¦‚ç¡®è®¤å·ä¸ºXï¼Œåˆ™è¡¨ç¤ºå‰X-1ä¸ªæ•°æ®æ®µéƒ½æ”¶åˆ°äº†ï¼Œåªæœ‰å½“ACK=1æ—¶,ç¡®è®¤å·æ‰æœ‰æ•ˆï¼Œå½“ACK=0æ—¶ï¼Œç¡®è®¤å·æ— æ•ˆï¼Œè¿™æ—¶ä¼šè¦æ±‚é‡ä¼ æ•°æ®ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ 2ã€SYN åŒæ­¥åºåˆ—å·ï¼ŒTCPå»ºç«‹è¿æ¥æ—¶å°†è¿™ä¸ªä½ç½®1ã€‚ 3ã€FIN å‘é€ç«¯å®Œæˆå‘é€ä»»åŠ¡ä½ï¼Œå½“TCPå®Œæˆæ•°æ®ä¼ è¾“éœ€è¦æ–­å¼€æ—¶ï¼Œ æå‡ºæ–­å¼€è¿æ¥çš„ä¸€æ–¹å°†è¿™ä½ç½®1ã€‚ å°ç»“TCPä¸UDPçš„åŒºåˆ«ï¼š1.ï¼ˆåŸºäºè¿æ¥vsæ— è¿æ¥ï¼‰tcpæ˜¯é¢å‘è¿æ¥çš„ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼›å››æ¬¡æŒ¥æ‰‹ï¼‰ï¼›udpä¸æ˜¯é¢å‘è¿æ¥çš„2.ï¼ˆé‡é‡çº§vsè½»é‡çº§ï¼‰tcpæ˜¯ä¸€ä¸ªé‡é‡çº§çš„åè®®ï¼›udpåˆ™æ˜¯è½»é‡çº§çš„åè®®ã€‚ä¸€ä¸ªtcpæ•°æ®æŠ¥çš„æŠ¥å¤´å¤§å°æœ€å°‘20å­—èŠ‚ï¼Œudpæ•°æ®æŠ¥çš„åŒ…å¤´å›ºå®š8ä¸ªå­—èŠ‚3.ï¼ˆå¯é æ€§ï¼‰tcpäº¤ä»˜ä¿è¯ï¼šå¦‚æœæ¶ˆæ¯åœ¨ä¼ è¾“ä¸­ä¸¢å¤±ï¼Œé‚£ä¹ˆå®ƒå°†é‡å‘ï¼›udpæ²¡æœ‰äº¤ä»˜ä¿è¯ï¼Œä¸€ä¸ªæ•°æ®åŒ…åœ¨è¿è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¸¢å¤±ã€‚4.ï¼ˆæœ‰åºæ€§ï¼‰æ¶ˆæ¯åˆ°è¾¾ç½‘ç»œçš„å¦ä¸€ç«¯å¯èƒ½æ˜¯æ— åºçš„ï¼Œtcpåè®®å°†ä¸ºä½ æ‹å¥½åºã€‚Udpä¸æä¾›ä»»ä½•æœ‰åºæ€§çš„ä¿è¯ã€‚5.ï¼ˆé€Ÿåº¦ï¼‰tcpæ…¢ï¼Œé€‚åˆä¼ è¾“å¤§é‡æ•°æ®ï¼›udpå¿«ï¼Œé€‚åˆä¼ è¾“å°‘é‡æ•°æ®ã€‚6.ï¼ˆæµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼‰TCPæœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œudpæ²¡æœ‰ã€‚ tcpé¢å‘å­—èŠ‚æµï¼Œudpé¢å‘æŠ¥æ–‡ tcpåªèƒ½å•æ’­ï¼Œä¸èƒ½å‘é€å¹¿æ’­å’Œç»„æ’­ï¼›udpå¯ä»¥å¹¿æ’­å’Œç»„æ’­ã€‚ æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼š æµé‡æ§åˆ¶ï¼šå°±æ˜¯è®©å‘é€æ–¹å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥çš„åŠæ¥æ”¶ã€‚ æ‹¥å¡æ§åˆ¶ï¼šé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚æ‹¥å¡æ§åˆ¶æ‰€è¦åšçš„éƒ½æœ‰ä¸€ä¸ªå‰æï¼šç½‘ç»œèƒ½å¤Ÿæ‰¿å—ç°æœ‰çš„ç½‘ç»œè´Ÿè·ã€‚æ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°æ‰€æœ‰çš„ä¸»æœºã€è·¯ç”±å™¨ï¼Œä»¥åŠä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚]]></content>
      <tags>
        <tag>ç½‘ç»œåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UDP]]></title>
    <url>%2F2020%2F03%2F11%2F2020%2F3%E6%9C%88%2F0311-01%2F</url>
    <content type="text"><![CDATA[UDPUDPåè®®æ˜¯é¢å‘æ— è¿æ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦åœ¨æ­£å¼ä¼ é€’æ•°æ®ä¹‹å‰å…ˆè¿æ¥èµ·åŒæ–¹ã€‚ç„¶åUDPåè®®åªæ˜¯æ•°æ®æŠ¥æ–‡çš„æ¬è¿å·¥ï¼Œä¸ä¿è¯æœ‰åºä¸”ä¸ä¸¢å¤±çš„ä¼ é€’åˆ°å¯¹ç«¯ï¼Œå¹¶ä¸”UDPåè®®ä¹Ÿæ²¡æœ‰ä»»ä½•æ§åˆ¶æµé‡çš„ç®—æ³•ï¼Œæ€»çš„æ¥è¯´UDPç›¸è¾ƒäºTCPæ›´åŠ çš„è½»ä¾¿ã€‚ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨â€œpingâ€å‘½ä»¤æ¥æµ‹è¯•ä¸¤å°ä¸»æœºä¹‹é—´TCP/IPé€šä¿¡æ˜¯å¦æ­£å¸¸ï¼Œ å…¶å®â€œpingâ€å‘½ä»¤çš„åŸç†å°±æ˜¯å‘å¯¹æ–¹ä¸»æœºå‘é€UDPæ•°æ®åŒ…ï¼Œç„¶åå¯¹æ–¹ä¸»æœºç¡®è®¤æ”¶åˆ°æ•°æ®åŒ…ï¼Œ å¦‚æœæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾çš„æ¶ˆæ¯åŠæ—¶åé¦ˆå›æ¥ï¼Œé‚£ä¹ˆç½‘ç»œå°±æ˜¯é€šçš„ã€‚ é¢å‘æ— è¿æ¥UDPæ˜¯ä¸éœ€è¦å’ŒTCPä¸€æ ·åœ¨å‘é€æ•°æ®å‰è¿›è¡Œ3æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥çš„ï¼Œæƒ³å‘æ•°æ®å°±å¯ä»¥å‘é€äº†ã€‚å¹¶ä¸”ä¹Ÿåªæ˜¯æ•°æ®æŠ¥æ–‡çš„æ¬è¿å·¥ï¼Œä¸ä¼šå¯¹æ•°æ®æŠ¥æ–‡è¿›è¡Œä»»ä½•æ‹†åˆ†å’Œæ‹¼æ¥æ“ä½œã€‚ å…·ä½“æ¥è¯´ï¼š åœ¨å‘é€ç«¯ï¼Œåº”ç”¨å±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚çš„UDPåè®®ï¼ŒUDPåªä¼šç»™æ•°æ®å¢åŠ ä¸€ä¸ªUDPå¤´æ ‡è¯†ä¸‹æ˜¯UDPåè®®ï¼Œç„¶åå°±ä¼ é€’ç»™ç½‘ç»œå±‚ åœ¨æ¥æ”¶ç«¯ï¼Œç½‘ç»œå±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚ï¼ŒUDPåªå»é™¤IPæŠ¥æ–‡å¤´å°±ä¼ é€’ç»™åº”ç”¨å±‚ï¼Œä¸ä¼šä»»ä½•æ‹¼æ¥æ“ä½œ ä¸å¯é æ€§é¦–å…ˆä¸å¯é æ€§ä½“ç°åœ¨æ— è¿æ¥ä¸Šï¼Œé€šä¿¡éƒ½ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œæƒ³å‘å°±å‘ï¼Œè¿™æ ·çš„æƒ…å†µè‚¯å®šä¸å¯é ã€‚å¹¶ä¸”æ”¶åˆ°ä»€ä¹ˆæ•°æ®å°±ä¼ é€’ä»€ä¹ˆæ•°æ®ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šå¤‡ä»½æ•°æ®ï¼Œå‘é€æ•°æ®ä¹Ÿä¸ä¼šå…³å¿ƒå¯¹æ–¹æ˜¯å¦å·²ç»æ­£ç¡®æ¥æ”¶åˆ°æ•°æ®äº†ã€‚å†è€…ç½‘ç»œç¯å¢ƒæ—¶å¥½æ—¶åï¼Œä½†æ˜¯ UDP å› ä¸ºæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œä¸€ç›´ä¼šä»¥æ’å®šçš„é€Ÿåº¦å‘é€æ•°æ®ã€‚å³ä½¿ç½‘ç»œæ¡ä»¶ä¸å¥½ï¼Œä¹Ÿä¸ä¼šå¯¹å‘é€é€Ÿç‡è¿›è¡Œè°ƒæ•´ã€‚è¿™æ ·å®ç°çš„å¼Šç«¯å°±æ˜¯åœ¨ç½‘ç»œæ¡ä»¶ä¸å¥½çš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä¸¢åŒ…ï¼Œä½†æ˜¯ä¼˜ç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œåœ¨æŸäº›å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆæ¯”å¦‚ç”µè¯ä¼šè®®ï¼‰å°±éœ€è¦ä½¿ç”¨ UDP è€Œä¸æ˜¯ TCPã€‚ é«˜æ•ˆè™½ç„¶ UDP åè®®ä¸æ˜¯é‚£ä¹ˆçš„å¯é ï¼Œä½†æ˜¯æ­£æ˜¯å› ä¸ºå®ƒä¸æ˜¯é‚£ä¹ˆçš„å¯é ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ TCP é‚£ä¹ˆå¤æ‚äº†ï¼Œéœ€è¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸”æœ‰åºåˆ°è¾¾ã€‚å› æ­¤ UDP çš„å¤´éƒ¨å¼€é”€å°ï¼Œåªæœ‰å…«å­—èŠ‚ï¼Œç›¸æ¯” TCP çš„è‡³å°‘äºŒåå­—èŠ‚è¦å°‘å¾—å¤šï¼Œåœ¨ä¼ è¾“æ•°æ®æŠ¥æ–‡æ—¶æ˜¯å¾ˆé«˜æ•ˆçš„ã€‚ ä¼ è¾“æ–¹å¼UDP ä¸æ­¢æ”¯æŒä¸€å¯¹ä¸€çš„ä¼ è¾“æ–¹å¼ï¼ŒåŒæ ·æ”¯æŒä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼Œå¤šå¯¹ä¸€çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ UDP æä¾›äº†å•æ’­ï¼Œå¤šæ’­ï¼Œå¹¿æ’­çš„åŠŸèƒ½ã€‚ é€‚åˆä½¿ç”¨çš„åœºæ™¯ ç›´æ’­ æƒ³å¿…å¤§å®¶éƒ½çœ‹è¿‡ç›´æ’­å§ï¼Œå¤§å®¶å¯ä»¥è€ƒè™‘ä¸‹å¦‚æœç›´æ’­ä½¿ç”¨äº†åŸºäº TCP çš„åè®®ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Ÿ TCP ä¼šä¸¥æ ¼æ§åˆ¶ä¼ è¾“çš„æ­£ç¡®æ€§ï¼Œä¸€æ—¦æœ‰æŸä¸€ä¸ªæ•°æ®å¯¹ç«¯æ²¡æœ‰æ”¶åˆ°ï¼Œå°±ä¼šåœæ­¢ä¸‹æ¥ç›´åˆ°å¯¹ç«¯æ”¶åˆ°è¿™ä¸ªæ•°æ®ã€‚è¿™ç§é—®é¢˜åœ¨ç½‘ç»œæ¡ä»¶ä¸é”™çš„æƒ…å†µä¸‹å¯èƒ½å¹¶ä¸ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Œä½†æ˜¯åœ¨ç½‘ç»œæƒ…å†µå·®çš„æ—¶å€™å°±ä¼šå˜æˆç”»é¢å¡ä½ï¼Œç„¶åå†ç»§ç»­æ’­æ”¾ä¸‹ä¸€å¸§çš„æƒ…å†µã€‚ ä½†æ˜¯å¯¹äºç›´æ’­æ¥è¯´ï¼Œç”¨æˆ·è‚¯å®šå…³æ³¨çš„æ˜¯æœ€æ–°çš„ç”»é¢ï¼Œè€Œä¸æ˜¯å› ä¸ºç½‘ç»œæ¡ä»¶å·®è€Œä¸¢å¤±çš„è€æ—§ç”»é¢ï¼Œæ‰€ä»¥ TCP åœ¨è¿™ç§æƒ…å†µä¸‹æ— ç”¨æ­¦ä¹‹åœ°ï¼Œåªä¼šé™ä½ç”¨æˆ·ä½“éªŒã€‚ ç‹è€…è£è€€ ä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿé¦–å…ˆå¯¹äºç‹è€…è£è€€æ¥è¯´ï¼Œç”¨æˆ·ä½“é‡æ˜¯ç›¸å½“å¤§çš„ï¼Œå¦‚æœä½¿ç”¨ TCP è¿æ¥çš„è¯ï¼Œå°±å¯èƒ½ä¼šå‡ºç°æœåŠ¡å™¨ä¸å¤Ÿç”¨çš„æƒ…å†µï¼Œå› ä¸ºæ¯å°æœåŠ¡å™¨å¯ä¾›æ”¯æ’‘çš„ TCP è¿æ¥æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ã€‚ å†è€…ï¼Œå› ä¸º TCP ä¼šä¸¥æ ¼æ§åˆ¶ä¼ è¾“çš„æ­£ç¡®æ€§ï¼Œå¦‚æœå› ä¸ºç”¨æˆ·ç½‘ç»œæ¡ä»¶ä¸å¥½å°±é€ æˆé¡µé¢å¡é¡¿ç„¶åå†ä¼ è¾“æ—§çš„æ¸¸æˆç”»é¢æ˜¯è‚¯å®šä¸èƒ½æ¥å—çš„ï¼Œæ¯•ç«Ÿå¯¹äºè¿™ç±»å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„æ¸¸æˆæ¥è¯´ï¼Œæœ€æ–°çš„æ¸¸æˆç”»é¢æ‰æ˜¯æœ€éœ€è¦çš„ï¼Œè€Œä¸æ˜¯è€æ—§çš„ç”»é¢ï¼Œå¦åˆ™è§’è‰²éƒ½ä¸çŸ¥é“æ­»å¤šå°‘æ¬¡äº†ã€‚ æ€»ç»“ UDP ç›¸æ¯” TCP ç®€å•çš„å¤šï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œä¸éœ€è¦éªŒè¯æ•°æ®æŠ¥æ–‡ï¼Œä¸éœ€è¦æµé‡æ§åˆ¶ï¼Œåªä¼šæŠŠæƒ³å‘çš„æ•°æ®æŠ¥æ–‡ä¸€è‚¡è„‘çš„ä¸¢ç»™å¯¹ç«¯ è™½ç„¶ UDP å¹¶æ²¡æœ‰ TCP ä¼ è¾“æ¥çš„å‡†ç¡®ï¼Œä½†æ˜¯ä¹Ÿèƒ½åœ¨å¾ˆå¤šå®æ—¶æ€§è¦æ±‚é«˜çš„åœ°æ–¹æœ‰æ‰€ä½œä¸º]]></content>
      <tags>
        <tag>ç½‘ç»œåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢ç»]]></title>
    <url>%2F2020%2F03%2F10%2F2020%2F3%E6%9C%88%2F0310-01%2F</url>
    <content type="text"><![CDATA[è¯´è¯´ä½ å¯¹JSæ¨¡å—åŒ–çš„ç†è§£æ¨¡å—åŒ–å°±æ˜¯å°†ä¸€ä¸ªå¤§çš„åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªå—ï¼Œæ¯ä¸€ä¸ªå—éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä½ ä¸éœ€è¦å»æ‹…å¿ƒæ±¡æŸ“å…¨å±€å˜é‡ï¼Œå‘½åå†²çªä»€ä¹ˆçš„ã€‚ é‚£ä¹ˆæ¨¡å—åŒ–çš„å¥½å¤„ä¹Ÿå°±æ˜¾ç„¶æ˜“è§äº† è§£å†³å‘½åå†²çª ä¾èµ–ç®¡ç† ä»£ç æ›´åŠ å¯è¯» æé«˜å¤ç”¨æ€§ jsè®¾è®¡ä¹‹åˆå¹¶æ²¡æœ‰æ¨¡å—åŒ–çš„æ¦‚å¿µï¼Œæ‰€ä»¥åŸå§‹æ—¶ä»£åªèƒ½é€šè¿‡è‡ªæ‰§è¡Œå‡½æ•°æ¥è®¾è®¡æ¨¡å—åŒ– 123456789101112131415var myModule = (function(window) &#123; // private var moduleName = 'module'; // public function setModuleName(name) &#123; moduleName = name; &#125;; // public function getModuleName() &#123; return moduleName; &#125;; return &#123;setModuleName, getModuleName&#125;;&#125;)(window); å®ƒé€šè¿‡é—­åŒ…çš„ç‰¹æ€§æ‰“å¼€äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œç¼“è§£äº†å…¨å±€ä½œç”¨åŸŸå‘½åå†²çªå’Œå®‰å…¨æ€§çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¼€å‘è€…å¹¶ä¸èƒ½å¤Ÿç”¨å®ƒæ¥ç»„ç»‡å’Œæ‹†åˆ†ä»£ç ï¼Œäºæ˜¯ä¹ä¾¿å‡ºç°äº†ä»¥æ­¤ä¸ºåŸºçŸ³çš„æ¨¡å—åŒ–è§„èŒƒã€‚ 1. CommonJsè§„èŒƒï¼ˆåŒæ­¥åŠ è½½æ¨¡å—ï¼‰ å…è®¸æ¨¡å—é€šè¿‡requireçš„æ–¹æ³•æ¥åŒæ­¥åŠ è½½æ‰€è¦ä¾èµ–çš„å…¶ä»–æ¨¡å—ï¼Œç„¶åé€šè¿‡exportsæˆ–module.exportsæ¥å¯¼å‡ºéœ€è¦æš´éœ²çš„æ¥å£ 123456789101112// a.jsmodule.exports = &#123; a: 1,&#125;;// orexports.a = 1;// b.jsvar module = require('./a.js');module.a = 1;// requireå‡½æ•°åŒæ­¥åŠ è½½äº†a.jsï¼Œå¹¶ä¸”è¿”å›äº†module.exportsè¾“å‡ºå­—é¢é‡çš„æ‹·è´å€¼ã€‚ ä¼˜ç‚¹ï¼š ç®€å•å®¹æ˜“ä½¿ç”¨ æœåŠ¡å™¨ç«¯æ¨¡å—ä¾¿äºå¤ç”¨ ç¼ºç‚¹ï¼š åŒæ­¥åŠ è½½çš„æ–¹å¼ä¸é€‚åˆåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼ŒåŒæ­¥æ„å‘³ç€é˜»å¡åŠ è½½ï¼Œæµè§ˆå™¨èµ„æºæ˜¯å¼‚æ­¥åŠ è½½ ä¸èƒ½éé˜»å¡çš„å¹¶è¡ŒåŠ è½½å¤šä¸ªæ¨¡å— 2. AMDï¼ˆå¼‚æ­¥åŠ è½½æ¨¡å—ï¼‰åŒºåˆ«äºCommonJSï¼ŒAMDè§„èŒƒçš„è¢«ä¾èµ–æ¨¡å—æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œè€Œå®šä¹‰çš„æ¨¡å—æ˜¯è¢«å½“ä½œå›è°ƒå‡½æ•°æ¥æ‰§è¡Œçš„ï¼Œä¾èµ–äºrequire.jsæ¨¡å—ç®¡ç†å·¥å…·åº“ã€‚ 1234define(['./a', './b'], function(a, b) &#123; a.do(); b.do();&#125;) 3. CMDï¼ˆå¼‚æ­¥åŠ è½½æ¨¡å—ï¼‰CMD æ˜¯ SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼ŒCMD æ¨å´‡ä¾èµ–å°±è¿‘ã€‚ 123456789101112define(function(require, exports, module) &#123; var a = require('./a'); a.doSomething(); // å¼‚æ­¥åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨åŠ è½½å®Œæˆæ—¶ï¼Œæ‰§è¡Œå›è°ƒ require.async(['./b'], function(b) &#123; b.doSomething(); &#125;); // å¯¹å¤–æš´éœ²æˆå‘˜ exports.doSomething = function() &#123;&#125;;&#125;)// ä½¿ç”¨æ¨¡å—seajs.use('path'); 4. ES6 moduleES6çš„æ¨¡å—åŒ–å·²ç»ä¸æ˜¯è§„èŒƒäº†ï¼Œè€Œæ˜¯JSè¯­è¨€çš„ç‰¹æ€§ã€‚ 12345// å¼•å…¥çš„è¯­æ³•å°±è¿™æ · importï¼ŒXXX è¿™é‡Œæœ‰å¾ˆå¤šè¯­æ³•å˜åŒ–import XXX from './a.js'// å¯¼å‡ºä¹Ÿæœ‰å¾ˆå¤šè¯­æ³•å˜åŒ–çš„å†™æ³•ï¼ŒåŸºæœ¬çš„å°±è¿™ä¸¤ä¸ªï¼Œåæ­£è¯­æ³•æ²¡ä»€ä¹ˆéš¾å¾—export function a() &#123;&#125;export default function() &#123;&#125; éšç€ES6çš„æ¨å‡ºï¼ŒAMDå’ŒCMDä¹Ÿéšä¹‹æˆä¸ºäº†å†å²ã€‚ES6æ¨¡å—ä¸æ¨¡å—åŒ–è§„èŒƒç›¸æ¯”ï¼Œæœ‰ä¸¤å¤§ç‰¹ç‚¹ï¼š æ¨¡å—åŒ–è§„èŒƒè¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ æ¨¡å—åŒ–è§„èŒƒæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚ commonJs 123456789101112131415var count = 1;function add() &#123; count++;&#125;module.exports = &#123; count, add,&#125;var v = require('./common');console.log(v.count); // 1v.add();console.log(v.count); // 1 ES6 123456789101112131415var count = 1;function add() &#123; count++;&#125;export default &#123; count, add&#125;import v from './common';console.log(v.count); // 1v.add();console.log(v.count); // 2 å¦‚ä½•ç†è§£åŸå‹ï¼Ÿå¦‚ä½•ç†è§£åŸå‹é“¾ï¼Ÿ prototypeè¿™æ˜¯ä¸€ä¸ªæ˜¾å¼åŸå‹å±æ€§ï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰åŸå‹ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤– 1let fun = Function.prototype.bind(); å¦‚æœä½ å·²ä¸Šè¿°æ–¹æ³•åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å‘ç°è¿™ä¸ªå‡½æ•°ä¸å…·æœ‰prototypeå±æ€§ã€‚ prototype å¦‚ä½•äº§ç”Ÿçš„å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¿™ä¸ªå±æ€§å°±è¢«è‡ªåŠ¨åˆ›å»ºäº† 1function Foo() &#123;&#125; å¹¶ä¸”è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯åŸå‹ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªå±æ€§constructor constructorconstructor æ˜¯ä¸€ä¸ªå…¬æœ‰ä¸”ä¸å¯æšä¸¾çš„å±æ€§ã€‚ä¸€æ—¦æˆ‘ä»¬æ”¹å˜äº†å‡½æ•°çš„prototypeï¼Œé‚£ä¹ˆæ–°å¯¹è±¡å°±æ²¡æœ‰è¿™ä¸ªå±æ€§äº†ï¼ˆå½“ç„¶å¯ä»¥é€šè¿‡åŸå‹é“¾å–åˆ°constructorï¼‰ __proto__è¿™æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„éšå¼åŸå‹å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ã€‚å…¶å®è¿™ä¸ªå±æ€§æŒ‡å‘äº† [[prototype]]ï¼Œä½†æ˜¯ [[prototype]] æ˜¯å†…éƒ¨å±æ€§ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è®¿é—®åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨ __proto__ æ¥è®¿é—®ã€‚ **å®ä¾‹å¯¹è±¡çš„ __proto__ å¦‚ä½•äº§ç”Ÿçš„ å½“æˆ‘ä»¬ä½¿ç”¨ new æ“ä½œç¬¦æ—¶ï¼Œç”Ÿæˆçš„å®ä¾‹å¯¹è±¡æ‹¥æœ‰äº† protoå±æ€§ã€‚ 1function Foo() &#123;&#125; // è¿™ä¸ªå‡½æ•°æ˜¯ Functionçš„å®ä¾‹å¯¹è±¡ 1234567891011// çº¯å¯¹è±¡çš„åŸå‹console.log(&#123;&#125;.__proto__); // &#123;&#125;function Student(name) &#123; this.name = name;&#125;const stu = new Student('wang');// Student ç±»å‹å®ä¾‹çš„åŸå‹ï¼Œé»˜è®¤ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡console.log(stu.__proto__); // &#123; constructor: f &#125;console.log(stu.__proto__.constructor); // Student(name, age) &#123; this.name = name &#125; newåšäº†ä»€ä¹ˆï¼Œnewçš„æ¨¡æ‹Ÿå®ç° åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ è¿™ä¸ªå¯¹è±¡ä¼šè¢«æ‰§è¡Œ[[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯protoï¼‰é“¾æ¥ã€‚ ç”Ÿæˆçš„æ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisã€‚ é€šè¿‡newåˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢«[[Prototype]]é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„prototypeå¯¹è±¡ä¸Šã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹Object(åŒ…å«Functoin, Array, Date, RegExg, Error)ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°çš„å¯¹è±¡ã€‚ 1234567891011121314151617/** * æ¨¡æ‹Ÿå®ç° new æ“ä½œç¬¦ * @param &#123;Function&#125; ctor [æ„é€ å‡½æ•°] * @return &#123;Object|Function|Regex|Date|Error&#125; [è¿”å›ç»“æœ] */function create() &#123; // åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡ let obj = new Object() // è·å¾—æ„é€ å‡½æ•° let Con = [].shift.call(arguments) // é“¾æ¥åˆ°åŸå‹ obj.__proto__ = Con.prototype // ç»‘å®š thisï¼Œæ‰§è¡Œæ„é€ å‡½æ•° let result = Con.apply(obj, arguments) // ç¡®ä¿ new å‡ºæ¥çš„æ˜¯ä¸ªå¯¹è±¡ return typeof result === 'object' ? result : obj&#125; è°ˆè°ˆå°ç¨‹åºçš„ç™»å½•æˆæƒ1.è°ƒç”¨ wx.login() è·å– ä¸´æ—¶ç™»å½•å‡­è¯code ï¼Œå¹¶å›ä¼ åˆ°å¼€å‘è€…æœåŠ¡å™¨ã€‚ 2.è°ƒç”¨ code2Session æ¥å£ï¼Œæ¢å– ç”¨æˆ·å”¯ä¸€æ ‡è¯† OpenID å’Œ ä¼šè¯å¯†é’¥ session_keyã€‚ vueçš„å‡ ç§ä¼ å‚æ–¹å¼ props vuex $parent $children provide-inject â€¦é¡¹ç›®ç›¸å…³]]></content>
      <tags>
        <tag>é¢ç»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å®ç°ajax]]></title>
    <url>%2F2020%2F03%2F10%2F2020%2F3%E6%9C%88%2F0310%2F</url>
    <content type="text"><![CDATA[ajax ajaxæ˜¯å¼‚æ­¥çš„JavaScriptå’ŒXMLã€‚ajaxæ˜¯ä¸€ç§é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼Œåœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ å¦‚ä½•å®ç°ajax åˆ›å»ºXMLHttpRequestå®ä¾‹ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªXMLHttpRequestå¯¹è±¡å¾—åˆ°ä¸€ä¸ªå®ä¾‹ï¼Œè°ƒç”¨å®ä¾‹çš„open()æ–¹æ³•ä¸ºè¿™æ¬¡ajaxè¯·æ±‚è®¾å®šç›¸åº”çš„HTTPæ–¹æ³•ï¼Œç›¸åº”çš„åœ°å€ä»¥åŠæ˜¯å¦å¼‚æ­¥ã€‚ å‘é€httpè¯·æ±‚ã€‚è°ƒç”¨spen()æ–¹æ³•å‘é€è¯·æ±‚ï¼Œå…¶å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ—¢è¦ä½œä¸ºè¯·æ±‚ä¸»ä½“æ‰€å‘é€çš„æ•°æ®ã€‚ æ¥æ”¶æœåŠ¡å™¨ç›¸åº”æ•°æ®ã€‚ç›‘å¬readystatechangeäº‹ä»¶ï¼Œé€šè¿‡è¯¥å®ä¾‹çš„readystateå±æ€§æ¥åˆ¤æ–­è¯·æ±‚çŠ¶æ€ï¼Œå…¶åˆ†ä¸º0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4äº”ç§çŠ¶æ€ å±æ€§ æè¿° onreadystatechange å­˜å‚¨å‡½æ•°ï¼ˆæˆ–å‡½æ•°åï¼‰ï¼Œæ¯å½“ readyState å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚ readyState å­˜æœ‰XMLHttpRequestçš„çŠ¶æ€ã€‚ä»0åˆ°4å‘ç”Ÿå˜åŒ–ã€‚ 0: è¯·æ±‚æœªåˆå§‹åŒ– 1: å·²å»ºç«‹è¿æ¥ 2: è¯·æ±‚å·²æ¥æ”¶ 3: è¯·æ±‚å¤„ç†ä¸­ * 4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª status 200: â€œOKâ€404: æœªæ‰¾åˆ°é¡µé¢ 1234567891011121314var xhr;if (window.XMLHttpRequest) &#123; xhr = new XMLHttpRequest();&#125; else &#123; xhr = new ActiveXObject('Microsoft.XMLHTTP');&#125;xhr.onreadystatechange(function() &#123; if (xhr.redayState === 4 &amp;&amp; xhr.status === 200) &#123; console.log(xhr.responseText); console.log(xhr.responseXml); &#125;&#125;)xhr.open('GET', 'www.xxxx.com/xxx/xxx', true);xhr.send(null);]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒè®¢é˜…æ¨¡å¼]]></title>
    <url>%2F2020%2F03%2F06%2F2020%2F3%E6%9C%88%2F0306%2F</url>
    <content type="text"><![CDATA[è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ç›®æ ‡å¯¹è±¡Subjectçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡ObServeéƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚ æ¨¡å¼ç‰¹å¾ï¼š ä¸€ä¸ªç›®æ ‡è€…å¯¹è±¡Subjectï¼Œæ‹¥æœ‰æ–¹æ³•ï¼šæ·»åŠ /åˆ é™¤/é€šçŸ¥ObServerï¼› å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡ObServeï¼Œæ‹¥æœ‰æ–¹æ³•ï¼šæ¥æ”¶SubjectçŠ¶æ€å˜æ›´é€šçŸ¥å¹¶å¤„ç†ï¼› ç›®æ ‡å¯¹è±¡SubjectçŠ¶æ€å˜æ›´æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰ObServerã€‚ Subjectæ·»åŠ ä¸€ç³»åˆ—ObServerï¼ŒSubjectè´Ÿè´£ç»´æŠ¤ä¸è¿™äº›ObServeä¹‹é—´çš„è”ç³»ï¼Œ ä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445class Subject &#123; constructor() &#123; this.observers = []; // è§‚å¯Ÿè€…åˆ—è¡¨ &#125; // æ·»åŠ  add(observer) &#123; this.observers.push(observer); &#125; // åˆ é™¤ remove(observer) &#123; let idx = this.observers.findIndex(item =&gt; item === observer); idx &gt; -1 &amp;&amp; this.observers.splice(idx, 1); &#125;, // é€šçŸ¥ notify() &#123; for (let observer of observers) &#123; observer.update(); &#125; &#125;&#125;class ObServer &#123; constructor(name) &#123; this.name = name; &#125; update() &#123; console.log(`æ”¶åˆ°é€šçŸ¥ï¼š$&#123;this.name&#125;`); &#125;&#125;// å®ä¾‹åŒ–ç›®æ ‡è€…let subject = new Subject();// å®ä¾‹åŒ–ä¸¤ä¸ªè§‚å¯Ÿè€…let obs1 = new ObServer('å‰ç«¯å¼€å‘è€…');let obs2 = new ObServer('åç«¯å¼€å‘è€…');// å‘ç›®æ ‡è€…æ·»åŠ è§‚å¯Ÿè€…subject.add(obs1);subject.add(obs2);// ç›®æ ‡è€…é€šçŸ¥æ›´æ–°subject.notify();// è¾“å‡ºï¼š// æ”¶åˆ°é€šçŸ¥ï¼šå‰ç«¯å¼€å‘è€…// æ”¶åˆ°é€šçŸ¥ï¼šåç«¯å¼€å‘è€… ä¼˜åŠ¿ï¼šç›®æ ‡è€…ä¸è§‚å¯Ÿè€…ï¼ŒåŠŸèƒ½è€¦åˆåº¦é™ä½ï¼Œä¸“æ³¨è‡ªèº«åŠŸèƒ½é€»è¾‘ï¼›è§‚å¯Ÿè€…è¢«åŠ¨æ¥æ”¶æ›´æ–°ï¼Œæ—¶é—´ä¸Šè§£è€¦ï¼Œå®æ—¶æ¥æ”¶ç›®æ ‡è€…æ›´æ–°çŠ¶æ€ã€‚ç¼ºç‚¹ï¼šè§‚å¯Ÿè€…æ¨¡å¼è™½ç„¶å®ç°äº†å¯¹è±¡é—´ä¾èµ–å…³ç³»çš„ä½è€¦åˆï¼Œä½†å´ä¸èƒ½å¯¹äº‹ä»¶é€šçŸ¥è¿›è¡Œç»†åˆ†ç®¡æ§ï¼Œå¦‚â€ç­›é€‰é€šçŸ¥â€œï¼Œâ€æŒ‡å®šä¸»é¢˜äº‹ä»¶é€šçŸ¥â€œã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼å‘å¸ƒè®¢é˜…æ¨¡å¼åŸºäºä¸€ä¸ªäº‹ä»¶ï¼ˆä¸»é¢˜ï¼‰é€šé“ï¼Œå¸Œæœ›æ¥æ”¶é€šçŸ¥çš„å¯¹è±¡Subscriberé€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è®¢é˜…ä¸»é¢˜ï¼Œè¢«æ¿€æ´»äº‹ä»¶çš„å¯¹è±¡Publisheré€šè¿‡å‘å¸ƒä¸»é¢˜äº‹ä»¶çš„æ–¹å¼é€šçŸ¥å„ä¸ªè®¢é˜…è¯¥ä¸»é¢˜çš„subscriberå¯¹è±¡ã€‚ ä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445// äº‹ä»¶ä¸­å¿ƒlet pubSub = &#123; list: &#123;&#125;, // è®¢é˜… subscribe: function(key, fn) &#123; if (!this.list[key]) &#123; this.list[key] = []; &#125; this.list[key].push(fn); &#125;, // å‘å¸ƒ publish: function(key, ...arg) &#123; for (let fn of this.list[key]) &#123; fn.call(this, ...arg); &#125; &#125;, // å–æ¶ˆè®¢é˜… unSubscribe: function(key, fn) &#123; let fnList = this.list[key]; if (!fnList) return false; if (!fn) &#123; // ä¸ä¼ å…¥æŒ‡å®šå–æ¶ˆçš„è®¢é˜…æ–¹æ³•ï¼Œåˆ™æ¸…ç©ºæ‰€æœ‰keyä¸‹çš„è®¢é˜… fnList &amp;&amp; (fnList.length === 0); &#125; else &#123; fnList.forEach((item, index) =&gt; &#123; if (item === fn) &#123; fnList.splice(index, 1); &#125; &#125;) &#125; &#125;&#125;// è®¢é˜…pubSub.subscribe('onwork', time =&gt; &#123; console.log(`ä¸Šç­äº†ï¼š$&#123;time&#125;`);&#125;)pubSub.subscribe('offwork', time =&gt; &#123; console.log(`ä¸‹ç­äº†ï¼š$&#123;time&#125;`);&#125;)// å‘å¸ƒpubSub.publish('onwork', '9:00:00');pubSub.publish('offwork', '18:00:00');// å–æ¶ˆè®¢é˜…pubSub.unSubscribe('onwork'); å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œè®¢é˜…è€…å„è‡ªå®ç°ä¸åŒçš„é€»è¾‘ï¼Œä¸”åªæ¥å—è‡ªå·±å¯¹åº”çš„äº‹ä»¶é€šçŸ¥ã€‚å®ç°ä½ æƒ³è¦çš„ â€œä¸ä¸€æ ·â€ã€‚ DOM äº‹ä»¶ç›‘å¬ä¹Ÿæ˜¯ â€œå‘å¸ƒè®¢é˜…æ¨¡å¼â€ çš„åº”ç”¨ï¼š 1234567891011121314let loginBtn = document.getElementById('#loginBtn');// ç›‘å¬å›è°ƒå‡½æ•°ï¼ˆæŒ‡å®šäº‹ä»¶ï¼‰function notifyClick() &#123; console.log('ç‚¹å‡»');&#125;// æ·»åŠ äº‹ä»¶ç›‘å¬loginBtn.addEventListener('click', notifyClick);// è§¦å‘ç‚¹å‡»ï¼Œäº‹ä»¶ä¸­å¿ƒæ´¾å‘æŒ‡å®šäº‹ä»¶loginBtn.click();// å–æ¶ˆäº‹ä»¶ç›‘å¬loginBtn.removeEventListener('click', notifyClick); å‘å¸ƒè®¢é˜…çš„é€šçŸ¥é¡ºåºï¼š å…ˆè®¢é˜…åå‘å¸ƒæ—¶æ‰é€šçŸ¥ï¼ˆå¸¸è§„ï¼‰ è®¢é˜…åå¯è·å–è¿‡å¾€ä»¥åçš„å‘å¸ƒé€šçŸ¥ ï¼ˆQQç¦»çº¿æ¶ˆæ¯ï¼Œä¸Šçº¿åè·å–ä¹‹å‰çš„ä¿¡æ¯ï¼‰ æµè¡Œåº“çš„åº”ç”¨ jQuery çš„ on å’Œ triggerï¼Œ$.callback(); Vue çš„åŒå‘æ•°æ®ç»‘å®šï¼› Vue çš„çˆ¶å­ç»„ä»¶é€šä¿¡ $on/$emit]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯babel?]]></title>
    <url>%2F2020%2F03%2F02%2F2020%2F3%E6%9C%88%2F0302%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯babel?å®˜æ–¹çš„è§£é‡Š Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œç”¨äºå°† ECMAScript 2015+ ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­ã€‚ç®€å•æ¥è¯´ Babel çš„å·¥ä½œå°±æ˜¯ï¼š è¯­æ³•è½¬æ¢ é€šè¿‡Polyfillçš„æ–¹å¼åœ¨ç›®æ ‡ç¯å¢ƒä¸­æ·»åŠ ç¼ºå¤±çš„ç‰¹æ€§ JSæºç è½¬æ¢ babelçš„åŸºæœ¬åŸç†åŸç†å¾ˆç®€å•ï¼Œæ ¸å¿ƒå°±æ˜¯ AST (æŠ½è±¡è¯­æ³•æ ‘)ã€‚é¦–å…ˆå°†æºç è½¬æˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åå¯¹è¯­æ³•æ ‘è¿›è¡Œå¤„ç†ç”Ÿæˆæ–°çš„è¯­æ³•æ ‘ï¼Œæœ€åå°†æ–°è¯­æ³•æ ‘ç”Ÿæˆæ–°çš„ JS ä»£ç ï¼Œæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹å¯ä»¥åˆ†ä¸º 3 ä¸ªé˜¶æ®µ parsing (è§£æ)ã€transforming (è½¬æ¢)ã€generating (ç”Ÿæˆ)ï¼Œéƒ½æ˜¯åœ¨å›´ç»•ç€ AST å»åšæ–‡ç« ï¼Œè¯ä¸å¤šè¯´ä¸Šå›¾ï¼š Babel åªè´Ÿè´£ç¼–è¯‘æ–°æ ‡å‡†å¼•å…¥çš„æ–°è¯­æ³•ï¼Œæ¯”å¦‚ Arrow functionã€Classã€ES Module ç­‰ï¼Œå®ƒä¸ä¼šç¼–è¯‘åŸç”Ÿå¯¹è±¡æ–°å¼•å…¥çš„æ–¹æ³•å’Œ APIï¼Œæ¯”å¦‚ Array.includesï¼ŒMapï¼ŒSet ç­‰ï¼Œè¿™äº›éœ€è¦é€šè¿‡ Polyfill æ¥è§£å†³ babelçš„ä½¿ç”¨è¿è¡Œbabelæ‰€éœ€çš„åŸºæœ¬ç¯å¢ƒ babel/cli babel/core é…ç½®babel babel.config.js .babelrc babelrc.js package.json å››ç§é…ç½®æ–¹å¼ä½œç”¨éƒ½ä¸€æ ·ï¼Œä½ å°±åˆç€è‡ªå·±çš„å£å‘³æ¥ï¼Œé‚£ç§çœ‹ç€é¡ºçœ¼ï¼Œä½ å°±ç¿»å®ƒã€‚ æ’ä»¶(Plugins)æ’ä»¶ä½¿ç”¨æ¥å®šä¹‰å¦‚ä½•è½¬æ¢ä½ çš„ä»£ç çš„ã€‚åœ¨babelçš„é…ç½®é¡¹ä¸­å¡«å†™éœ€è¦ä½¿ç”¨çš„æ’ä»¶åç§°ï¼Œbabelåœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šå»åŠ è½½node_modulesä¸­å¯¹åº”çš„npmåŒ…ï¼Œç„¶åç¼–è¯‘æ’ä»¶å¯¹åº”çš„è¯­æ³•ã€‚ .babelrc 123456&#123; "plugins": [ "transform-decorators-legacy", "transform-class-properties" ]&#125; æ’ä»¶æ‰§è¡Œé¡ºåºæ’ä»¶åœ¨é¢„è®¾(persets)å‰è¿è¡Œã€‚ æ’ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»å·¦å¾€å³æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œbabelåœ¨è¿›è¡ŒASTéå†çš„æ—¶å€™ä¼šå…ˆè°ƒç”¨transform-decorators-legacyæ’ä»¶ä¸­å®šä¹‰çš„è½¬æ¢æ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨transform-class-propertiesä¸­çš„æ–¹æ³•ã€‚ æ’ä»¶ä¼ å‚å‚æ•°æ˜¯ç”±æ’ä»¶åç§°å’Œå‚æ•°å¯¹è±¡ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ 123456789101112&#123; "plugins": [ [ "import", &#123; "libraryName": "antd", "libraryDirectory": "es", "style": "css" &#125; ], ]&#125; æ’ä»¶åç§°æ’ä»¶åç§°å¦‚æœä¸º @babel/plugin-xxxï¼Œå¯ä»¥ä½¿ç”¨çŸ­åç§°@babel/xxï¼Œå¦‚æœä¸ºbabel-plugin-xxï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨xxã€‚ è‡ªå®šä¹‰æ’ä»¶é¢„è®¾(Presets)é¢„è®¾å°±æ˜¯ä¸€å †æ’ä»¶(Plugin)çš„ç»„åˆï¼Œä»è€Œè¾¾åˆ°æŸç§è½¬è¯‘çš„èƒ½åŠ›ï¼Œå°±æ¯”å¦‚reactä¸­ä½¿ç”¨åˆ°çš„@babel/perset-reactï¼Œä»–å°±æ˜¯ä¸‹é¢å‡ ç§æ’ä»¶çš„ç»„åˆã€‚ @babel/plugin-syntax-jsx @babel/plugin-transform-react-jsx @babel/plugin-transform-react-display-name å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„åœ¨pluginsä¸­é…ç½®ä¸€ç³»åˆ—çš„pluginæ¥è¾¾åˆ°ç›®çš„ï¼Œå°±åƒè¿™æ ·ï¼š 1234567&#123; "plugins": [ "@babel/plugin-syntax-jsx", "@babel/plugin-transform-react-jsx", "@babel/plugin-transform-react-display-name" ]&#125; ä½†æ˜¯è¿™æ ·ä¸€æ–¹é¢æ˜¾å¾—ä¸é‚£ä¹ˆä¼˜é›…ï¼Œå¦ä¸€æ–¹é¢å¢åŠ äº†ä½¿ç”¨è€…çš„ä½¿ç”¨éš¾åº¦ã€‚å¦‚æœç›´æ¥ä½¿ç”¨é¢„è®¾å°±æ¸…æ–°è„±ä¿—å¤šäº†~ 12345&#123; "persets": [ "@babel/preset-react" ]&#125; é¢„è®¾(Presets)çš„æ‰§è¡Œé¡ºåºå‰é¢æåˆ°æ’ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»å·¦å¾€å³ï¼Œè€Œé¢„è®¾çš„æ‰§è¡Œé¡ºåºæ°å¥½åå…¶é“è¡Œä¹‹ï¼Œå®ƒæ˜¯ä»å³å¾€å·¦ã€‚ 1234567&#123; "presets": [ "a", "b", "c" ]&#125; å®ƒçš„æ‰§è¡Œé¡ºåºæ˜¯ cã€bã€aï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹å¥‡æ€ªï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿å‘åå…¼å®¹ï¼Œå› ä¸ºå¤§å¤šæ•°ç”¨æˆ·å°† â€œes2015â€ æ”¾åœ¨ â€œstage-0â€ ä¹‹å‰ã€‚ è‡ªå®šä¹‰é¢„è®¾(Presets)é‚£äº›å¥¹è®¤è¯†ä½ è€Œä½ ä¸è®¤è¯†å¥¹çš„é¢„è®¾(Presets) @babel/preset-stage-xxx @babel/perset-stage-xxx æ˜¯ESåœ¨ä¸åŒé˜¶æ®µè¯­æ³•ææ¡ˆçš„è½¬ç è§„åˆ™è€Œäº§ç”Ÿçš„é¢„è®¾ï¼Œéšç€è¢«æ‰¹å‡†ä¸ºESæ–°ç‰ˆæœ¬çš„ç»„æˆéƒ¨åˆ†è€Œè¿›è¡Œç›¸åº”çš„æ”¹å˜ï¼ˆä¾‹å¦‚ES6/ES2015ï¼‰ã€‚ ææ¡ˆåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š stage-0ï¼Œè®¾æƒ³ï¼šåªæ˜¯ä¸€ä¸ªæƒ³æ³•ï¼Œå¯èƒ½æœ‰babelæ’ä»¶ï¼Œstage-0çš„åŠŸèƒ½èŒƒå›´æœ€å¹¿ï¼ŒåŒ…å«stage-1ï¼Œstage-2ï¼Œstage-3çš„æ‰€æœ‰åŠŸèƒ½ stage-1ï¼Œå»ºè®®ï¼šè¿™æ˜¯å€¼å¾—è·Ÿè¿›çš„ stage-2ï¼Œè‰æ¡ˆï¼šåˆå§‹è§„èŒƒ stage-3ï¼Œå€™é€‰ï¼šå®Œæˆè§„èŒƒå¹¶åœ¨æµè§ˆå™¨ä¸Šåˆæ­¥å®ç° stage-4ï¼Œå®Œæˆï¼šå°†æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªå¹´åº¦ç‰ˆæœ¬å‘å¸ƒä¸­ @babel-preset-es2015 preset-es2015æ˜¯ä»…åŒ…å«ES6åŠŸèƒ½çš„Babelé¢„è®¾ã€‚ å®é™…ä¸Šåœ¨babel7å‡ºæ¥åä¸Šé¢æåˆ°çš„è¿™äº›é¢„è®¾stage-xï¼Œpreset-es2015éƒ½å¯ä»¥åºŸå¼ƒäº†ï¼Œå› ä¸º@bael/preset-envå‡ºæ¥ä¸€ç»Ÿæ±Ÿæ¹–äº†ã€‚ @babel/preset-env å‰é¢ä¸¤ä¸ªé¢„è®¾æ˜¯ä»ESæ ‡å‡†çš„ç»´åº¦æ¥ç¡®å®šè½¬ç è§„åˆ™çš„ï¼Œè€Œ@babel/preset-envæ˜¯æ ¹æ®æµè§ˆå™¨çš„ä¸åŒç‰ˆæœ¬ä¸­ç¼ºå¤±çš„åŠŸèƒ½ç¡®å®šè½¬æ¢è§„åˆ™çš„ï¼Œåœ¨é…ç½®çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦é…ç½®éœ€è¦æ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬å°±å¥½äº†ï¼Œ@babel/preset-envä¼šæ ¹æ®ç›®æ ‡æµè§ˆå™¨ç”Ÿæˆå¯¹åº”çš„æ’ä»¶åˆ—è¡¨ç„¶åè¿›è¡Œç¼–è¯‘ï¼š 12345678910&#123; "presets": [ ["env", &#123; "targets": &#123; "browser": ["last 10 versions", "ie &gt;= 9"] &#125; &#125;], ], ...&#125; åœ¨é»˜è®¤æƒ…å†µä¸‹@babel/preset-envæ”¯æŒå°†JSç›®å‰æœ€æ–°çš„è¯­æ³•è½¬æˆES5ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ä»£ç ä¸­ç”¨åˆ°äº†è¿˜æ²¡æœ‰æˆä¸ºJSæ ‡å‡†çš„è¯­æ³•ï¼Œè¯¥è¯­æ³•æš‚æ—¶è¿˜å¤„äºstageé˜¶æ®µï¼Œè¿™ä¸ªæ—¶å€™è¿˜æ˜¯éœ€è¦å®‰è£…å¯¹åº”çš„stageé¢„è®¾ï¼Œä¸ç„¶ç¼–è¯‘ä¼šæŠ¥é”™ã€‚ 12345678910&#123; "presets": [ ["env", &#123; "targets": &#123; "browsers": ["last 10 versions", "ie &gt;= 9"] &#125; &#125;], ], "stage-0"&#125; è™½ç„¶å¯ä»¥é‡‡ç”¨é»˜è®¤é…ç½®ï¼Œä½†å¦‚æœä¸éœ€è¦ç…§é¡¾æ‰€æœ‰çš„æµè§ˆå™¨ï¼Œè¿˜æ˜¯å»ºè®®ä½ é…ç½®ç›®æ ‡æµè§ˆå™¨å’Œç¯å¢ƒï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç¼–è¯‘åçš„ä»£ç ä½“ç§¯è¶³å¤Ÿå°ï¼Œå› ä¸ºåœ¨æœ‰çš„ç‰ˆæœ¬æµè§ˆå™¨ä¸­ï¼Œæ–°è¯­æ³•æœ¬èº«å°±èƒ½æ‰§è¡Œï¼Œä¸éœ€è¦ç¼–è¯‘ã€‚@babel/preset-env åœ¨é»˜è®¤æƒ…å†µä¸‹å’Œ preset-stage-x ä¸€æ ·åªç¼–è¯‘è¯­æ³•ï¼Œä¸ä¼šå¯¹æ–°æ–¹æ³•å’Œæ–°çš„åŸç”Ÿå¯¹è±¡è¿›è¡Œè½¬è¯‘ï¼Œä¾‹å¦‚ï¼š 123const arrFun = ()=&gt;&#123;&#125;const arr = [1,2,3]console.log(arr.includes(1)) è½¬æ¢å 123456"use strict";var arrFun = function arrFun() &#123;&#125;;var arr = [1, 2, 3];console.log(arr.includes(1)); ç®­å¤´å‡½æ•°è¢«è½¬æ¢äº†ï¼Œä½†æ˜¯ Array.includes æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¢«å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™è¦æ˜¯ç¨‹åºè·‘åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸Šï¼Œå°±ä¼šå‡ºç° includes is not function çš„é”™è¯¯ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ polyfill é—ªäº®ç™»åœºäº†ã€‚ Polyfillpolyfill çš„ç¿»è¯‘è¿‡æ¥å°±æ˜¯å«ç‰‡ï¼Œå«ç‰‡å°±æ˜¯å«å¹³ä¸åŒæµè§ˆå™¨ç¯å¢ƒçš„å·®å¼‚ï¼Œè®©å¤§å®¶éƒ½ä¸€æ ·ã€‚ @babel/polyfill æ¨¡å—å¯ä»¥æ¨¡æ‹Ÿå®Œæ•´çš„ES5ç¯å¢ƒã€‚ babel7.4ä»¥ä¸Šç‰ˆæœ¬å·²ç»å¼ƒç”¨ï¼Œå¯ä»¥ç”¨core-jsä»£æ›¿æ³¨æ„ @babel/polyfill ä¸æ˜¯åœ¨ Babel é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å¼•å…¥ã€‚ 12345import '@babel/polyfill';const arrFun = ()=&gt;&#123;&#125;const arr = [1,2,3]console.log(arr.includes(1))Promise.resolve(true) è¿™æ ·åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œäº†ã€‚ ä½¿ç”¨core-jsä»£æ›¿ï¼Œä¸éœ€è¦åœ¨æ–‡ä»¶ä¸­å¼•å…¥@babel/polyfill 123456789101112131415&#123; "presets": [ "@babel/preset-flow", [ "@babel/preset-env", &#123; "targets": &#123; "node": "8.10" &#125;, "corejs": "3", // å£°æ˜ corejs ç‰ˆæœ¬ "useBuiltIns": "usage" &#125; ] ]&#125; ECMAScript å’Œ JavaScript çš„å…³ç³»ECMAScript å’Œ JavaScript çš„å…³ç³»æ˜¯ï¼Œå‰è€…æ˜¯åè€…çš„è§„æ ¼ï¼Œåè€…æ˜¯å‰è€…çš„ä¸€ç§å®ç°ã€‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ¤æ–­æ•°æ®ç±»å‹çš„å‡ ç§æ–¹å¼]]></title>
    <url>%2F2020%2F02%2F28%2F2020%2F2%E6%9C%88%2F0228%2F</url>
    <content type="text"><![CDATA[åˆ¤æ–­æ•°æ®ç±»å‹1. typeofè¿”å›æ•°æ®ç±»å‹ï¼ŒåŒ…å«è¿™7ç§ï¼š numberã€booleanã€symbolã€stringã€objectã€undefinedã€functionã€‚ å¼•ç”¨ç±»å‹ï¼Œé™¤äº†functionè¿”å›functionç±»å‹å¤–ï¼Œå…¶ä»–å‡è¿”å›objectã€‚ å…¶ä¸­ï¼Œnull æœ‰å±äºè‡ªå·±çš„æ•°æ®ç±»å‹ Null ï¼Œ å¼•ç”¨ç±»å‹ä¸­çš„ æ•°ç»„ã€æ—¥æœŸã€æ­£åˆ™ ä¹Ÿéƒ½æœ‰å±äºè‡ªå·±çš„å…·ä½“ç±»å‹ï¼Œè€Œ typeof å¯¹äºè¿™äº›ç±»å‹çš„å¤„ç†ï¼Œåªè¿”å›äº†å¤„äºå…¶åŸå‹é“¾æœ€é¡¶ç«¯çš„ Object ç±»å‹ï¼Œæ²¡æœ‰é”™ï¼Œä½†ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ 2. Object.prototype.toString.call()toString() æ˜¯ Object çš„åŸå‹æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œé»˜è®¤è¿”å›å½“å‰å¯¹è±¡çš„ [[Class]] ã€‚è¿™æ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œå…¶æ ¼å¼ä¸º [object Xxx] ï¼Œå…¶ä¸­ Xxx å°±æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚ å¯¹äº Object å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨ toString() å°±èƒ½è¿”å› [object Object] ã€‚è€Œå¯¹äºå…¶ä»–å¯¹è±¡ï¼Œåˆ™éœ€è¦é€šè¿‡ call / apply æ¥è°ƒç”¨æ‰èƒ½è¿”å›æ­£ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚ 12345678910111213Object.prototype.toString.call('') ; // [object String]Object.prototype.toString.call(1) ; // [object Number]Object.prototype.toString.call(true) ; // [object Boolean]Object.prototype.toString.call(Symbol()); //[object Symbol]Object.prototype.toString.call(undefined) ; // [object Undefined]Object.prototype.toString.call(null) ; // [object Null]Object.prototype.toString.call(new Function()) ; // [object Function]Object.prototype.toString.call(new Date()) ; // [object Date]Object.prototype.toString.call([]) ; // [object Array]Object.prototype.toString.call(new RegExp()) ; // [object RegExp]Object.prototype.toString.call(new Error()) ; // [object Error]Object.prototype.toString.call(document) ; // [object HTMLDocument]Object.prototype.toString.call(window) ; //[object global] window æ˜¯å…¨å±€å¯¹è±¡ global çš„å¼•ç”¨ 3. constructorconstructoræ˜¯åŸå‹prototypeçš„ä¸€ä¸ªå±æ€§ï¼Œå½“å‡½æ•°è¢«å®šä¹‰æ—¶å€™ï¼Œjså¼•æ“ä¼šä¸ºå‡½æ•°æ·»åŠ åŸå‹prototypeï¼Œå¹¶ä¸”è¿™ä¸ªprototypeä¸­constructorå±æ€§æŒ‡å‘å‡½æ•°å¼•ç”¨ï¼Œ å› æ­¤é‡å†™prototypeä¼šä¸¢å¤±åŸæ¥çš„constructorã€‚ ä¸è¿‡è¿™ç§æ–¹æ³•æœ‰é—®é¢˜ï¼š1ï¼šnull å’Œ undefined æ— constructorï¼Œè¿™ç§æ–¹æ³•åˆ¤æ–­ä¸äº†ã€‚ 2ï¼šè¿˜æœ‰ï¼Œå¦‚æœè‡ªå®šä¹‰å¯¹è±¡ï¼Œå¼€å‘è€…é‡å†™prototypeä¹‹åï¼ŒåŸæœ‰çš„constructorä¼šä¸¢å¤±ï¼Œå› æ­¤ï¼Œä¸ºäº†è§„èŒƒå¼€å‘ï¼Œåœ¨é‡å†™å¯¹è±¡åŸå‹æ—¶ä¸€èˆ¬éƒ½éœ€è¦é‡æ–°ç»™ constructor èµ‹å€¼ï¼Œä»¥ä¿è¯å¯¹è±¡å®ä¾‹çš„ç±»å‹ä¸è¢«ç¯¡æ”¹ã€‚ 4. instanceofinstanceof æ˜¯ç”¨æ¥åˆ¤æ–­ A æ˜¯å¦ä¸º B çš„å®ä¾‹ï¼Œè¡¨è¾¾å¼ä¸ºï¼šA instanceof Bï¼Œå¦‚æœ A æ˜¯ B çš„å®ä¾‹ï¼Œåˆ™è¿”å› true,å¦åˆ™è¿”å› falseã€‚ åœ¨è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šinstanceof æ£€æµ‹çš„æ˜¯åŸå‹ï¼Œ ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡º[]çš„åŸå‹æŒ‡å‘Array.prototypeï¼Œé—´æ¥æŒ‡å‘Object.prototype, å› æ­¤ [] instanceof Array è¿”å›trueï¼Œ [] instanceof Object ä¹Ÿè¿”å›trueã€‚ instanceof åªèƒ½ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å±äºå®ä¾‹å…³ç³»ï¼Œ è€Œä¸èƒ½åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡å®ä¾‹å…·ä½“å±äºå“ªç§ç±»å‹ã€‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯æœ‰å“ªäº›é¡µé¢ä¼˜åŒ–æ–¹æ³•?]]></title>
    <url>%2F2020%2F02%2F27%2F2020%2F2%E6%9C%88%2F0227%2F</url>
    <content type="text"><![CDATA[å‰ç«¯æœ‰å“ªäº›é¡µé¢ä¼˜åŒ–æ–¹æ³•? å‡å°‘httpè¯·æ±‚æ•° ä»è®¾è®¡å®ç°å±‚é¢ç®€åŒ–é¡µé¢ï¼Œå‡å°‘å…ƒç´ çš„ä½¿ç”¨ åˆç†è®¾ç½®httpç¼“å­˜ èµ„æºåˆå¹¶ä¸å‹ç¼© åˆå¹¶csså›¾ç‰‡ï¼Œå‡å°‘è¯·æ±‚æ•°çš„åˆä¸€ä¸ªå¥½åŠæ³• å°†å¤–éƒ¨è„šæœ¬ç½®åº•ï¼ˆé¡µé¢ä¿¡æ¯åŠ è½½ååœ¨åŠ è½½ï¼‰ å¤šå›¾é¡µé¢ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½ åœ¨jsä¸­å°½é‡å‡å°‘é—­åŒ…çš„ä½¿ç”¨ å°½é‡åˆå¹¶csså’Œjsæ–‡ä»¶ å°½é‡ä½¿ç”¨å­—ä½“å›¾æ ‡æˆ–è€…svgå›¾æ ‡ï¼Œæ¥ä»£æ›¿ä¼ ç»Ÿçš„pngç­‰æ ¼å¼å›¾ç‰‡ å‡å°‘å¯¹domçš„æ“ä½œ å°½å¯èƒ½ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆäº‹ä»¶ä»£ç†ï¼‰æ¥å¤„ç†äº‹ä»¶ç»‘å®šçš„æ“ä½œ ç§»åŠ¨ç«¯çš„å…¼å®¹é—®é¢˜ ç»™ç§»åŠ¨ç«¯æ·»åŠ ç‚¹å‡»äº‹ä»¶ä¼šæœ‰300Sçš„å»¶è¿Ÿ å¦‚æœç”¨ç‚¹å‡»äº‹ä»¶ï¼Œéœ€è¦å¼•ä¸€ä¸ªfastclick.jsæ–‡ä»¶ï¼Œè§£å†³300sçš„å»¶è¿Ÿ ä¸€èˆ¬åœ¨ç§»åŠ¨ç«¯ç”¨ontouchstartã€ontouchmoveã€ontouchend ç§»åŠ¨ç«¯ç‚¹é€é—®é¢˜,touchstart æ—©äº touchend æ—©äºclick,clickçš„è§¦å‘æ˜¯æœ‰å»¶è¿Ÿçš„ï¼Œè¿™ä¸ªæ—¶é—´å¤§æ¦‚åœ¨300mså·¦å³ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬tapè§¦å‘ä¹‹åè’™å±‚éšè—ï¼Œ æ­¤æ—¶ clickè¿˜æ²¡æœ‰è§¦å‘ï¼Œ300msä¹‹åç”±äºè’™å±‚éšè—ï¼Œæˆ‘ä»¬çš„clickè§¦å‘åˆ°äº†ä¸‹é¢çš„aé“¾æ¥ä¸Šå°½é‡éƒ½ä½¿ç”¨touchäº‹ä»¶æ¥æ›¿æ¢clickäº‹ä»¶ã€‚ä¾‹å¦‚ç”¨touchendäº‹ä»¶(æ¨è)ã€‚ç”¨fastclickï¼Œgithub.com/ftlabs/fastâ€¦ç”¨preventDefaulté˜»æ­¢aæ ‡ç­¾çš„clickæ¶ˆé™¤ IE10 é‡Œé¢çš„é‚£ä¸ªå‰å·input:-ms-clear{display:none;} è®¾ç½®ç¼“å­˜ æ‰‹æœºé¡µé¢é€šå¸¸åœ¨ç¬¬ä¸€æ¬¡åŠ è½½åä¼šè¿›è¡Œç¼“å­˜ï¼Œç„¶åæ¯æ¬¡åˆ·æ–°ä¼šä½¿ç”¨ç¼“å­˜è€Œä¸æ˜¯å»é‡æ–°å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚å¦‚æœä¸å¸Œæœ›ä½¿ç”¨ç¼“å­˜å¯ä»¥è®¾ç½®no-cacheã€‚ åœ†è§’BUG æŸäº›Androidæ‰‹æœºåœ†è§’å¤±æ•ˆ background-clip: padding-box; é˜²æ­¢æ‰‹æœºä¸­ç½‘é¡µæ”¾å¤§å’Œç¼©å° è¿™ç‚¹æ˜¯æœ€åŸºæœ¬çš„ï¼Œåšä¸ºæ‰‹æœºç½‘ç«™å¼€å‘è€…æ¥è¯´åº”è¯¥éƒ½çŸ¥é“çš„ï¼Œå°±æ˜¯è®¾ç½®metaä¸­çš„viewport è®¾ç½®ç”¨æˆ·æˆªæ­¢ç¼©æ”¾ï¼Œä¸€èˆ¬å†™è§†å£çš„æ—¶å€™å°±å·²ç»å†™å¥½äº†ã€‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[call bind applyçš„åŒºåˆ«ï¼Ÿjsåƒåœ¾å›æ”¶]]></title>
    <url>%2F2020%2F02%2F26%2F2020%2F2%E6%9C%88%2F0226%2F</url>
    <content type="text"><![CDATA[call bind applyçš„åŒºåˆ«ï¼Ÿ call() å’Œ apply()çš„ç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒï¼Œå°±æ˜¯æŒ‡å®šçš„å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å°±æ˜¯è¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ call()å’Œapply()çš„åŒºåˆ«å°±åœ¨äºï¼Œä¸¤è€…ä¹‹é—´çš„å‚æ•°ã€‚ call()åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¹‹åçš„åç»­æ‰€æœ‰å‚æ•°å°±æ˜¯ä¼ å…¥è¯¥å‡½æ•°çš„å€¼ apply()åªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯è¯¥å‡½æ•°çš„å‚æ•°ã€‚bind()æ–¹æ³•å’Œå‰ä¸¤è€…ä¸åŒåœ¨äºï¼šbind()æ–¹æ³•ä¼šè¿”å›æ‰§è¡Œä¸Šä¸‹æ–‡è¢«æ”¹å˜çš„å‡½æ•°è€Œä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œå‰ä¸¤è€…æ˜¯ç›´æ¥æ‰§è¡Œè¯¥å‡½æ•°ã€‚ä»–çš„å‚æ•°å’Œcall()ç›¸åŒ. jsåƒåœ¾å›æ”¶JavaScriptä¸­çš„å†…å­˜ç®¡ç†æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œè€Œä¸”æ˜¯ä¸å¯è§çš„ã€‚æˆ‘ä»¬åˆ›å»ºåŸºæœ¬ç±»å‹ã€å¯¹è±¡ã€å‡½æ•°â€¦.æ‰€æœ‰è¿™äº›éƒ½éœ€è¦å†…å­˜.å½“ä¸å†éœ€è¦æŸæ ·ä¸œè¥¿æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ? JavaScript å¼•æ“æ˜¯å¦‚ä½•å‘ç°å¹¶æ¸…ç†å®ƒ? 1ï¼‰é—®ä»€ä¹ˆæ˜¯åƒåœ¾ ä¸€èˆ¬æ¥è¯´æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡å°±æ˜¯åƒåœ¾ï¼Œå°±æ˜¯è¦è¢«æ¸…é™¤ï¼Œ æœ‰ä¸ªä¾‹å¤–å¦‚æœå‡ ä¸ªå¯¹è±¡å¼•ç”¨å½¢æˆä¸€ä¸ªç¯ï¼Œäº’ç›¸å¼•ç”¨ï¼Œä½†æ ¹è®¿é—®ä¸åˆ°å®ƒä»¬ï¼Œè¿™å‡ ä¸ªå¯¹è±¡ä¹Ÿæ˜¯åƒåœ¾ï¼Œä¹Ÿè¦è¢«æ¸…é™¤ã€‚ 2ï¼‰å¦‚ä½•æ£€åƒåœ¾ ä¸€ç§ç®—æ³•æ˜¯æ ‡è®° æ ‡è®°-æ¸…é™¤ ç®—æ³•]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[cssé—®é¢˜]]></title>
    <url>%2F2020%2F02%2F25%2F2020%2F2%E6%9C%88%2F0225%2F</url>
    <content type="text"><![CDATA[cssé—®é¢˜ç”¨çº¯cssåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢123456789101112131415&lt;head&gt; &lt;style&gt; div &#123; width: 0; height: 0; border-top: 40px solid transparent; border-left: 40px solid transparent; border-right: 40px solid transparent; border-bottom: 40px solid #ff0000; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;&lt;/div&gt;&lt;/body&gt; å¦‚ä½•ç†è§£cssçš„ç›’æ¨¡å‹ æ ‡å‡†ç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹çš„å®½åº¦ï¼ˆcontentï¼‰+ border + paddingä½ç‰ˆæœ¬IEç›’å­æ¨¡å‹ï¼šå®½åº¦=å†…å®¹å®½åº¦ï¼ˆcontent+border+padding) box-sizingå±æ€§ content-boxï¼šé»˜è®¤å€¼ã€‚è¿™æ˜¯ CSS2.1 æŒ‡å®šçš„å®½åº¦å’Œé«˜åº¦çš„è¡Œä¸ºã€‚æŒ‡å®šå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ï¼ˆæœ€å°/æœ€å¤§å±æ€§ï¼‰é€‚ç”¨äºboxçš„å®½åº¦å’Œé«˜åº¦ã€‚å…ƒç´ çš„å¡«å……å’Œè¾¹æ¡†å¸ƒå±€å’Œç»˜åˆ¶æŒ‡å®šå®½åº¦å’Œé«˜åº¦é™¤å¤–ã€‚ border-boxï¼š æŒ‡å®šå®½åº¦å’Œé«˜åº¦ï¼ˆæœ€å°/æœ€å¤§å±æ€§ï¼‰ç¡®å®šå…ƒç´ è¾¹æ¡†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹å…ƒç´ æŒ‡å®šå®½åº¦å’Œé«˜åº¦åŒ…æ‹¬äº† padding å’Œ border ã€‚é€šè¿‡ä»å·²è®¾å®šçš„å®½åº¦å’Œé«˜åº¦åˆ†åˆ«å‡å»è¾¹æ¡†å’Œå†…è¾¹è·æ‰èƒ½å¾—åˆ°å†…å®¹çš„å®½åº¦å’Œé«˜åº¦ã€‚ inheritï¼š æŒ‡å®š box-sizing å±æ€§çš„å€¼ï¼Œåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šæŒ‰ç…§ä¸Šé¢çš„å›¾ç¤ºæ¥å‘ˆç°å†…å®¹ã€‚ç„¶è€Œ IE 5 å’Œ 6 çš„å‘ˆç°å´æ˜¯ä¸æ­£ç¡®çš„ã€‚æ ¹æ® W3C çš„è§„èŒƒï¼Œå…ƒç´ å†…å®¹å æ®çš„ç©ºé—´æ˜¯ç”± width å±æ€§è®¾ç½®çš„ï¼Œè€Œå†…å®¹å‘¨å›´çš„ padding å’Œ border å€¼æ˜¯å¦å¤–è®¡ç®—çš„ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒIE5.X å’Œ 6 åœ¨æ€ªå¼‚æ¨¡å¼ä¸­ä½¿ç”¨è‡ªå·±çš„éæ ‡å‡†æ¨¡å‹ã€‚è¿™äº›æµè§ˆå™¨çš„ width å±æ€§ä¸æ˜¯å†…å®¹çš„å®½åº¦ï¼Œè€Œæ˜¯å†…å®¹ã€å†…è¾¹è·å’Œè¾¹æ¡†çš„å®½åº¦çš„æ€»å’Œã€‚ å¦‚ä½•æ¸…é™¤æµ®åŠ¨ï¼Ÿ clearæ¸…é™¤æµ®åŠ¨ï¼ˆæ·»åŠ ç©ºdivæ³•ï¼‰åœ¨æµ®åŠ¨å…ƒç´ ä¸‹æ–¹æ·»åŠ ç©ºdiv,å¹¶ç»™è¯¥å…ƒç´ å†™cssæ ·å¼ {clear:both;height:0;overflow:hidden;} ç»™æµ®åŠ¨å…ƒç´ çˆ¶çº§è®¾ç½®é«˜åº¦ çˆ¶çº§åŒæ—¶æµ®åŠ¨ï¼ˆéœ€è¦ç»™çˆ¶çº§åŒçº§å…ƒç´ æ·»åŠ æµ®åŠ¨ï¼‰ çˆ¶çº§è®¾ç½®æˆinline-blockï¼Œå…¶margin: 0 autoå±…ä¸­æ–¹å¼å¤±æ•ˆ ç»™çˆ¶çº§æ·»åŠ overflow:hidden æ¸…é™¤æµ®åŠ¨æ–¹æ³• ä¸‡èƒ½æ¸…é™¤æ³• afterä¼ªç±» æ¸…æµ®åŠ¨ï¼ˆç°åœ¨ä¸»æµæ–¹æ³•ï¼Œæ¨èä½¿ç”¨ï¼‰ 1234567891011div &#123; zoom: 1; &amp;:after &#123; content: ''; clear: both; display: block; height: 0; overflow: hidden; visibility: hidden; &#125;&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è°ˆè°ˆä½ å¯¹Reduxçš„ç†è§£]]></title>
    <url>%2F2020%2F02%2F24%2F2020%2F2%E6%9C%88%2F0224%2F</url>
    <content type="text"><![CDATA[è°ˆè°ˆä½ å¯¹Reduxçš„ç†è§£ä½¿ç”¨Reduxåº”è¯¥éµå¾ªçš„åŸåˆ™ï¼š æ•´ä¸ªåº”ç”¨å…±äº«çš„stateåº”è¯¥å­˜å‚¨åœ¨storeçš„çŠ¶æ€æ ‘ä¸­ï¼Œstoreæ˜¯å”¯ä¸€çš„ stateä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡actionè¡¨è¾¾ä¿®æ”¹çš„æ„å›¾ï¼Œè°ƒç”¨dispatch()ä¿®æ”¹state stateçš„ä¿®æ”¹è§„åˆ™reducerså¿…é¡»æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸èƒ½æœ‰å‰¯ä½œç”¨ Reduxæä¾›çš„API createStorecreateStoreçš„ä½œç”¨å°±æ˜¯åˆ›å»ºä¸€ä¸ªReduxï¼Œstoreç”¨æ¥å­˜æ”¾åº”ç”¨ä¸­æ‰€æœ‰çš„statecreateStore(reducer, [perloadState], [enhancer])createStoreæ–¹æ³•æ¥å—3ä¸ªå‚æ•°ï¼Œåé¢ä¸¤ä¸ªæ˜¯å¯é€‰å‚æ•°reducer: å‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯functionperloadState: è¿™ä¸ªå‚æ•°ä»£è¡¨åˆå§‹åŒ–çš„state(initialState), å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å‚æ•°enhancer: è¿™ä¸ªå‚æ•°ä»£è¡¨æ·»åŠ çš„å„ç§ä¸­é—´ä»¶ï¼Œå‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯function combineReducerscombineReducersä¸»è¦æ˜¯æŠŠå¤šä¸ªreduceråˆå¹¶æˆä¸€ä¸ªï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„reducerå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶çš„å‚æ•°ä¹Ÿæ˜¯ä¸¤ä¸ªstateå’Œaction composeä¸»è¦æ˜¯åœ¨ä¸­é—´ä»¶æ—¶å€™ä½¿ç”¨ï¼Œåˆæˆå‡½æ•°compose(applyMiddleware(thunk), window.devToolsExtension ? window.devToolsExtension() : undefined) applyMiddleware bindActionCreatorbindActionCreatorçš„ä¸»è¦ä½œç”¨å°±æ˜¯å°†acitonä¸dispatchå‡½æ•°ç»‘å®šï¼Œç”Ÿæˆç›´æ¥å¯ä»¥å‡ºå‘actionçš„å‡½æ•° ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹ é¦–å…ˆï¼Œåœ¨æµè§ˆå™¨åœ°å€ä¸­è¾“å…¥url æµè§ˆå™¨å…ˆæŸ¥çœ‹æµè§ˆå™¨ç¼“å­˜-ç³»ç»Ÿç¼“å­˜-è·¯ç”±å™¨ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰ï¼Œä¼šç›´æ¥åœ¨å±å¹•ä¸­æ˜¾ç¤ºé¡µé¢å†…å®¹ã€‚è‹¥æ²¡æœ‰ï¼Œåˆ™è·³åˆ°ç¬¬ä¸‰æ­¥æ“ä½œ æµè§ˆå™¨å‘DNSï¼ˆDomain Name Systemï¼‰æœåŠ¡å™¨è¯·æ±‚è§£æè¯¥URLä¸­çš„åŸŸåå¯¹åº”çš„IPåœ°å€ è§£æå‡ºIPåœ°å€åï¼Œæ ¹æ®è¯¥IPåœ°å€å’Œé»˜è®¤ç«¯å£80ï¼Œå’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ æµè§ˆå™¨å‘å‡ºè¯»å–æ–‡ä»¶ï¼ˆURLä¸­åŸŸååé¢éƒ¨åˆ†å¯¹åº”çš„æ–‡ä»¶ï¼‰çš„HTTPè¯·æ±‚ï¼Œè¯¥è¯·æ±‚æŠ¥æ–‡ä½œä¸ºTCPä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰ä¸ªæŠ¥æ–‡çš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨ æœåŠ¡å™¨å¯¹æµè§ˆå™¨è¯·æ±‚åšå‡ºå“åº”ï¼Œå¹¶æŠŠå¯¹åº”çš„htmlæ–‡æœ¬å‘é€ç»™æµè§ˆå™¨ é‡Šæ”¾TCPè¿æ¥ æµè§ˆå™¨å°†è¯¥htmlæ–‡æœ¬å¹¶æ˜¾ç¤ºå†…å®¹ é‡ç»˜ï¼ˆRepaintï¼‰ &amp; å›æµï¼ˆé‡æ’Reflowï¼‰ é‡ç»˜(repaint)ï¼šå½“æˆ‘ä»¬å¯¹DOMçš„ä¿®æ”¹å¯¼è‡´çš„æ ·å¼å˜åŒ–ï¼Œä½†æœªå½±å“å‡ ä½•å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œç›´æ¥å¯ä»¥ä¸ºè¯¥å…ƒç´ ç»˜åˆ¶æ–°çš„æ ·å¼ï¼Œè·³è¿‡äº†å›æµç¯èŠ‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡ç»˜ã€‚ å›æµï¼ˆé‡æ’ reflowï¼‰ï¼šå¯¹DOMæ ‘è¿›è¡Œæ¸²æŸ“ï¼Œåªè¦ä¿®æ”¹DOMæˆ–ä¿®æ”¹å…ƒç´ çš„å½¢çŠ¶å¤§å°ï¼Œå°±ä¼šè§¦å‘reflowï¼Œreflowçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šä½¿å·²æ¸²æŸ“å¥½å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶é‡æ–°æ„é€ è¿™éƒ¨åˆ†ï¼Œå®Œæˆreflowåï¼Œæµè§ˆå™¨ä¼šé‡æ–°ç»˜åˆ¶å—å½±å“çš„éƒ¨åˆ†åˆ°å±å¹•ä¸­ å›æµå¿…å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šå‘ç”Ÿå›æµ 12345678910// è§¦å‘Reflowå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹DOMèŠ‚ç‚¹æ—¶ï¼Œä¼šå¯¼è‡´Reflowæˆ–Repaintç§»åŠ¨DOMçš„ä½ç½®ï¼Œæˆ–æ˜¯æä¸ªåŠ¨ç”»çš„æ—¶å€™ä¿®æ”¹CSSæ ·å¼çš„æ—¶å€™ï¼ˆå®½ã€é«˜ã€å†…å¤–è¾¹è·ã€è¾¹æ¡†ç­‰ï¼‰Resizeçª—å£çš„æ—¶å€™ï¼ˆç§»åŠ¨ç«¯æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œæˆ–æ˜¯æ»šåŠ¨çš„æ—¶å€™æ”¹å˜å…ƒç´ å†…å®¹ï¼ˆæ–‡æœ¬æˆ–å›¾ç‰‡ç­‰ï¼‰ä¿®æ”¹ç½‘é¡µçš„é»˜è®¤å­—ä½“æ—¶// è§¦å‘RepaintDOMæ”¹åŠ¨CSSæ”¹åŠ¨ å¦‚ä½•å‡å°‘å›æµã€é‡ç»˜ï¼Ÿå‡å°‘å›æµã€é‡ç»˜å°±æ˜¯å‡å°‘å¯¹DOMçš„æ“ä½œ 1.ç›´æ¥æ”¹å˜classNameï¼Œå¦‚æœåŠ¨æ€æ”¹å˜æ ·å¼ï¼Œåˆ™ä½¿ç”¨cssTextï¼ˆå‡å°‘è®¾ç½®å¤šé¡¹å†…è”æ ·å¼ï¼‰ 2.è®©è¦æ“ä½œçš„å…ƒç´ è¿›è¡Œâ€œç¦»çº¿å¤„ç†â€ï¼Œå¤„ç†å®Œåä¸€èµ·æ›´æ–° å½“ä½¿ç”¨DocumentFragmentè¿›è¡Œç¼“å­˜æ“ä½œï¼Œå¼•å‘ä¸€æ¬¡å›æµå’Œé‡ç»˜ ä½¿ç”¨display:none æŠ€æœ¯ï¼Œåªå¼•å‘ä¸¤æ¬¡å›æµå’Œé‡ç»˜ ä½¿ç”¨cloneNode(true or false)å’ŒreplaceChildæŠ€æœ¯ï¼Œå¼•å‘ä¸€æ¬¡å›æµå’Œé‡ç»˜ 3.ä¸è¦ç»å¸¸è®¿é—®ä¼šå¼•èµ·æµè§ˆå™¨flushé˜Ÿåˆ—çš„å±æ€§ï¼Œå¦‚æœä½ ç¡®å®è¦è®¿é—®ï¼Œåˆ©ç”¨ç¼“å­˜ 4.è®©å…ƒç´ è„±ç¦»åŠ¨ç”»æµï¼Œå‡å°‘render æ ‘çš„è§„æ¨¡ 5.ç‰ºç‰²å¹³æ»‘åº¦æ¢å–é€Ÿåº¦ 6.é¿å…ä½¿ç”¨tableå¸ƒå±€ 7.IEä¸­é¿å…ä½¿ç”¨javascriptè¡¨è¾¾å¼ è·¨åŸŸé€šä¿¡çš„å‡ ç§æ–¹å¼ JSONPï¼ˆåªæ”¯æŒgetè¯·æ±‚ï¼‰ window + hash window + domain window + name postMessage WebSocket CORSï¼ˆCross-origin resource sharingï¼‰è·¨åŸŸèµ„æºå…±äº«ï¼ˆæ‰€æœ‰çš„HTTPè¯·æ±‚ï¼‰ nginxåå‘ä»£ç† http-proxyæœåŠ¡ç«¯ä»£ç†è¯·æ±‚ å‰ç«¯é”™è¯¯ç±» å³æ—¶è¿è¡Œé”™è¯¯ï¼šä»£ç é”™è¯¯ï¼›æ•è·æ–¹å¼ï¼štryâ€¦catchâ€¦ã€window.onerror èµ„æºåŠ è½½é”™è¯¯ï¼›object.onerrorï¼ˆä¸ä¼šå†’æ³¡ ï¼‰ã€performance.getEntriesã€Erroräº‹ä»¶æ•è· æµ…æ‹·è´ å¾ªç¯éå† 123456789101112131415161718const arr1 = [1, 2, ['ming', 'abc'], 5];const shallowClone = (arr) =&gt; &#123; const dst = []; for (let prop in arr) &#123; if (arr.hasOwnProperty(prop)) &#123; dst[prop] = arr[prop]; &#125; &#125; return dst;&#125;const arr2 = shallowClone(arr1);arr2[2].push('wuhan');arr2[3] = 5;console.log(arr1); [1, 2, ['ming', 'abc', 'wuhan'], 5]console.log(arr2); [1, 2, ['ming', 'abc', 'wuhan'], 5] object.assign() Array.prototype.concat() Array.prototype.slice() objå±•å¼€è¿ç®—ç¬¦ æ·±æ‹·è´ æ‰‹åŠ¨é€’å½’ 1234567891011121314151617181920212223242526272829303132333435363738function deepClone (sourceObj, targetObj) &#123; let cloneObj = targetObj || &#123;&#125; if(!sourceObj || typeof sourceObj !== "object" || sourceObj.length === undefined)&#123; return sourceObj &#125; if(sourceObj instanceof Array)&#123; cloneObj = sourceObj.concat() &#125; else &#123; for(let i in sourceObj)&#123; if (typeof sourceObj[i] === 'object') &#123; cloneObj[i] = deepClone(sourceObj[i], &#123;&#125;) &#125; else &#123; cloneObj[i] = sourceObj[i] &#125; &#125; &#125; return cloneObj&#125;let sourceObj = &#123; a: 1, b: &#123; a: 1 &#125;, c: &#123; a: 1, b: &#123; a: 1 &#125; &#125;, d: function() &#123; console.log('hello world') &#125;, e: [1, 2, 3]&#125;let targetObj = deepClone(sourceObj, &#123;&#125;)targetObj.c.b.a = 9console.log(sourceObj)console.log(targetObj) JSON.parse(JSON.stringify()) 1234561.å¦‚æœjsoné‡Œé¢æœ‰æ—¶é—´å¯¹è±¡ï¼Œåˆ™åºåˆ—åŒ–ç»“æœï¼šæ—¶é—´å¯¹è±¡=&gt;å­—ç¬¦ä¸²çš„å½¢å¼ï¼›2.å¦‚æœjsoné‡Œæœ‰RegExpã€Errorå¯¹è±¡ï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœå°†åªå¾—åˆ°ç©ºå¯¹è±¡ RegExpã€Error =&gt; &#123;&#125;ï¼›3.å¦‚æœjsoné‡Œæœ‰ function,undefinedï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šæŠŠ function,undefined ä¸¢å¤±ï¼›4.å¦‚æœjsoné‡Œæœ‰NaNã€Infinityå’Œ-Infinityï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šå˜æˆnullï¼›5.å¦‚æœjsoné‡Œæœ‰å¯¹è±¡æ˜¯ç”±æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šä¸¢å¼ƒå¯¹è±¡çš„ constructorï¼›6.å¦‚æœå¯¹è±¡ä¸­å­˜åœ¨å¾ªç¯å¼•ç”¨çš„æƒ…å†µä¹Ÿæ— æ³•å®ç°æ·±æ‹·è´ lodashå‡½æ•°åº“ 123456789101112131415161718var _= require('lodash');const obj1 = [ 1, 'Hello!', &#123; name:'ming1' &#125;, [ &#123; name:'meng1', &#125; ],]const obj2 = _.cloneDeep(obj1);obj2[0] = 2;obj2[1] = 'Hi!';obj2[2].name = 'ming2'obj2[3][0].name = 'meng2';console.log(obj1);console.log(obj2);]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Symbolçš„åº”ç”¨åœºæ™¯]]></title>
    <url>%2F2020%2F02%2F20%2F2020%2F2%E6%9C%88%2F0220%2F</url>
    <content type="text"><![CDATA[Symbolçš„åº”ç”¨åœºæ™¯åº”ç”¨åœºæ™¯1ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§åï¼ˆkeyï¼‰12345678910111213let obj = &#123; [Symbol()]: 'test', a: 1, b: 2,&#125;;Object.keys(obj); // ['a', 'b']for (let p in obj) &#123; console.log(p); // åˆ†åˆ«è¾“å‡º: a å’Œ b&#125;Object.getOwnPropertyNames(obj); // ['a', 'b'] ç”±ä¸Šä»£ç å¯çŸ¥ï¼ŒSymbolç±»å‹çš„keyæ˜¯ä¸èƒ½é€šè¿‡Object.keys()æˆ–è€…forâ€¦inæ¥æšä¸¾çš„ï¼Œå®ƒæœªè¢«åŒ…å«å¯¹è±¡è‡ªèº«çš„å±æ€§åé›†åˆï¼ˆproperty namesï¼‰ä¹‹ä¸­ã€‚æ‰€ä»¥ï¼Œåˆ©ç”¨è¯¥ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›ä¸éœ€è¦å¯¹å¤–æ“ä½œå’Œè®¿é—®çš„å±æ€§ä½¿ç”¨Symbolæ¥å®šä¹‰ã€‚ åº”ç”¨åœºæ™¯2ï¼šä½¿ç”¨Symbolæ¥æ›¿ä»£å¸¸é‡12345678910111213141516171819const TYPE_AUDIO = 'AUDIO'const TYPE_VIDEO = 'VIDEO'const TYPE_IMAGE = 'IMAGE'function handleFileResource(resource) &#123; switch(resource.type) &#123; case TYPE_AUDIO: playAudio(resource) break case TYPE_VIDEO: playVideo(resource) break case TYPE_IMAGE: previewImage(resource) break default: throw new Error('Unknown type of resource') &#125;&#125; å¦‚ä¸Šé¢çš„ä»£ç ä¸­é‚£æ ·ï¼Œæˆ‘ä»¬ç»å¸¸å®šä¹‰ä¸€ç»„å¸¸é‡æ¥ä»£è¡¨ä¸€ç§ä¸šåŠ¡é€»è¾‘ä¸‹çš„å‡ ä¸ªä¸åŒç±»å‹ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›è¿™å‡ ä¸ªå¸¸é‡ä¹‹é—´æ˜¯å”¯ä¸€çš„å…³ç³»ï¼Œå¸¸é‡å°‘çš„æ—¶å€™è¿˜ç®—å¥½ï¼Œä½†æ˜¯å¸¸é‡ä¸€å¤šï¼Œä½ å¯èƒ½è¿˜å¾—èŠ±ç‚¹è„‘å­å¥½å¥½ä¸ºä»–ä»¬å–ä¸ªå¥½ç‚¹çš„åå­—ã€‚ ç°åœ¨æœ‰äº†Symbolï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…è¿™ä¹ˆéº»çƒ¦äº†ï¼š 123const TYPE_AUDIO = Symbol()const TYPE_VIDEO = Symbol()const TYPE_IMAGE = Symbol() åº”ç”¨åœºæ™¯3ï¼šä½¿ç”¨Symbolå®šä¹‰ç±»çš„ç§æœ‰å±æ€§/æ–¹æ³•ä½¿ç”¨çš„å°‘ å½»åº•ææ‡‚æµè§ˆå™¨Event-loop1. é¢„å¤‡çŸ¥è¯†1JavaScriptçš„è¿è¡Œæœºåˆ¶ (1) æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚(2) ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚(3) ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚(4) ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ æ¦‚å†µå°±æ˜¯ï¼šè°ƒç”¨æ ˆä¸­çš„åŒæ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆå†…è¢«æ¸…ç©ºäº†ï¼Œå°±ä»£è¡¨ä¸»çº¿ç¨‹ç©ºé—²äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå»ä»»åŠ¡é˜Ÿåˆ—ä¸­æŒ‰ç…§é¡ºåºè¯»å–ä¸€ä¸ªä»»åŠ¡æ”¾å…¥åˆ°æ ˆä¸­æ‰§è¡Œã€‚æ¯æ¬¡æ ˆå†…è¢«æ¸…ç©ºï¼Œéƒ½ä¼šå»è¯»å–ä»»åŠ¡é˜Ÿåˆ—æœ‰æ²¡æœ‰ä»»åŠ¡ï¼Œæœ‰å°±è¯»å–æ‰§è¡Œï¼Œä¸€ç›´å¾ªç¯è¯»å–-æ‰§è¡Œçš„æ“ä½œã€‚ 1JavaScriptä¸­æœ‰ä¸¤ç§å¼‚æ­¥ä»»åŠ¡ï¼š å®ä»»åŠ¡ï¼šscriptï¼ˆæ•´ä½“ä»£ç ï¼‰ï¼ŒsetTimeoutã€setIntervalã€setImmediateã€I/Oã€UI rendering å¾®ä»»åŠ¡ï¼šprocess.nextTickï¼ˆNodejsï¼‰ã€Promiseã€Object.observeã€MutationObServer 2. äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿä¸»çº¿ç¨‹ä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–æ‰§è¡Œäº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œè¿™ä¸ªæœºåˆ¶è¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯ã€‚æ­¤æœºåˆ¶å…·ä½“å¦‚ä¸‹ï¼šä¸»çº¿ç¨‹ä¼šä¸æ–­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æŒ‰é¡ºåºè¯»å–ä»»åŠ¡æ‰§è¡Œï¼Œæ¯æ‰§è¡Œä¸€ä¸ªä»»åŠ¡éƒ½ä¼šæ£€æŸ¥microtaské˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼ˆæ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡çš„å…·ä½“æ ‡å¿—æ˜¯å‡½æ•°æ‰§è¡Œæ ˆä¸ºç©ºï¼‰ï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™ä¼šä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ‰€æœ‰microtaskã€‚ç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯å»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œã€‚ å½“å‰æ‰§è¡Œæ ˆæ‰§è¡Œå®Œæ¯•æ—¶ä¼šç«‹åˆ»å…ˆå¤„ç†æ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„äº‹ä»¶, ç„¶åå†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶ã€‚åŒä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­, å¾®ä»»åŠ¡æ°¸è¿œåœ¨å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚ 3. ä¸ºä»€ä¹ˆä¼šéœ€è¦event-loop?å› ä¸º JavaScript æ˜¯å•çº¿ç¨‹çš„ã€‚å•çº¿ç¨‹å°±æ„å‘³ç€ï¼Œæ‰€æœ‰ä»»åŠ¡éœ€è¦æ’é˜Ÿï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œæ‰ä¼šæ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœå‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œåä¸€ä¸ªä»»åŠ¡å°±ä¸å¾—ä¸ä¸€ç›´ç­‰ç€ã€‚ä¸ºäº†åè°ƒäº‹ä»¶ï¼ˆeventï¼‰ï¼Œç”¨æˆ·äº¤äº’ï¼ˆuser interactionï¼‰ï¼Œè„šæœ¬ï¼ˆscriptï¼‰ï¼Œæ¸²æŸ“ï¼ˆrenderingï¼‰ï¼Œç½‘ç»œï¼ˆnetworkingï¼‰ç­‰ï¼Œç”¨æˆ·ä»£ç†ï¼ˆuser agentï¼‰å¿…é¡»ä½¿ç”¨äº‹ä»¶å¾ªç¯ï¼ˆevent loopsï¼‰ã€‚ nodeä¸­çš„event-loopä¸æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚æµè§ˆå™¨å’Œ Node ç¯å¢ƒä¸‹ï¼Œmicrotask ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œæ—¶æœºä¸åŒ Node ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œ æµè§ˆå™¨ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„ macrotask æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œ 123456789101112131415161718192021console.log('start')setTimeout(() =&gt; &#123; console.log('timer1') Promise.resolve().then(function() &#123; console.log('promise1') &#125;)&#125;, 0)setTimeout(() =&gt; &#123; console.log('timer2') Promise.resolve().then(function() &#123; console.log('promise2') &#125;)&#125;, 0)Promise.resolve().then(function() &#123; console.log('promise3')&#125;)console.log('end')// æµè§ˆå™¨ start=&gt;end=&gt;promise3=&gt;timer1=&gt;promise1=&gt;timer2=&gt;promise2// node start=&gt;end=&gt;promise3=&gt;timer1=&gt;timer2=&gt;promise1=&gt;promise2]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iframeçš„ä¼˜ç¼ºç‚¹]]></title>
    <url>%2F2019%2F10%2F09%2F2019%2F%E6%B5%85%E8%B0%88iframe%2F</url>
    <content type="text"><![CDATA[iframeçš„ä¼˜ç¼ºç‚¹iframeçš„ä¼˜ç‚¹ï¼š iframeèƒ½å¤ŸåŸå°ä¸åŠ¨çš„æŠŠåµŒå…¥çš„ç½‘é¡µå±•ç°å‡ºæ¥ã€‚ å¦‚æœæœ‰å¤šä¸ªç½‘é¡µå¼•ç”¨iframeï¼Œé‚£ä¹ˆä½ åªéœ€è¦ä¿®æ”¹iframeçš„å†…å®¹ï¼Œå°±å¯ä»¥å®ç°è°ƒç”¨çš„æ¯ä¸€ä¸ªé¡µé¢å†…å®¹çš„æ›´æ”¹ï¼Œæ–¹ä¾¿å¿«æ·ã€‚ ç½‘é¡µå¦‚æœä¸ºäº†ç»Ÿä¸€é£æ ¼ï¼Œå¤´éƒ¨å’Œç‰ˆæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±å¯ä»¥å†™æˆä¸€ä¸ªé¡µé¢ï¼Œç”¨iframeæ¥åµŒå¥—ï¼Œå¯ä»¥å¢åŠ ä»£ç çš„å¯é‡ç”¨ã€‚ å¦‚æœé‡åˆ°åŠ è½½ç¼“æ…¢çš„ç¬¬ä¸‰æ–¹å†…å®¹å¦‚å›¾æ ‡å’Œå¹¿å‘Šï¼Œè¿™äº›é—®é¢˜å¯ä»¥ç”±iframeæ¥è§£å†³ã€‚ iframeçš„ç¼ºç‚¹ï¼š ä¼šäº§ç”Ÿå¾ˆå¤šé¡µé¢ï¼Œä¸å®¹æ˜“ç®¡ç†ã€‚ iframeæ¡†æ¶ç»“æ„æœ‰æ—¶ä¼šè®©äººæ„Ÿåˆ°è¿·æƒ‘ï¼Œå¦‚æœæ¡†æ¶ä¸ªæ•°å¤šçš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸Šä¸‹ã€å·¦å³æ»šåŠ¨æ¡ï¼Œä¼šåˆ†æ•£è®¿é—®è€…çš„æ³¨æ„åŠ›ï¼Œç”¨æˆ·ä½“éªŒåº¦å·®ã€‚ ä»£ç å¤æ‚ï¼Œæ— æ³•è¢«ä¸€äº›æœç´¢å¼•æ“ç´¢å¼•åˆ°ï¼Œè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼Œç°åœ¨çš„æœç´¢å¼•æ“çˆ¬è™«è¿˜ä¸èƒ½å¾ˆå¥½çš„å¤„ç†iframeä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥ä½¿ç”¨iframeä¼šä¸åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ã€‚ å¾ˆå¤šçš„ç§»åŠ¨è®¾å¤‡ï¼ˆPDA æ‰‹æœºï¼‰æ— æ³•å®Œå…¨æ˜¾ç¤ºæ¡†æ¶ï¼Œè®¾å¤‡å…¼å®¹æ€§å·®ã€‚ iframeæ¡†æ¶é¡µé¢ä¼šå¢åŠ æœåŠ¡å™¨çš„httpè¯·æ±‚ï¼Œå¯¹äºå¤§å‹ç½‘ç«™ä¸æ˜¯å¯å–çš„ã€‚ iframeè¿ç§»é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ import React, { propTypes } from â€˜reactâ€™; error: PropTypes is undefined; å‡ºç°åŸå› : Reactåœ¨æ–°ç‰ˆæœ¬ä¸­åºŸå¼ƒäº†é›†æˆç±»ä¼¼propTypesè¿™ç§ç¬¬ä¸‰æ–¹åº“æ–¹æ¡ˆã€‚ è§£å†³æ–¹æ¡ˆ: æ–°ä»“åº“ä½¿ç”¨çš„reactç‰ˆæœ¬è¾ƒé«˜ï¼Œä»¥ä¸Šæ–¹å¼å·²è¢«åºŸå¼ƒï¼Œåº”ä½¿ç”¨ 1import PropTypes from 'prop-types'; import â€˜./style.lessâ€™; error: æ ·å¼å¤±æ•ˆé—®é¢˜ã€‚ å‡ºç°åŸå› : æ–°é¡¹ç›®ä¸­å¼€å¯äº†css-moduleï¼Œéœ€è¦é€šè¿‡é…ç½®:globalæ¥å£°æ˜ä¸€ä¸ªå…¨å±€classï¼Œä½¿å…¶åœ¨å…¨å±€èµ·ä½œç”¨ã€‚ è§£å†³æ–¹æ¡ˆ1: 1234567### style.less.content &#123; :global &#123; .items &#123;&#125; &#125;&#125; 12345import styles from './style.less';&lt;div className=&#123;styles.content&#125;&gt; &lt;div className="items"&gt;&lt;/div&gt;&lt;/div&gt; è§£å†³æ–¹æ¡ˆ2: 1234567# style.less:global &#123; .content &#123; .items &#123;&#125; &#125;&#125; 1234import './style.less';&lt;div className="content"&gt; &lt;div className="items"&gt;&lt;/div&gt;&lt;/div&gt; æ¨èä½¿ç”¨æ–¹æ¡ˆ1ï¼Œå¯ä»¥åˆ©ç”¨css-moduleçš„å‘½åè§„åˆ™å‡å°‘é¡¹ç›®ä¸­æ ·å¼çš„å†²çªé—®é¢˜ã€‚æ–¹æ¡ˆ2æ”¹åŠ¨å°ä½†æ˜¯å¤ªæš´åŠ›ï¼Œéå¸¸å¯èƒ½äº§ç”Ÿæ ·å¼å†²çªé—®é¢˜ã€‚ commå’Œcomponentsä¸­ç»„ä»¶å‡ºç°ä¸å¯ç”¨æƒ…å†µã€‚ error: åŠŸèƒ½ä¸å¯ç”¨æƒ…å†µã€‚ è§£å†³æ–¹æ¡ˆ: å»ºè®®ç›´æ¥ä½¿ç”¨antdæ›¿æ¢ï¼Œéœ€è¦èŠ±ä¸Šä¸€ç‚¹æ—¶é—´å¯¹åº”antd apiåšä¸€å®šä»£ç é‡æ„ã€‚(!è¿™å—éœ€è¦ä»”ç»†æ•ˆéªŒåŠŸèƒ½æ˜¯å¦æ­£å¸¸) ec_feä¸­ä½¿ç”¨äº†Component.contextTypesã€‚ ä¾‹å¦‚ï¼š 1234Manage.contextTypes = &#123; history: PropTypes.object.isRequired, store: PropTypes.object.isRequired&#125;; Warning: Failed context type: The context history is marked as required in Connect(ContractReview), but its value is undefined. è§£å†³æ–¹æ¡ˆï¼šæ‹†åˆ†å‡ºå»çš„ä»“åº“ï¼Œreact-routerç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯4.xï¼Œå·²ç»ä¸éœ€è¦åƒè€ç‰ˆæœ¬ä¸€æ ·ä¸€å±‚å±‚ä¼ é€’historyæˆ–è€…ç»‘å®šåœ¨Contextä¸Šå…±äº«çš„æ–¹å¼ã€‚ ec_feä¸­ä½¿ç”¨äº†this.props.routerç­‰è·¯ç”±api 123456this.props.router.replace(&#123; pathname: `/admin/web/packageconfig/function.html`, query: &#123; id: moduleList[0].f_id, &#125;,&#125;); é”™è¯¯ï¼šindex.jsx:59 Uncaught TypeError: Cannot read property â€˜replaceâ€™ of undefined è§£å†³æ–¹æ¡ˆï¼šæ‹†åˆ†å‡ºå»çš„ä»“åº“ï¼Œreact-routerç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯4.xï¼Œè¯·ä½¿ç”¨react-router-domæä¾›çš„apiä¿®æ”¹ã€‚ 1234this.props.history.replace(&#123; pathname: `/packageconfig/funModule`, search: `id=$&#123;moduleList[0].f_id&#125;`,&#125;); å‚è€ƒèµ„æ–™ æµ…è°ˆiframe react-router-dom]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NextTick åŸç†åˆ†æ]]></title>
    <url>%2F2019%2F06%2F13%2F2019%2FJune%2FNextTick%2FREADME%2F</url>
    <content type="text"><![CDATA[NextTick åŸç†åˆ†ænextTickå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸‹æ¬¡DOMæ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œç”¨äºè·å¾—æ›´æ–°åçš„DOMã€‚ åœ¨Vue2.4ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨çš„microtasksï¼Œä½†æ˜¯microtasksçš„ä¼˜å…ˆçº§è¿‡é«˜ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°æ¯”äº‹ä»¶å†’æ³¡æ›´å¿«çš„æƒ…å†µï¼Œä½†å¦‚æœéƒ½æ˜¯macrotasksåˆå¯èƒ½ä¼šå‡ºç°æ¸²æŸ“çš„æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œä¼šé»˜è®¤ä½¿ç”¨microtasksï¼Œä½†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šä½¿ç”¨macrotasksï¼Œæ¯”å¦‚v-onã€‚ å¯¹äºå®ç°macrotasksï¼Œä¼šå…ˆåˆ¤æ–­æ˜¯å¦èƒ½ä½¿ç”¨setImmediateï¼Œä¸èƒ½çš„è¯é™çº§ä¸ºMessageChannelï¼Œä»¥ä¸Šéƒ½ä¸è¡Œçš„è¯å°±ä½¿ç”¨setTimeoutã€‚ 123456789101112131415161718192021if (typeof setImmediate !== 'undefined' &amp;&amp; isNative(setImmediate)) &#123; macroTimerFunc = () =&gt; &#123; setImmediate(flushCallbacks) &#125;&#125; else if ( typeof MessageChannel !== 'undefined' &amp;&amp; (isNative(MessageChannel) || // PhantomJS MessageChannel.toString() === '[object MessageChannelConstructor]')) &#123; const channel = new MessageChannel() const port = channel.port2 channel.port1.onmessage = flushCallbacks macroTimerFunc = () =&gt; &#123; port.postMessage(1) &#125;&#125; else &#123; macroTimerFunc = () =&gt; &#123; setTimeout(flushCallbacks, 0) &#125;&#125; ä»¥ä¸Šä»£ç ç”¨æ¥åˆ¤æ–­èƒ½ä¸èƒ½ä½¿ç”¨ç›¸åº”çš„APIã€‚ æ³¨è§£ macrotasksï¼ˆå®ä»»åŠ¡ï¼‰ï¼š setTimeout, setInterval, setImmediate, I/O, UI rendering microtasksï¼ˆå¾®ä»»åŠ¡ï¼‰ï¼š process.nextTick, Promise, MutationObserver]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitçš„åŸºæœ¬æ“ä½œ]]></title>
    <url>%2F2019%2F06%2F09%2F2019%2FJune%2Fgit%2FREADME%2F</url>
    <content type="text"><![CDATA[git Rebase åˆå¹¶ stash reflog Reset Rebase åˆå¹¶è¯¥å‘½ä»¤å¯ä»¥è®©å’Œ merge å‘½ä»¤å¾—åˆ°çš„ç»“æœåŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚ é€šå¸¸ä½¿ç”¨ merge æ“ä½œå°†åˆ†æ”¯ä¸Šçš„ä»£ç åˆå¹¶åˆ° master ä¸­ï¼Œåˆ†æ”¯æ ·å­å¦‚ä¸‹æ‰€ç¤º ä½¿ç”¨ rebase åï¼Œä¼šå°† develop ä¸Šçš„ commit æŒ‰é¡ºåºç§»åˆ° master çš„ç¬¬ä¸‰ä¸ª commit åé¢ï¼Œåˆ†æ”¯æ ·å­å¦‚ä¸‹æ‰€ç¤º Rebase å¯¹æ¯” mergeï¼Œä¼˜åŠ¿åœ¨äºåˆå¹¶åçš„ç»“æœå¾ˆæ¸…æ™°ï¼Œåªæœ‰ä¸€æ¡çº¿ï¼ŒåŠ£åŠ¿åœ¨äºå¦‚æœä¸€æ—¦å‡ºç°å†²çªï¼Œè§£å†³å†²çªå¾ˆéº»çƒ¦ï¼Œå¯èƒ½è¦è§£å†³å¤šä¸ªå†²çªï¼Œä½†æ˜¯ merge å‡ºç°å†²çªåªéœ€è¦è§£å†³ä¸€æ¬¡ã€‚ ä½¿ç”¨ rebase åº”è¯¥åœ¨éœ€è¦è¢« rebase çš„åˆ†æ”¯ä¸Šæ“ä½œï¼Œå¹¶ä¸”è¯¥åˆ†æ”¯æ˜¯æœ¬åœ°åˆ†æ”¯ã€‚å¦‚æœ develop åˆ†æ”¯éœ€è¦ rebase åˆ° master ä¸Šå»ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä¸‹æ“ä½œ 12345## branch developgit rebase masterget checkout master## ç”¨äºå°† `master` ä¸Šçš„ HEAD ç§»åŠ¨åˆ°æœ€æ–°çš„ commitget merge develop stashstash ç”¨äºä¸´æ—¶æŠ¥é”™å·¥ä½œç›®å½•çš„æ”¹åŠ¨ã€‚å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°ä»£ç å†™ä¸€åŠéœ€è¦åˆ‡åˆ†æ”¯æ‰“åŒ…çš„é—®é¢˜ï¼Œå¦‚æœè¿™æ—¶å€™ä½ ä¸æƒ³ commit çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤ã€‚ 1git stash ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥æš‚å­˜ä½ çš„å·¥ä½œç›®å½•ï¼Œåé¢æƒ³æ¢å¤å·¥ä½œç›®å½•ï¼Œåªéœ€è¦ä½¿ç”¨ 1git stash pop è¿™æ ·ä½ ä¹‹å‰ä¸´æ—¶ä¿å­˜çš„ä»£ç åˆå›æ¥äº† reflogreflog å¯ä»¥çœ‹åˆ° HEAD çš„ç§»åŠ¨è®°å½•ï¼Œå‡å¦‚ä¹‹å‰è¯¯åˆ äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡ git reflog çœ‹åˆ°ç§»åŠ¨ HEAD çš„å“ˆå¸Œå€¼ ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒHEAD çš„æœ€åä¸€æ¬¡ç§»åŠ¨è¡Œä¸ºæ˜¯ merge åï¼Œæ¥ä¸‹æ¥åˆ†æ”¯ new å°±è¢«åˆ é™¤äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰¾å› new åˆ†æ”¯ 12git checkout 37d9acagit checkout -b new PSï¼šreflog è®°å½•æ˜¯æ—¶æ•ˆçš„ï¼Œåªä¼šä¿å­˜ä¸€æ®µæ—¶é—´å†…çš„è®°å½•ã€‚ Resetå¦‚æœä½ æƒ³åˆ é™¤åˆšå†™çš„ commitï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®ç° 1git reset --hard HEAD^ ä½†æ˜¯ reset çš„æœ¬è´¨å¹¶ä¸æ˜¯åˆ é™¤äº† commitï¼Œè€Œæ˜¯é‡æ–°è®¾ç½®äº† HEAD å’Œå®ƒæŒ‡å‘çš„ branchã€‚ git å¸¸ç”¨æ“ä½œ$ git ch(checkout) -b develop åˆ›å»ºå¼€å‘åˆ†æ”¯develop $ git push æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ä»“åº“ $ git st(status) æŸ¥çœ‹å½“å‰åˆ†æ”¯å·¥ä½œåŒºã€æš‚å­˜åŒºçš„å·¥ä½œçŠ¶æ€ $ git diff diffæ–‡ä»¶çš„ä¿®æ”¹ $ git ci(commit) . æäº¤æœ¬æ¬¡ä¿®æ”¹ $ git fetch â€“all æ‹‰å–æ‰€æœ‰è¿œç«¯çš„æœ€æ–°ä»£ç  $ git merge origin/develop å¦‚æœæ˜¯å¤šäººåä½œï¼ŒmergeåŒäº‹çš„ä¿®æ”¹åˆ°å½“å‰åˆ†æ”¯ï¼ˆå…ˆäººåå·±åŸåˆ™ï¼‰ $ git merge origin/master ä¸Šçº¿ä¹‹å‰ä¿è¯å½“å‰åˆ†æ”¯ä¸è½åäºè¿œç«¯origin/masterï¼Œä¸€å®šè¦mergeè¿œç«¯origin/masteråˆ°å½“å‰åˆ†æ”¯ $ git push æ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç«¯ä»“åº“ $ git merge â€“no-ff origin/develop åŒäº‹review codeä¹‹åç®¡ç†å‘˜åˆå¹¶origin/developåˆ°è¿œç«¯ä¸»å¹²origin/master ğŸ‘‰ HEADï¼šå½“å‰commitå¼•ç”¨$ git version gitç‰ˆæœ¬ $ git branch æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯ $ git branch -r æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹çš„åˆ†æ”¯ $ git branch -a æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯ $ git branch -d åˆ é™¤æœ¬åœ°branchnameåˆ†æ”¯ $ git branch -m brancholdname branchnewname é‡å‘½ååˆ†æ”¯ $ git branch åˆ›å»ºbranchnameåˆ†æ”¯ $ git checkout åˆ‡æ¢åˆ†æ”¯åˆ°branchname $ git checkout -b ç­‰åŒäºæ‰§è¡Œä¸Šä¸¤æ­¥ï¼Œå³åˆ›å»ºæ–°çš„åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ $ git checkout â€“ xx/xx æ’¤é”€æœ¬æ–‡ä»¶çš„æ›´æ”¹ $ git pull origin master:master å°†è¿œç¨‹originä¸»æœºçš„masteråˆ†æ”¯åˆå¹¶åˆ°å½“å‰masteråˆ†æ”¯,å†’å·åé¢çš„éƒ¨åˆ†è¡¨ç¤ºå½“å‰æœ¬åœ°æ‰€åœ¨çš„åˆ†æ”¯ $ git pull origin master â€“allow-unrelated-histories å…è®¸åˆå¹¶ä¸¤ä¸ªä¸åŒé¡¹ç›®çš„å†å²è®°å½• $ git push origin -d åˆ é™¤è¿œç¨‹branchnameåˆ†æ”¯ $ git fetch â€“p æ›´æ–°åˆ†æ”¯ $ git status æŸ¥çœ‹æœ¬åœ°å·¥ä½œåŒºã€æš‚å­˜åŒºæ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€ $ git add xx æŠŠxxæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºå» $ git commit -m â€˜ â€˜ æäº¤æ–‡ä»¶ -m åé¢çš„æ˜¯æ³¨é‡Š $ git commit -am(-a -m) æäº¤æ‰€æœ‰çš„ä¿®æ”¹ï¼Œç­‰åŒäºä¸Šä¸¤æ­¥ $ git commit ./xx ç­‰åŒäºgit add ./xx + git commit]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack 4 å’Œ babel 7ç‰ˆæœ¬ï¼‰]]></title>
    <url>%2F2019%2F05%2F25%2F2019%2FMay%2FWebpack%2FREADME%2F</url>
    <content type="text"><![CDATA[ä»é›¶é…ç½®webpackï¼ˆåŸºäºwebpack 4 å’Œ babel 7ç‰ˆæœ¬ï¼‰webpack æ ¸å¿ƒæ¦‚å¿µ Entry: å…¥å£ Module: æ¨¡å—ï¼Œwebpackä¸­ä¸€åˆ‡çš†æ˜¯æ¨¡å— Chunk: ä»£ç åº“ï¼Œä¸€ä¸ªchunkç”±åå¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰² Loader: æ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ Plugin: æ‰©å±•æ’ä»¶ï¼Œåœ¨webpackæ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ… Output: è¾“å‡ºç»“æœ webpack æµç¨‹webpackå¯åŠ¨åä¼šä»Entryé‡Œé…ç½®çš„Moduleå¼€å§‹é€’å½’è§£æEntryä¾èµ–çš„æ‰€æœ‰Moduleã€‚æ¯æ‰¾åˆ°ä¸€ä¸ªModuleï¼Œå°±ä¼šæ ¹æ®é…ç½®çš„Loaderå»æ‰¾å‡ºå¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œå¯¹Moduleè¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå½“å‰çš„Moduleä¾èµ–çš„Moduleã€‚è¿™äº›æ¨¡å—ä¼šä»¥Entryä¸ºå•ä½è¿›è¡Œåˆ†ç»„ï¼Œä¸€ä¸ªEntryå’Œå…¶æ‰€æœ‰ä¾èµ–çš„Moduleè¢«åˆ†åˆ°ä¸€ä¸ªç»„ä¹Ÿå°±æ˜¯ä¸€ä¸ªChunkã€‚æœ€å¥½Webpackä¼šæŠŠæ‰€æœ‰Chunkè½¬æ¢æˆæ–‡ä»¶è¾“å‡ºã€‚åœ¨æ•´ä¸ªæµç¨‹ä¸­Webpackä¼šåœ¨æ°å½“çš„æ—¶æœºæ‰§è¡ŒPluginé‡Œå®šä¹‰çš„é€»è¾‘ã€‚ æœ€ç®€webpacké…ç½®é¦–å…ˆåˆå§‹åŒ–npmå’Œå®‰è£…webpackçš„ä¾èµ–ï¼š 12npm init -yyarn add webpack webpack-cli --dev é…ç½®webpack.config.jsæ–‡ä»¶ï¼š 12345678910const path = require('path');module.export = &#123; entry: path.resolve(__dirname, 'src/index.js'), output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'bundle.js', // æ­¤å¤„ä¸è®¾ç½®ï¼Œé»˜è®¤ä¸º main.js publicPath: '/' &#125;&#125; è¯´æ˜: publicPathä¸Šçº¿æ—¶é…ç½®çš„æ˜¯cdnçš„åœ°å€ã€‚ ä½¿ç”¨å‘½ä»¤è¿›è¡Œæ‰“åŒ…ï¼š 1webpack --mode production ä¹Ÿå¯ä»¥å°†å…¶é…ç½®åˆ°package.jsonä¸­çš„ scripts å­—æ®µã€‚å…¥å£æ–‡ä»¶ä¸ºsrc/index.jsï¼Œæ‰“åŒ…è¾“å‡ºåˆ°dist/bundle.jsã€‚ ä½¿ç”¨æ¨¡æ¿htmlhtml-webpack-plugin å¯ä»¥æŒ‡å®š template æ¨¡æ¿æ–‡ä»¶ï¼Œå°†ä¼šåœ¨ output ç›®å½•ä¸‹ï¼Œç”Ÿæˆ html æ–‡ä»¶ï¼Œå¹¶å¼•å…¥æ‰“åŒ…åçš„jsã€‚å®‰è£…ä¾èµ–ï¼š 1yarn add html-webpack-plugin --dev åœ¨ webpack.config.js å¢åŠ  plugins é…ç½®ï¼š 12345678910const HtmlWebpackPlugin = require('html-webpack-plugin');module.exports = &#123; // ... other code plugins: [ new HtmlWebpackPlugin(&#123; template: path.resolve(__dirname, 'src/index.html') &#125;) ]&#125; HtmlWebpackPlugin è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‚æ•°ï¼Œå¦‚titleï¼ˆhtmlçš„titleï¼‰ï¼Œminifyï¼ˆæ˜¯å¦è¦å‹ç¼©ï¼‰ï¼Œfilenameï¼ˆdistä¸­ç”Ÿæˆçš„htmlæ–‡ä»¶åï¼‰ç­‰ã€‚ é…ç½® webpack-dev-serverwebpack-dev-server æä¾›äº†ä¸€ä¸ªç®€å•çš„WebæœåŠ¡å™¨å’Œå®æ—¶çƒ­æ›´æ–°çš„èƒ½åŠ›ã€‚å®‰è£…ä¾èµ–ï¼š 1yarn add webpack-dev-server --dev åœ¨ webpck.config.js å¢åŠ  devServer é…ç½®ï¼š 12345678910const WebpackDevServer = require('webpack-dev-server');module.exports = &#123; // ... other code devServer: &#123; contentBase: './dist', port: '8080', host: 'localhost' &#125;&#125; åœ¨ package.json çš„ scripts å­—æ®µä¸­å¢åŠ ï¼š 1dev: 'webpack-dev-server --mode development' ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ npm run devï¼Œæ¥å¯åŠ¨æœåŠ¡ã€‚æ›´å¤šå…³äº webpack-dev-server æ”¯æŒåŠ è½½ css æ–‡ä»¶é€šè¿‡ä½¿ç”¨ä¸åŒçš„ style-loader å’Œ css-loaderï¼Œå¯ä»¥å°† css æ–‡ä»¶è½¬æ¢æˆjsæ–‡ä»¶ç±»å‹ã€‚å®‰è£…ä¾èµ–ï¼š 1yarn add style-loader css-loader --dev åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ã€‚ 12345678910111213module.exports = &#123; // ...other code module: &#123; rules: [ &#123; test: /\.css/, use: ['style-loader', 'css-loader'], exclude: /node_module/, include: path.resolve(__dirname, 'src') &#125; ] &#125;&#125; loader å¯ä»¥é…ç½®ä»¥ä¸‹å‚æ•°ï¼š test: åŒ¹é…å¤„ç†æ–‡ä»¶çš„æ‰©å±•åçš„æ­£åˆ™è¡¨è¾¾å¼ use: loaderçš„åç§° include/exclude: æ‰‹åŠ¨æŒ‡å®šå¿…é¡»å¤„ç†çš„æ–‡ä»¶å¤¹æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å¤¹ query: ä¸ºloaderæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹ å¦‚æœéœ€è¦ç»™loaderä¼ å‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨use + loadingçš„æ–¹å¼ï¼Œå¦‚ï¼š 12345678910111213141516171819module.exports = &#123; // other code module: &#123; rules: [ &#123; use: [ &#123; loader: 'style-loader', options: &#123; insertAt: 'top' &#125; &#125;, 'css-loader' ], // ... &#125; ] &#125;&#125; æ”¯æŒåŠ è½½å›¾ç‰‡ file-loader: è§£å†³cssç­‰æ–‡ä»¶ä¸­çš„å¼•å…¥å›¾ç‰‡è·¯å¾„é—®é¢˜ url-loader: å½“å›¾ç‰‡å°äºlimitçš„æ—¶å€™ä¼šæŠŠå›¾ç‰‡base64ç¼–ç ï¼Œå¤§äºlimitå‚æ•°çš„æ—¶å€™è¿˜æ˜¯ä½¿ç”¨file-loaderè¿›è¡Œæ‹·è´ å¦‚æœå¸Œæœ›å›¾ç‰‡å­˜æ”¾åœ¨å•ç‹¬çš„ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆéœ€è¦åˆ¶å®šoutputPath å®‰è£…ä¾èµ–ï¼š 1yarn add url-loader file-loader --dev åœ¨ webpack.config.js ä¸­å¢åŠ loaderçš„é…ç½®ï¼ˆå¢åŠ åœ¨ module.rulesçš„æ•°ç»„ä¸­ï¼‰ã€‚ 12345678910111213141516171819module.exports = &#123; // ...other code module: &#123; rules: [ &#123; test: /\.(gif|jpg|png|bmp|eot|woff|woff2|ttf|svg)/, use: [ &#123; loader: 'url-loader', options: &#123; limit: 8192, outputPath: 'images' &#125; &#125; ] &#125; ] &#125;&#125; æ”¯æŒç¼–è¯‘lesså’Œsassç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯ä½¿ç”¨lessæˆ–è€…sassç¼–å†™cssï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦åœ¨webpackä¸­è¿›è¡Œé…ç½®ã€‚å®‰è£…å¯¹åº”çš„ä¾èµ–ï¼š 12yarn add less less-loader --devyarn add sass sass-loader --dev åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ï¼ˆmodule.rulesæ•°ç»„ä¸­ï¼‰ã€‚ 12345678910111213141516171819module.exports = &#123; // .. other code module: &#123; rules: [ &#123; test: /\.less/, use: ['style-loader', 'css-loader', 'less-loader'], exclude: /node_modules/, include: path.resolve(__dirname, 'src') &#125;, &#123; test: /\.scss/, use: ['style-loader', 'css-loader', 'sass-loader'], exclude: /nodu_modules/, include: path.resolve(__dirname, 'src') &#125; ] &#125;&#125; æ”¯æŒè½¬ä¹‰ ES6/ES7/JSXES6/ES7/JSX è½¬ä¹‰éœ€è¦ Babel çš„ä¾èµ–ï¼Œæ”¯æŒè£…é¥°å™¨ 1yarn add @babel/core babel-loader @babel/preset-env @babel/preset-react @babel/plugin-proposal-decorators @babel/plugin-proposal-object-rest-spread --dev åœ¨ webpack.config.js ä¸­å¢åŠ  loader çš„é…ç½®ï¼ˆmodule.rules æ•°ç»„ä¸­ï¼‰ã€‚ 123456789101112131415161718192021module.exports = &#123; // ...other code module: &#123; rules: [ test: /\.jsx?$/, use: [ &#123; loader: 'babel-loader', options: &#123; presets: ['@babel/react'], plugins: [ ['@babel/plugin-proposal-decorators', &#123;'legacy': true&#125;] ] &#125; &#125; ], exclude: /nodu_modules/, include: path.resolve(__dirname, 'src') ] &#125;&#125; å‹ç¼©jsæ–‡ä»¶å®‰è£…ä¾èµ–ï¼š 1yarn add uglifyjs-webpack-plugin --dev åœ¨ webpack.config.js ä¸­å¢åŠ  optimization çš„é…ç½® 123456789101112const UglifyWebpackplugin = require('uglifyjs-webpack-plugin');module.exports = &#123; // ... other code optimization: &#123; minimizer: [ new UglifyWebpackPlugin(&#123; parallel: 4 &#125;) ] &#125;&#125; ä»¥ä¸Šæœ€æ–°ç‰ˆwebpackå·²ç»é»˜è®¤å¼€å¯uglifyjsï¼Œä¸éœ€è¦å•ç‹¬å®‰è£…pluginsä½†æ˜¯å®ƒæ˜¯å•çº¿ç¨‹å‹ç¼©çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨webpack-parallel-uglify-pluginï¼Œè§£å†³å¤šä¸ªjsæ‰“åŒ…å¹¶è¡Œå‹ç¼©çš„éœ€è¦ï¼Œä¼˜åŒ–æ‰“åŒ…æ•ˆç‡ 1yarn add webpack-parallel-uglify-plugin --dev åœ¨ webpack.config.js ä¸­å¢åŠ ï¼š 12345678910111213141516171819const WebpackParallelUglifyPlugin = require('webpack-parallel-uglify-plugin');module.exports = &#123; // other code plugins: [ new WebpackParallelUglifyPlugin(&#123; ugfilyJS: &#123; output: &#123; beautify: false, // æ˜¯å¦ä¿ç•™ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ comments: false, // æ˜¯å¦ä¿ç•™æ³¨é‡Š &#125;, compress: &#123; warnings: false, // åˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ—¶çš„è­¦å‘Šä¿¡æ¯, drop_console: true, // æ˜¯å¦åˆ é™¤ä»£ç ä¸­çš„consoleè¯­å¥ &#125; &#125; &#125;) ]&#125; åˆ†ç¦»cssï¼ˆå¦‚æœcssæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼‰å› ä¸ºCSSçš„ä¸‹è½½å’ŒJSå¯ä»¥å¹¶è¡Œï¼Œå½“ä¸€ä¸ªhtmlæ–‡ä»¶å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠcsså•ç‹¬æå–å‡ºæ¥åŠ è½½ 1yarn add mini-css-extract-plugin --dev åœ¨ webpack.config.js ä¸­å¢åŠ  plugins çš„é…ç½®ï¼Œå¹¶ä¸”å°† â€˜style-loaderâ€™ ä¿®æ”¹ä¸º { loader: MiniCssExtractPlugin.loader}ã€‚cssæ‰“åŒ…åœ¨å•ç‹¬çš„ç›®å½•ï¼Œé‚£ä¹ˆé…ç½®filenameã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243const MiniCssExtractPlugin = require('mini-css-extract-plugin');module.exports = &#123; module: &#123; rules: [ &#123; test: /\.css/, use: [ &#123; loader: MiniCssExtractPlugin.loader, &#125;, 'css-loader' ], exclude: /node_modules/, include: path.resolve(__dirname, 'src') &#125;, &#123; test: /\.less/, use: [ &#123; loader: MiniCssExtractPlugin.loader, &#125;, 'css-loader', 'less-loader' ], exclude: /node_modules/, include: path.resolve(__dirname, 'src') &#125;, &#123; test: /\.sass/, use: [ &#123; loader: MiniCssExtractPlugin.loader &#125;, 'css-loader', 'sass-loader' ], exclude: /node_modules/, include: path.resolve(__dirname, 'src') &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: 'css/[name].css' &#125;) ]&#125; å‹ç¼©cssæ–‡ä»¶å®‰è£…ä¾èµ–ï¼š 1yarn add optimiza-css-assets-webpack-plugin --dev åœ¨ webpack.config.js ä¸­çš„ optimization ä¸­å¢åŠ é…ç½® 12345678910const OptimizaCssAssetsWebpackPlugin = require('optimiza-css-assets-webpack-plugin');module.exports = &#123; // ... other code optimization: &#123; minimizer: [ new OptimizaCssAssetsWebpackPlugin() ] &#125;&#125; æ‰“åŒ…å‰å…ˆæ¸…ç©ºè¾“å‡ºç›®å½•1yarn add clean-webpack-plugin --dev åœ¨ webpack.config.js ä¸­å¢åŠ  plugins çš„é…ç½® 12345678const CleanWebpackPlugin = require('clean-webpack-plugin');module.exports = &#123; // ...other code plugins: [ new CleanWebpackPlugin() ]&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[This]]></title>
    <url>%2F2019%2F05%2F17%2F2019%2FMay%2FThis%2FREADME%2F</url>
    <content type="text"><![CDATA[this é»˜è®¤ç»‘å®š éšå¼ç»‘å®š ç¡¬ç»‘å®š newç»‘å®š é»˜è®¤ç»‘å®šé»˜è®¤ç»‘å®šï¼Œåœ¨ä¸èƒ½åº”ç”¨å…¶ä»–ç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚ 12345function sayHi() &#123; console.log('Hello', this.name);&#125;var name = 'achen';sayHi(); åœ¨è°ƒç”¨sayHi()æ—¶ï¼Œåº”ç”¨äº†é»˜è®¤ç»‘å®šï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefinedï¼Œundefinedä¸Šæ²¡æœ‰thiså¯¹è±¡ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œï¼Œé‚£ä¹ˆç»“æœæ˜¯ Hello, achenä½†æ˜¯å¦‚æœåœ¨nodeç¯å¢ƒä¸­è¿è¡Œï¼Œç»“æœå°±æ˜¯Hello, undefinedï¼Œè¿™æ˜¯å› ä¸ºnodeä¸­nameå¹¶ä¸æ˜¯æŒ‚åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„ã€‚ éšå¼ç»‘å®šå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å…¸å‹çš„å½¢å¼ä¸º XXX.fun()ã€‚ 123456789function sayHi() &#123; console.log('Hello', this.name);&#125;var person = &#123; name: 'achen', sayHi: sayHi&#125;;var name = 'achenjs';persin.sayHi(); ç¡¬ç»‘å®šï¼ˆæ˜¾ç¤ºç»‘å®šï¼‰é€šè¿‡callï¼Œapplyï¼Œbindçš„æ–¹å¼ï¼Œæ˜¾ç¤ºçš„æŒ‡å®šthisæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚callï¼Œapplyï¼Œbindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯å¯¹åº”å‡½æ•°çš„thisæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚callå’Œapplyçš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ å‚æ–¹å¼ä¸åŒã€‚callå’Œapplyéƒ½ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œè€Œbindæ–¹æ³•ä¸ä¼šã€‚ 12345678910function sayHi() &#123; console.log('Hello', this.name);&#125;var person = &#123; name: 'YvetteLau', sayHi: sayHi&#125;var name = 'Wiliam';var Hi = person.sayHi;Hi.call(person); // Hi.apply(person) newç»‘å®š ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹å€¼ç»™æ–°å¯¹è±¡ï¼Œå³thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç  è¿”å›æ–°å¯¹è±¡ 12345function SayHi(name) &#123; this.name = name;&#125;var Hi = new SayHi('achen');console.log(Hi.name); // achen è¾“å‡ºç»“æœä¸ºachenï¼ŒåŸå› æ˜¯å› ä¸ºåœ¨var Hi = new SayHi(â€˜achenâ€™); è¿™ä¸€æ­¥ï¼Œä¼šå°†SayHiä¸­çš„thisç»‘å®šåˆ°Hiå¯¹è±¡ä¸Šã€‚ ç»‘å®šä¼˜å…ˆçº§newç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š ç»‘å®šå¦å¤–å¦‚æœæˆ‘ä»¬å°†nullæˆ–è€…undefinedä½œä¸ºthisçš„ç»‘å®šå¯¹è±¡ä¼ å…¥callã€applyæˆ–è€…æ˜¯bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚ 12345678var foo = &#123; name: 'Selina',&#125;var name = 'Chirs';function bar() &#123; console.log(this.name);&#125;bar.call(null); // Chirs ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°æ˜¯ES6ä¸­æ–°å¢çš„ï¼Œå®ƒå’Œæ™®é€šå‡½æ•°æœ‰ä¸€äº›åŒºåˆ«ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thisç»§æ‰¿äºå¤–å±‚ä»£ç åº“ä¸­çš„thisã€‚ç®­å¤´å‡½æ•°åœ¨ä½¿ç”¨ä¸­ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œç»§æ‰¿çš„æ˜¯å¤–å±‚ä»£ç å—çš„thisã€‚ ä¸å¯ä»¥å½“åšæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨restå‚æ•°ä»£æ›¿ã€‚ ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ã€‚ ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œæ‰€ä»¥ä¸èƒ½ç”¨callã€applyã€bindè¿™äº›æ–¹æ³•æ”¹å˜thisçš„æŒ‡å‘ã€‚ 12345678910111213141516171819202122232425var obj = &#123; hi: function() &#123; console.log(this); return () =&gt; &#123; console.log(this); &#125; &#125;, sayHi: function() &#123; return function() &#123; console.log(this); return () =&gt; &#123; console.log(this); &#125; &#125; &#125;, say: () =&gt; &#123; console.log(this); &#125;&#125;;let hi = obj.hi(); // objhi(); // objlet sayHi = obj.sayHi();let fun1 = sayHi(); // windowfun1(); // windowobj.say(); // window]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®ç°ä¸€ä¸ªpromise]]></title>
    <url>%2F2019%2F05%2F15%2F2019%2FMay%2FPromise%2FmyPromise%2F</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970const PENDING = 'PENDING';const RESOLVED = 'RESOLVED';const REJECTED = 'REJECTED';function MyPromise(fn) &#123; const that = this; that.value = null; that.state = PENDING; that.resolvedCallbacks = []; that.rejectedCallbacks = []; function resolve(value) &#123; if (value instanceof MyPromise) &#123; return value.then(resolve, reject); &#125; if (that.state === PENDING) &#123; that.state = RESOLVED; that.value = value; that.resolvedCallbacks.map(cb =&gt; cb(that.value)); &#125; &#125; function reject(value) &#123; if (that.state === PENDING) &#123; that.state = REJECTED; that.value = value; that.rejectedCallbacks.map(cb =&gt; cb(that.value)); &#125; &#125; try &#123; fn(resolve, reject); &#125; catch(e) &#123; reject(e); &#125;&#125;MyPromise.prototype.then = function(onFulfilled, onRejected) &#123; const that = this; onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : v =&gt; v; onRejected = typeof onRejected === 'function' ? onRejected : r =&gt; &#123; throw r &#125;; if (that.state === PENDING) &#123; that.resolvedCallbacks.push(onFulfilled); that.rejectedCallbacks.push(onRejected); &#125; if (that.state === RESOLVED) &#123; onFulfilled(that.value); &#125; if (that.state === REJECTED) &#123; onRejected(that.value); &#125; return that;&#125;new MyPromise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(111); &#125;, 0);&#125;).then(value =&gt; &#123; console.log(value);&#125;).then(value =&gt; &#123; console.log(value);&#125;)]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶]]></title>
    <url>%2F2019%2F05%2F13%2F2019%2FMay%2FJqPlugin%2FREADME%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•å†™ä¸€ä¸ªjQueryæ’ä»¶jQuery æ’ä»¶å¼€å‘æ¨¡å¼jQueryçš„æ’ä»¶å¼€å‘æ¨¡å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š é€šè¿‡$.extend()æ¥æ‰©å±•jQuery é€šè¿‡$.fnå‘jQueryæ·»åŠ æ–°çš„æ–¹æ³• é€šè¿‡$.widget()åº”ç”¨jQuery UIçš„éƒ¨ä»¶å·¥å‚æ–¹å¼åˆ›å»º $.extend()1234567891011121314$.fn.extend(&#123; check: function() &#123; return this.each(function() &#123; this.checked = true; &#125;), &#125; uncheck: function() &#123; return this.each(function() &#123; this.checked = false; &#125;) &#125;&#125;)$("input[type='checkbox']").check(); $.fn12345678910function myPlugin($ele, options) &#123;&#125;;myPlugin.prototype = &#123; method1: function() &#123;&#125;, method2: function() &#123;&#125;,&#125;;$.fn.myplugin = function(options) &#123; new myPlugin(this, options);&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSç»§æ‰¿çš„å®ç°æ–¹å¼]]></title>
    <url>%2F2019%2F05%2F11%2F2019%2FMay%2FExtends%2FREADME%2F</url>
    <content type="text"><![CDATA[JSç»§æ‰¿çš„å®ç°æ–¹å¼1234567891011class Animal &#123; this.name = 'Animal'; this.sleep = function() &#123; console.log(this.name + '~~~'); &#125;&#125;Animal.prototype.eat = function(food) &#123; console.log(this.name + ' eat: ' + food);&#125; 1. åŸå‹é“¾ç»§æ‰¿æ ¸å¿ƒï¼š å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹ 12345678910function Cat() &#123;&#125;Cat.prototype = new Animal();Cat.prototype.name = 'cat';var cat = new cat();console.log(cat.name); // catconsole.log(cat.eat('fish')); // cat eat: fishconsole.log(cat.sleep()); // cat~~~console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼š éå¸¸çº¯ç²¹çš„ç»§æ‰¿å…³ç³»ï¼Œå®ä¾‹æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹ çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•/åŸå‹å±æ€§ï¼Œå­ç±»éƒ½èƒ½è®¿é—®åˆ° ç®€å•ï¼Œæ˜“äºå®ç° ç¼ºç‚¹ï¼š è¦æƒ³ä¸ºå­ç±»æ–°å¢å±æ€§å’Œæ–¹æ³•ï¼Œå¿…é¡»è¦åœ¨new Animal()è¿™æ ·çš„è¯­å¥ä¹‹åæ‰§è¡Œï¼Œä¸èƒ½æ”¾åˆ°æ„é€ å™¨ä¸­ æ— æ³•å®ç°å¤šç»§æ‰¿ æ¥è‡ªåŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº« åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ 2. æ„é€ ç»§æ‰¿æ ¸å¿ƒï¼šä½¿ç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å¢å¼ºå­ç±»å®ä¾‹ï¼Œç­‰äºæ˜¯å¤åˆ¶çˆ¶ç±»çš„å®ä¾‹å±æ€§ç»™å­ç±»ï¼ˆæ²¡ç”¨åˆ°åŸå‹ï¼‰ 12345678910function Cat() &#123; Animal.apply(this); // Animal.call(this); this.name = 'cat';&#125;var cat = new Cat();console.log(cat.name); // catconsole.log(cat.sleep()); // cat~~~console.log(cat instanceof Animal); // falseconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼š è§£å†³äº†1ä¸­ï¼Œå­ç±»å®ä¾‹å…±äº«çˆ¶ç±»å¼•ç”¨å±æ€§çš„é—®é¢˜ åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œå¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•° å¯ä»¥å®ç°å¤šç»§æ‰¿ï¼ˆcallå¤šä¸ªçˆ¶ç±»å¯¹è±¡ï¼‰ ç¼ºç‚¹ï¼š å®ä¾‹å¹¶ä¸æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œåªæ˜¯å­ç±»çš„å®ä¾‹ åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³• æ— æ³•å®ç°å‡½æ•°å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»éƒ½æœ‰çˆ¶ç±»å®ä¾‹å‡½æ•°çš„å‰¯æœ¬ï¼Œå½±å“æ€§èƒ½ 3. å®ä¾‹ç»§æ‰¿æ ¸å¿ƒï¼šä¸ºçˆ¶ç±»å®ä¾‹æ·»åŠ æ–°ç‰¹æ€§ï¼Œåšä¸ºå­ç±»å®ä¾‹è¿”å› 1234567891011function Cat(name) &#123; var instance = new Animal(); instance.name = name || 'Tom'; return instance;&#125;var cat = new Cat();console.log(cat.name); // Tomconsole.log(cat.sleep()); // Tom~~~console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); // false ç‰¹ç‚¹ï¼š ä¸é™åˆ¶è°ƒç”¨æ–¹å¼ï¼Œä¸ç®¡äº‹new å­ç±»ï¼ˆï¼‰è¿˜æ˜¯å­ç±»ï¼ˆï¼‰ï¼Œè¿”å›çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„æ•ˆæœ ç¼ºç‚¹ï¼š å®ä¾‹æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¸æ˜¯å­ç±»çš„å®ä¾‹ ä¸æ”¯æŒå¤šç»§æ‰¿ 4. æ‹·è´ç»§æ‰¿1234567891011121314function Cat() &#123; var animal = new Animal(); for (var i in animal) &#123; Cat.prototype[i] = animal[i]; &#125; Cat.prototype.name = name || 'Tom';&#125;var cat = new Cat();console.log(cat.name); // Tomconsole.log(cat.sleep()); // Tom~~~console.log(cat instanceof Animal); // falseconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼š æ”¯æŒå¤šç»§æ‰¿ ç¼ºç‚¹ï¼š æ•ˆç‡è¾ƒä½ï¼Œå†…å­˜å ç”¨é«˜ï¼ˆå› ä¸ºè¦æ‹·è´çˆ¶ç±»çš„å±æ€§ï¼‰ æ— æ³•è·å–çˆ¶ç±»ä¸å¯æšä¸¾çš„æ–¹æ³•ï¼ˆä¸å¯æšä¸¾æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨for in è®¿é—®åˆ°ï¼‰ 5. ç»„åˆç»§æ‰¿æ ¸å¿ƒï¼šé€šè¿‡è°ƒç”¨çˆ¶ç±»æ„é€ ï¼Œç»§æ‰¿çˆ¶ç±»çš„å±æ€§å¹¶ä¿ç•™ä¼ å‚çš„ä¼˜ç‚¹ï¼Œç„¶åé€šè¿‡å°†çˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹ï¼Œå®ç°å‡½æ•°å¤ç”¨ 123456789101112function Cat(name) &#123; Animal.call(this); this.name = name || 'Tom';&#125;Cat.prototype = new Animal();Cat.prototype.constructor = Cat; // ä¿®å¤Catçš„æ„é€ å‡½æ•°var cat = new Cat();console.log(cat.name); // Tomconsole.log(cat.sleep()); // Tom~~~console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼š å¼¥è¡¥äº†æ–¹å¼2çš„ç¼ºé™·ï¼Œå¯ä»¥ç»§æ‰¿å®ä¾‹å±æ€§/æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³• æ—¢æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹ ä¸å­˜åœ¨å¼•ç”¨å±æ€§å…±äº«é—®é¢˜ å¯ä¼ å‚ å‡½æ•°å¯å¤ç”¨ ç¼ºç‚¹ï¼š è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹ï¼ˆå­ç±»å®ä¾‹å°†å­ç±»åŸå‹ä¸Šçš„é‚£ä»½å±è”½äº†ï¼‰ 6. å¯„ç”Ÿç»„åˆç»§æ‰¿æ ¸å¿ƒï¼šé€šè¿‡å¯„ç”Ÿæ–¹å¼ï¼Œç æ‰çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œè¿™æ ·ï¼Œåœ¨è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåˆå§‹åŒ–ä¸¤æ¬¡å®ä¾‹æ–¹æ³•/å±æ€§ï¼Œé¿å…çš„ç»„åˆç»§æ‰¿çš„ç¼ºç‚¹ 12345678910111213141516171819function Cat(name) &#123; Animal.call(this); this.name = name || 'Tom';&#125;(function() &#123; // åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®ä¾‹æ–¹æ³•çš„ç±» var Super = function() &#123;&#125;; Super.prototype = Animal.prototype; // å°†å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹ Cat.prototype = new Super(); Cat.prototype.constructor = Cat; // ä¿®å¤Catçš„æ„é€ å‡½æ•°&#125;)();var cat = new Cat();console.log(cat.name); // Tomconsole.log(cat.sleep()); // Tom~~~console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); //true ç‰¹ç‚¹ï¼š å ªç§°å®Œç¾ ç¼ºç‚¹ï¼š å®ç°è¾ƒä¸ºå¤æ‚]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿®é¥°å™¨çš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F05%2F09%2F2019%2FMay%2FDecorator%2FREADME%2F</url>
    <content type="text"><![CDATA[ç”±äºä½¿ç”¨äº†decorator, nodeä¸ç”¨æ­£å¸¸è¯†åˆ«ï¼Œéœ€è¦ä½¿ç”¨babelè½¬æ¢ 1$ babel-node test.js 1. ç±»ä¿®é¥°å™¨ï¼ˆåªæœ‰ä¸€ä¸ªå‚æ•°ï¼‰target: æŒ‡å‘ç±»ï¼Œå¦‚æœæ˜¯ç±»å‹æ˜¯functionï¼Œåˆ™æŒ‡å‘MyFunction.prototype 123456function testable(target) &#123; target.isTestable = false;&#125;@testabelclass MyTestableClass &#123;&#125; ä»¥ä¸Šä»£ç ï¼Œ@testableå°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒä¸ºMyTestableClassè¿™ä¸ªç±»æ·»åŠ äº†ä¸€ä¸ªé™æ€å±æ€§isTestable 123456789function testable(isTestable) &#123; return function(target) &#123; target.isTestable = isTestable; target.prototype.name = 'achen'; &#125;&#125;@testabel(false)class MyTestabelClass &#123;&#125; ä»¥ä¸Šä»£ç ï¼Œå‘Šè¯‰æˆ‘ä»¬@testableä½•å¦‚ä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”å¦‚ä½•ä¸ºç±»æ·»åŠ åŸå‹å±æ€§æˆ–è€…æ–¹æ³•ã€‚ 2. æ–¹æ³•ä¿®é¥°å™¨ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼‰target: æ–¹æ³•æ‰€åœ¨çš„ç±»name: æ–¹æ³•åç§°descriptor: æè¿°å¯¹è±¡12345678910111213141516171819202122class Math &#123; @log add(a, b) &#123; return a + b; &#125;&#125;function log(target, name, descriptor) &#123; var oldValue = descriptor.value; descriptor.value = function() &#123; console.log(`Calling $&#123;name&#125; with`, arguments); return oldValue.apply(this, arguments); &#125; return descriptor;&#125;const math = new Math();math.add(2, 4); ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿä¿®é¥°å™¨åªèƒ½ç”¨äºç±»å’Œç±»çš„æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡123456789var conuter = 0;var add = function() &#123; counter++;&#125;;@addfunction foo() &#123;&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ]]></title>
    <url>%2F2019%2F05%2F07%2F2019%2FMay%2FCurry%2FREADME%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿå®ç° sum(1)(2)(3) è¿”å›ç»“æœæ˜¯1,2,3ä¹‹å’Œå‡½æ•°æŸ¯é‡ŒåŒ–ï¼šæŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•° 1234567function sum(a) &#123; return function(b) &#123; return function(c) &#123; return a+b+c; &#125; &#125;&#125; å¼•ç”³ï¼šå®ç°ä¸€ä¸ªcurryå‡½æ•°ï¼Œå°†æ™®é€šå‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–123456789101112131415161718function curry(fn, args = []) &#123; return function() &#123; let rest = [...args, ...arguments]; if (rest.length &lt; fn.length) &#123; return curry.call(this, fn, rest); &#125; else &#123; return fn.apply(this, rest); &#125; &#125;&#125;//testfunction sum(a,b,c) &#123; return a+b+c;&#125;let sumFn = curry(sum);console.log(sumFn(1)(2)(3)); //6console.log(sumFn(1)(2, 3)); //6]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸è§çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜]]></title>
    <url>%2F2019%2F05%2F05%2F2019%2FMay%2FCompatible%2FREADME%2F</url>
    <content type="text"><![CDATA[å¸¸è§çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜htmlä¸­çš„å…¼å®¹é—®é¢˜ä¸åŒæµè§ˆå™¨çš„æ ‡ç­¾é»˜è®¤çš„å¤–è¡¥ä¸å’Œå†…è¡¥ä¸ä¸åŒ åœºæ™¯ï¼šéšä¾¿å†™å‡ ä¸ªæ ‡ç­¾ï¼Œä¸åŠ æ ·å¼æ§åˆ¶çš„æƒ…å†µä¸‹ï¼Œå„è‡ªçš„marginå’Œpaddingå·®å¼‚è¾ƒå¤§ã€‚ è§£å†³æ–¹æ³•ï¼šä¸Šæ¥å…ˆæ¶ˆé™¤é»˜è®¤æ ·å¼* {margin: 0, padding: 0} å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginçš„æƒ…å†µä¸‹ï¼Œåœ¨IE6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ï¼ˆå³åŒå€è¾¹è·bugï¼‰ åœºæ™¯ï¼šå¸¸è§ç—‡çŠ¶æ˜¯IE6åé¢çš„ä¸€å—è¢«é¡¶åˆ°ä¸‹ä¸€è¡Œ; è§£å†³æ–¹æ³•ï¼šåœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥display: inline-block; å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ IE6 ä¸­z-indexå¤±æ•ˆ åœºæ™¯ï¼šå…ƒç´ çš„çˆ¶çº§å…ƒç´ è®¾ç½®çš„z-indexä¸º1ï¼Œé‚£ä¹ˆå…¶å­çº§å…ƒç´ å†è®¾ç½®z-indexæ—¶ä¼šå¤±æ•ˆï¼Œå…¶å±‚çº§ä¼šç»§æ‰¿çˆ¶çº§å…ƒç´ çš„è®¾ç½®ï¼Œé€ æˆæŸäº›å±‚çº§è°ƒæ•´ä¸Šçš„bug åŸå› ï¼šz-indexèµ·ä½œç”¨æœ‰ä¸ªå‰æï¼Œå°±æ˜¯å…ƒç´ çš„positionå±æ€§è¦æ˜¯relativeã€absoluteæˆ–è€…fixedã€‚ è§£å†³æ–¹æ¡ˆï¼š1. position: relative æ”¹ä¸º position: absolute; 2. å»é™¤æµ®åŠ¨; 3. æµ®åŠ¨å…ƒç´ æ·»åŠ positionå±æ€§ï¼ˆå¦‚relativeï¼Œabsoluteç­‰ï¼‰ã€‚ åœ¨å†™aæ ‡ç­¾çš„æ ·å¼ï¼Œå†™çš„æ ·å¼æ²¡æœ‰æ•ˆæœï¼Œå…¶å®åªæ˜¯å†™çš„æ ·å¼è¢«è¦†ç›–äº† æ­£ç¡®çš„aæ ‡ç­¾é¡ºåºï¼šlink/visited/hover/active 24ä½pngå›¾ç‰‡ï¼ŒIE6ä¸­ä¸å…¼å®¹é€æ˜åº•å„¿ è§£å†³æ–¹å¼ï¼š1. ä½¿ç”¨8ä½pngå›¾ç‰‡; 2. ä¸ºie6å‡†å¤‡ä¸€å¥—ç‰¹æ®Šçš„å›¾ç‰‡ jsåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„å…¼å®¹é—®é¢˜äº‹ä»¶ç›‘å¬çš„å…¼å®¹ IEä¸æ”¯æŒaddEventListener; è§£å†³ï¼šç»™IEä½¿ç”¨attachEvent 12345678910111213141516171819var addHandler = function(e, type, handler) &#123; if (e.addEventListener) &#123; e.addEventListener(type, handler, false); &#125; else if (e.attachEvent) &#123; e.attachEvent('on' + type, handler); &#125; else &#123; e['on' + type] = handler; &#125;&#125;var removeHandler = function(e, type, handler) &#123; if (e.removeEventListener) &#123; e.removeEventListener(type, handler, false); &#125; else if (e.detachEvent) &#123; e.detachEvent('on' + type, handler); &#125; else &#123; on['on' + type] = null &#125;&#125; event.targeyçš„å…¼å®¹ï¼Œå¼•å‘äº‹ä»¶çš„DOMå…ƒç´ ã€‚ IE 6789ä¸æ”¯æŒevent.target è§£å†³æ–¹æ³•ï¼ševent.srcElement; 1target = event.target || event.srcElement; é˜»æ­¢ç³»ç»Ÿé»˜è®¤çš„å…¼å®¹ IE 6789ä¸æ”¯æŒevent.preventDefault; 1event.preventDefault ? event.preventDefault() : event.returnValue = false é˜»æ­¢äº‹ä»¶å†’æ³¡çš„å…¼å®¹ IE 6789ä¸æ”¯æŒevent.stopPropagation; 1event.stopPropagation ? event.stopPropagation() : event.cancelBubble = false]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„é€ æ–¹æ³•constructor]]></title>
    <url>%2F2019%2F05%2F03%2F2019%2FMay%2FClasses%2FREADME%2F</url>
    <content type="text"><![CDATA[æ„é€ æ–¹æ³•constructoræ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–classåˆ›å»ºçš„å¯¹è±¡çš„ç‰¹æ®Šæ–¹æ³•ã€‚æè¿° åœ¨ä¸€ä¸ªç±»ä¸­åªèƒ½æœ‰ä¸€ä¸ªåå«â€constructorâ€çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸€ä¸ªç±»ä¸­å‡ºç°å¤šæ¬¡å°†ä¼šæŠ›å‡ºSyntaxErroré”™è¯¯ã€‚ åœ¨ä¸€ä¸ªæ„é€ æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨superå…³é”®å­—æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ æ–¹æ³• å¦‚æœæ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåˆ™ä¼šæ·»åŠ é»˜è®¤çš„construtoræ–¹æ³•ã€‚ å¦‚æœä¸æŒ‡å®šä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆconstructorï¼‰ å¦‚æœä¸æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚å¯¹äºåŸºç±»ï¼Œé»˜è®¤æ„é€ å‡½æ•°æ˜¯ï¼š 1constructor() &#123;&#125; å¯¹äºæ´¾ç”Ÿç±»ï¼Œé»˜è®¤æ„é€ å‡½æ•°æ˜¯ï¼š 123constructor(...args) &#123; super(...args);&#125; extendsextendså…³é”®å­—ç”¨äºç±»å£°æ˜æˆ–è€…ç±»è¡¨è¾¾å¼ä¸­ï¼Œä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œè¯¥ç±»æ˜¯å¦ä¸€ä¸ªç±»çš„å­ç±»ã€‚æè¿° extendså…³é”®å­—ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ™®é€šç±»æˆ–è€…å†…å»ºå¯¹è±¡çš„å­ç±»ç»§æ‰¿çš„.prototypeå¿…é¡»æ˜¯ä¸€ä¸ªObjectæˆ–è€…nullã€‚ staticç±»ï¼ˆclassï¼‰é€šè¿‡staticå…³é”®å­—å®šä¹‰é™æ€æ–¹æ³•ã€‚ä¸èƒ½åœ¨ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œè€Œåº”è¯¥é€šè¿‡ç±»æœ¬èº«è°ƒç”¨ã€‚è¿™äº›é€šå¸¸æ˜¯å®ç”¨ç¨‹åºæ–¹æ³•ï¼Œä¾‹å¦‚åˆ›å»ºæˆ–å…‹éš†å¯¹è±¡çš„åŠŸèƒ½ 123456class ClassWithStaticMethod &#123; static staticMethod() &#123; return 'static method has been called.'; &#125;&#125;ClassWithStaticMethod.staticMethod(); è°ƒç”¨é™æ€æ–¹æ³• ä»å¦ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»–é™æ€æ–¹æ³•ï¼Œå¯ä½¿ç”¨thiså…³é”®å­— 12345678class StaticMethodCall &#123; static staticMethod() &#123; return 'Static method has been called'; &#125; static anotherStaticMethod() &#123; return this.staticMethod() + ' from another static method'; &#125;&#125; ä»ç±»çš„æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•ï¼Œéé™æ€æ–¹æ³•ä¸­ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨thiså…³é”®å­—æ¥è®¿é—®é™æ€æ–¹æ³•ã€‚è€Œæ˜¯è¦ç”¨ç±»åæ¥è°ƒç”¨ï¼›CLASSNAME.STATIC_METHOD_NAME()ï¼Œæˆ–è€…ç”¨æ„é€ å‡½æ•°çš„å±æ€§æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼›this.constructor.STATIC_METHOD_NAME()ã€‚ 1234567891011class StaticMethodCall &#123; constructor() &#123; console.log(StaticMethodCall.staticMethod()); // 'static method has been called.' console.log(this.constructor.staticMethod()); // 'static method has been called.' &#125; static staticMethod() &#123; return 'static method has been called.'; &#125;&#125; è¡¥å…… ç›®å‰ECMAScriptï¼Œclassä¸­è¿˜æ²¡æœ‰å®šä¹‰Privateï¼ˆç§æœ‰å±æ€§ï¼‰çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡çº¦å®šï¼Œç”¨ä¸‹åˆ’çº¿æ¥æ ‡è®°å®ƒä»¬ã€‚ 123456789class Car &#123; _milesDriven = 0; drive(distance) &#123; this._milesDriven += distance; &#125; getMilesDriven() &#123; return this._milesDriven; &#125;&#125; åœ¨ä¸Šé¢çš„äº‹ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¾é Carçš„å®ä¾‹è°ƒç”¨getMilesDrivenæ–¹æ³•æ¥è·å–åˆ°å®ƒçš„ç§æœ‰å±æ€§_milesDrivenã€‚ä½†æ˜¯ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆèƒ½ä½¿_milesDrivenæˆä¸ºç§æœ‰çš„ï¼Œæ‰€ä»¥ä»»ä½•å®ä¾‹éƒ½å¯ä»¥è®¿é—®å®ƒã€‚ 123const tesla = new Cal();tesla.drive(10);console.log(tesla._milesDriven); ç›®å‰Class Fieldsæœ‰ä¸ªææ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡#åˆ›å»ºç§æœ‰å­—æ®µã€‚ 1234567891011121314class Car &#123; #milesDriven = 0; drive(distance) &#123; this.#milesDriven += distance; &#125; getMilesDriven() &#123; return this.#milesDriven; &#125;&#125;const tesla = new Car()tesla.drive(10)tesla.getMilesDriven() // 10tesla.#milesDriven // Invalid]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[callã€applyæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿcallã€applyå’Œbindçš„å†…éƒ¨å®ç°]]></title>
    <url>%2F2019%2F05%2F01%2F2019%2FMay%2FBind%2FREADME%2F</url>
    <content type="text"><![CDATA[callã€applyæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿcallã€applyå’Œbindçš„å†…éƒ¨å®ç°callã€applyçš„åŠŸèƒ½ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºä¼ å‚çš„æ–¹å¼ä¸ä¸€æ ·ï¼š fn.call(obj, arg1, arg2, â€¦)ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œåˆ†åˆ«æä¾›çš„å‚æ•°ï¼ˆå‚æ•°çš„åˆ—è¡¨ï¼‰ã€‚ fn.apply(obj, [argsArray])ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thiså€¼ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„å¯¹è±¡ï¼‰æä¾›å‚æ•°ã€‚ callæ ¸å¿ƒ å°†å‡½æ•°è®¾ä¸ºä¼ å…¥å‚æ•°çš„å±æ€§ æŒ‡å®šthisåˆ°å‡½æ•°å¹¶ä¼ å…¥ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•° å¦‚æœä¸ä¼ å…¥å‚æ•°æˆ–è€…å‚æ•°ä¸ºnullï¼Œé»˜è®¤æŒ‡å‘ä¸º window/global åˆ é™¤å‚æ•°ä¸Šçš„å‡½æ•° 123456789101112131415161718192021222324252627282930Function.prototype.call = function(context) &#123; /* * å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆthisæŒ‡å‘ window/global * å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„ä¸æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ */ if (!context) &#123; // contextä¸ºnullæˆ–è€…æ˜¯undefined // åˆ¤æ–­æ˜¯æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯nodeç¯å¢ƒ context = typeof window === 'undefined' ? global : window; &#125; context.fn = this; // thisæŒ‡å‘æ˜¯å½“å‰çš„å‡½æ•°ï¼ˆFunctionçš„å®ä¾‹ï¼‰ let rest = [...arguments].slice(1); // è·å–é™¤äº†thisæŒ‡å‘å¯¹è±¡ä»¥å¤–çš„å‚æ•°ï¼Œç©ºæ•°ç»„sliceåè¿”å›çš„ä»ç„¶æ˜¯ç©ºæ•°ç»„ let result = context.fn(...rest); // éšå¼ç»‘å®šï¼Œå½“å‰å‡½æ•°çš„thisæŒ‡å‘äº†context delete context.fn; return result;&#125;// test codevar foo = &#123; name: 'Selina'&#125;;var name = 'Chirs';function bar(job, age) &#123; console.log(this.name); console.log(job, age);&#125;bar.call(foo, 'programmer', 20);// Selina programmer, 20bar.call(null, 'teacher', 25);// browerç¯å¢ƒï¼š Chirs teacher, 25ï¼› nodeç¯å¢ƒï¼š undefined teacher, 25 applyæ ¸å¿ƒapplyçš„å®ç°å’Œcallå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ä»–ä»¬çš„å‚æ•°ä¸ä¸€æ ·ï¼Œapplyçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„ã€‚ 123456789101112131415161718192021222324252627282930313233343536Function.prototype.apply = function(context, rest) &#123; /* * å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆthisæŒ‡å‘ window/global * å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„ä¸æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆå¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ */ if (!context) &#123; // contextä¸ºnullæˆ–è€…æ˜¯undefined // åˆ¤æ–­æ˜¯æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯nodeç¯å¢ƒ context = typeof window === 'undefined' ? global : window; &#125; context.fn = this; let result; if (rest == null) &#123; // undefined æˆ–è€… null ä¸æ˜¯ Iterator å¯¹è±¡ï¼Œä¸èƒ½è¢«... result = context.fn(rest); &#125; else if (typeof rest === 'object') &#123; result = context.fn(...rest); &#125; delete result.fn; return result;&#125;// test codevar foo = &#123; name: 'Selina'&#125;;var name = 'Chirs';function bar(job, age) &#123; console.log(this.name); console.log(job, age);&#125;bar.apply(foo, ['programmer', 20]);// Selina programmer, 20bar.apply(null, ['teacher', 25]);// browerç¯å¢ƒï¼š Chirs teacher, 25ï¼› nodeç¯å¢ƒï¼š undefined teacher, 25 bindæ ¸å¿ƒbind å’Œ call/apply æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ï¼Œä¸€ä¸ªå‡½æ•°è¢« call/apply çš„æ—¶å€™ï¼Œä¼šç›´æ¥è°ƒç”¨ï¼Œä½†æ˜¯ bindä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind()çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„thisï¼Œä¹‹åçš„ä¸€ç³»åˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚ 12345678910111213141516171819202122232425Function.prototype.bind = function(context) &#123; if (typeof this !== 'function') &#123; throw new TypeError('not a function'); &#125; let self = this; let args = [...arguments].slice(1); function Fn() &#123;&#125;; Fn.prototype = this.prototype; let bound = function() &#123; let res = [...args, ...arguments]; // bindä¼ é€’çš„å‚æ•°å’Œå‡½æ•°è°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°æ‹¼æ¥ context = this instanceof Fn ? this : context || this; return self.apply(context, res); &#125; // åŸå‹é“¾ bound.prototype = new Fn(); return bound;&#125;var name = 'Jack';function person(age, job, gender)&#123; console.log(this.name , age, job, gender);&#125;var Yve = &#123;name : 'Yvette'&#125;;let result = person.bind(Yve, 22, 'enginner')('female');]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[fileReaderè¯»å–æ–‡ä»¶ï¼Œå®ç°å›¾ç‰‡æœ¬åœ°é¢„è§ˆ]]></title>
    <url>%2F2018%2F10%2F09%2FfileReader%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[FileReaderFileReader å¯¹è±¡å…è®¸Webåº”ç”¨ç¨‹åºå¼‚æ­¥è¯»å–å­˜å‚¨åœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šçš„æ–‡ä»¶(æˆ–åŸå§‹æ•°æ®ç¼“å†²åŒº)çš„å†…å®¹,ä½¿ç”¨ File æˆ– Blob å¯¹è±¡æŒ‡å®šè¦è¯»å–çš„æ–‡ä»¶æˆ–æ•°æ®ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªFileReaderå®ä¾‹ï¼š1var reader = new FileReader(); æ–¹æ³• æ–¹æ³• æè¿° abort() ä¸­æ­¢è¯»å–æ“ä½œã€‚åœ¨è¿”å›æ—¶ï¼ŒreadyStateå±æ€§ä¸ºDONEã€‚ readAsArrayBuffer() å¼€å§‹è¯»å–æŒ‡å®šçš„ Blobä¸­çš„å†…å®¹, ä¸€æ—¦å®Œæˆ, result å±æ€§ä¸­ä¿å­˜çš„å°†æ˜¯è¢«è¯»å–æ–‡ä»¶çš„ ArrayBuffer æ•°æ®å¯¹è±¡. readAsBinaryString() å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«æ‰€è¯»å–æ–‡ä»¶çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ã€‚ readAsDataURL() å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«ä¸€ä¸ªdata: URLæ ¼å¼çš„å­—ç¬¦ä¸²ä»¥è¡¨ç¤ºæ‰€è¯»å–æ–‡ä»¶çš„å†…å®¹ readAsText() å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ä»¥è¡¨ç¤ºæ‰€è¯»å–çš„æ–‡ä»¶å†…å®¹ã€‚ å…·ä½“äº‹ä¾‹input fileå®ç°æœ¬åœ°å›¾ç‰‡é¢„è§ˆ123456789var inputBox = document.getElementById(&quot;inputBox&quot;);inputBox.addEventListener(&quot;change&quot;,function()&#123; var reader = new FileReader(); reader.readAsDataURL(inputBox.files[0]);//å‘èµ·å¼‚æ­¥è¯·æ±‚ reader.onload = function()&#123; // è¯»å–å®Œæˆåï¼Œbase64æ•°æ®ä¿å­˜åœ¨å¯¹è±¡çš„resultå±æ€§ä¸­ console.log(this.result) &#125;&#125;) å¼•ç”¨ FileReaderè¯¦è§£]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-routerè§£è¯»ï¼ˆä¸‰ï¼‰]]></title>
    <url>%2F2018%2F08%2F28%2Freact-router%E8%A7%A3%E8%AF%BB%EF%BC%88%E4%B8%89%EF%BC%89%2F</url>
    <content type="text"><![CDATA[history methods createBrowserHistoryé€šè¿‡ä¹‹å‰æˆ‘ä»¬å·²ç»çŸ¥é“äº†react-router-domçš„ historyæ¨¡å¼ä½¿ç”¨çš„æ˜¯historyåº“ä¸­çš„createBrowserHistoryæ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹å…¶ä¸­çš„å¥¥ç§˜ã€‚ var createBrowserHistory = function createBrowserHistory() { // arguments[0], ç”±ä¸Šä¸€èŠ‚å¯çŸ¥å®ƒæ˜¯ä¸€ä¸ªéå¿…ä¼ çš„object var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; (0, _invariant2.default)(_DOMUtils.canUseDOM, 'Browser history needs a DOM'); // ä¹‹å‰å°†historyèµ‹å€¼ç»™å˜é‡globalHistory var globalHistory = window.history; // _DOMUtils.js ä¸­å¤„ç†ä¸€äº›æµè§ˆå™¨å…¼å®¹æ€§ å’Œ æµè§ˆå™¨å†…æ ¸ã€æœºå‹åˆ¤æ–­çš„æ–¹æ³• // åˆ¤æ–­æ˜¯å¦éä¸»æµæœºå‹ä»¥åŠæµè§ˆå™¨ var canUseHistory = (0, _DOMUtils.supportsHistory)(); // æ˜¯å¦ä¸ºIEæµè§ˆå™¨ var needsHashChangeListener = !(0, _DOMUtils.supportsPopStateOnHashChange)(); // forceRefreshä¸ºtrueï¼Œä»£è¡¨å°†åœ¨é¡µé¢å¯¼èˆªæ—¶ä½¿ç”¨å®Œæ•´é¡µé¢åˆ·æ–°ã€‚å…¶ä»–å‚æ•°è¯·è‡ªè¡Œå‚è€ƒå®˜ç½‘æ–‡æ¡£ var _props$forceRefresh = props.forceRefresh, forceRefresh = _props$forceRefresh === undefined ? false : _props$forceRefresh, _props$getUserConfirm = props.getUserConfirmation, getUserConfirmation = _props$getUserConfirm === undefined ? _DOMUtils.getConfirmation : _props$getUserConfirm, _props$keyLength = props.keyLength, keyLength = _props$keyLength === undefined ? 6 : _props$keyLength; var basename = props.basename ? (0, _PathUtils.stripTrailingSlash)((0, _PathUtils.addLeadingSlash)(props.basename)) : ''; var getDOMLocation = function getDOMLocation(historyState) { var _ref = historyState || {}, key = _ref.key, state = _ref.state; var _window$location = window.location, pathname = _window$location.pathname, search = _window$location.search, hash = _window$location.hash; var path = pathname + search + hash; (0, _warning2.default)(!basename || (0, _PathUtils.hasBasename)(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path "' + path + '" to begin with "' + basename + '".'); if (basename) path = (0, _PathUtils.stripBasename)(path, basename); return (0, _LocationUtils.createLocation)(path, state, key); }; var createKey = function createKey() { return Math.random().toString(36).substr(2, keyLength); }; var transitionManager = (0, _createTransitionManager2.default)(); var setState = function setState(nextState) { _extends(history, nextState); history.length = globalHistory.length; transitionManager.notifyListeners(history.location, history.action); }; var handlePopState = function handlePopState(event) { if ((0, _DOMUtils.isExtraneousPopstateEvent)(event)) return; handlePop(getDOMLocation(event.state)); }; var handleHashChange = function handleHashChange() { handlePop(getDOMLocation(getHistoryState())); }; var forceNextPop = false; var handlePop = function handlePop(location) { if (forceNextPop) { forceNextPop = false; setState(); } else { var action = 'POP'; transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) { if (ok) { setState({ action: action, location: location }); } else { revertPop(location); } }); } }; var revertPop = function revertPop(fromLocation) { var toLocation = history.location; // TODO: We could probably make this more reliable by // keeping a list of keys we've seen in sessionStorage. // Instead, we just default to 0 for keys we don't know. var toIndex = allKeys.indexOf(toLocation.key); if (toIndex === -1) toIndex = 0; var fromIndex = allKeys.indexOf(fromLocation.key); if (fromIndex === -1) fromIndex = 0; var delta = toIndex - fromIndex; if (delta) { forceNextPop = true; go(delta); } }; var initialLocation = getDOMLocation(getHistoryState()); var allKeys = [initialLocation.key]; var createHref = function createHref(location) { return basename + (0, _PathUtils.createPath)(location); }; var push = function push(path, state) { (0, _warning2.default)(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored'); var action = 'PUSH'; // é‡å†™locationå¯¹è±¡ var location = (0, _LocationUtils.createLocation)(path, state, createKey(), history.location); transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) { if (!ok) return; var href = createHref(location); var key = location.key, state = location.state; if (canUseHistory) { globalHistory.pushState({ key: key, state: state }, null, href); if (forceRefresh) { window.location.href = href; } else { var prevIndex = allKeys.indexOf(history.location.key); var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1); nextKeys.push(location.key); allKeys = nextKeys; setState({ action: action, location: location }); } } else { (0, _warning2.default)(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history'); window.location.href = href; } }); }; var replace = function replace(path, state) { (0, _warning2.default)(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored'); var action = 'REPLACE'; var location = (0, _LocationUtils.createLocation)(path, state, createKey(), history.location); transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) { if (!ok) return; var href = createHref(location); var key = location.key, state = location.state; if (canUseHistory) { globalHistory.replaceState({ key: key, state: state }, null, href); if (forceRefresh) { window.location.replace(href); } else { var prevIndex = allKeys.indexOf(history.location.key); if (prevIndex !== -1) allKeys[prevIndex] = location.key; setState({ action: action, location: location }); } } else { (0, _warning2.default)(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history'); window.location.replace(href); } }); }; var go = function go(n) { globalHistory.go(n); }; var goBack = function goBack() { return go(-1); }; var goForward = function goForward() { return go(1); }; var listenerCount = 0; var checkDOMListeners = function checkDOMListeners(delta) { listenerCount += delta; if (listenerCount === 1) { (0, _DOMUtils.addEventListener)(window, PopStateEvent, handlePopState); if (needsHashChangeListener) (0, _DOMUtils.addEventListener)(window, HashChangeEvent, handleHashChange); } else if (listenerCount === 0) { (0, _DOMUtils.removeEventListener)(window, PopStateEvent, handlePopState); if (needsHashChangeListener) (0, _DOMUtils.removeEventListener)(window, HashChangeEvent, handleHashChange); } }; var isBlocked = false; var block = function block() { var prompt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var unblock = transitionManager.setPrompt(prompt); if (!isBlocked) { checkDOMListeners(1); isBlocked = true; } return function () { if (isBlocked) { isBlocked = false; checkDOMListeners(-1); } return unblock(); }; }; var listen = function listen(listener) { var unlisten = transitionManager.appendListener(listener); checkDOMListeners(1); return function () { checkDOMListeners(-1); unlisten(); }; }; var history = { length: globalHistory.length, action: 'POP', location: initialLocation, createHref: createHref, push: push, replace: replace, go: go, goBack: goBack, goForward: goForward, block: block, listen: listen }; return history; };]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-routerè§£è¯»ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2018%2F08%2F27%2Freact-router%E8%A7%A3%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[react-router çš„è·¯ç”±å®ç°æ—¢ç„¶çŸ¥é“äº†è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ react-router çš„å®ç°ï¼Œæˆ‘ä»¬æ‰“å¼€ react-router é¡¹ç›®åœ°å€,æŠŠé¡¹ç›®å…‹éš†ä¸‹æ¥ï¼Œæˆ–åˆ™ç›´æ¥åœ¨ github ä¸Šé¢„è§ˆï¼Œåœ¨ React å¼€å‘çš„é¡¹ç›®é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ router.push(â€˜homeâ€™) æ¥å®ç°é¡µé¢çš„è·³è½¬ï¼Œæ‰€ä»¥æˆ‘ä»¬æ£€ç´¢ä¸‹ï¼Œpush æ–¹æ³•çš„å®ç° æˆ‘ä»¬æ£€ç´¢åˆ°äº† 46ä¸ª js æ–‡ä»¶ï¼ŒğŸ˜‚ï¼Œä¸€èˆ¬åˆ°è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ”¾å¼ƒæºç é˜…è¯»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»Šå¤©çš„æ–‡ç« å°±åˆ°è¿™ç»“æŸï¼Œè°¢è°¢å¤§å®¶ï¼ å¼€ä¸ªç©ç¬‘ï¼Œæºç é˜…è¯»ä¸èƒ½è¿™ä¹ˆç²—ç³™ï¼Œreact-router 4.xç”¨æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£… react-router-domã€‚æ‰€ä»¥æˆ‘ä»¬æ‰¾åˆ° package ä¸‹çš„ react-router-dom/modules ç›®å½•ï¼Œç‚¹å¼€ index.js æ–‡ä»¶ã€‚ export BrowserRouter from "./BrowserRouter"; export HashRouter from "./HashRouter"; export Link from "./Link"; export MemoryRouter from "./MemoryRouter"; export NavLink from "./NavLink"; export Prompt from "./Prompt"; export Redirect from "./Redirect"; export Route from "./Route"; export Router from "./Router"; export StaticRouter from "./StaticRouter"; export Switch from "./Switch"; export generatePath from "./generatePath"; export matchPath from "./matchPath"; export withRouter from "./withRouter"; çœ‹åˆ° history å¯¹è±¡çš„å®ä¾‹ä¸é…ç½®çš„ mode æœ‰å…³ï¼Œreact-router-dom é€šè¿‡3ç§æ–¹å¼å®ç°äº†è·¯ç”±åˆ‡æ¢ã€‚æˆ‘ä»¬ä»Šå¤©è®²çš„å†…å®¹ç›¸åŒ¹é…çš„æ˜¯ createBrowserHistory çš„å®ç°æ–¹æ¡ˆ (å¦å¤–ä¸¤ä¸ªåˆ†åˆ«æ˜¯ï¼šcreateHashHistoryå’ŒcreateMemoryHistory)ã€‚ è¿™é‡Œ react-router-dom å°† BrowserRouterã€HashRouterã€Link æ‹†åˆ†ä¸ºå•ç‹¬ç»„ä»¶å®ç°ï¼Œä¹Ÿæ˜¯ä¸ react-router 3 ä¹‹é—´çš„åŒºåˆ«ä¹‹ä¸€ã€‚è¯¦ç»†æ–‡æ¡£æˆ‘ä»¬æ¥çœ‹ react-router-dom ä¸­çš„ BrowserRouter æºç ï¼š import warning from "warning"; import React from "react"; import PropTypes from "prop-types"; import { createBrowserHistory as createHistory } from "history"; import Router from "./Router"; /** * The public API for a that uses HTML5 history. */ class BrowserRouter extends React.Component { static propTypes = { basename: PropTypes.string, forceRefresh: PropTypes.bool, getUserConfirmation: PropTypes.func, keyLength: PropTypes.number, children: PropTypes.node }; history = createHistory(this.props); componentWillMount() { warning( !this.props.history, " ignores the history prop. To use a custom history, " + "use `import { Router }` instead of `import { BrowserRouter as Router }`." ); } render() { return ; } } export default BrowserRouter; ç”±ä¸Šå¯çŸ¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„ç»„ä»¶ï¼Œhistoryæ–¹å¼æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå«historyåº“ä¸­çš„ createBrowserHistory æ–¹æ³•ã€‚ æ¨¡æ‹Ÿå•é¡µé¢è·¯ç”±é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œå•é¡µé¢åº”ç”¨è·¯ç”±çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬ä¹Ÿå°è¯•å»å®ç°ä¸€ä¸ªã€‚åœ¨åšç®¡ç†ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨é¡µé¢çš„å·¦ä¾§æ”¾ç½®ä¸€ä¸ªå›ºå®šçš„å¯¼èˆª sidebarï¼Œé¡µé¢çš„å³ä¾§æ”¾ä¸ä¹‹åŒ¹é…çš„å†…å®¹ main ã€‚ç‚¹å‡»å¯¼èˆªæ—¶ï¼Œæˆ‘ä»¬åªå¸Œæœ›å†…å®¹è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœåˆ·æ–°äº†æ•´ä¸ªé¡µé¢ï¼Œåˆ°æ—¶å¯¼èˆªå’Œé€šç”¨çš„å¤´éƒ¨åº•éƒ¨ä¹Ÿè¿›è¡Œé‡ç»˜é‡æ’çš„è¯ï¼Œååˆ†æµªè´¹èµ„æºï¼Œä½“éªŒä¹Ÿä¼šä¸å¥½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨åˆ°æˆ‘ä»¬ä»Šå¤©å­¦ä¹ åˆ°çš„å†…å®¹ï¼Œé€šè¿‡ä½¿ç”¨ HTML5 çš„ pushState æ–¹æ³•å’Œ replaceState æ–¹æ³•æ¥å®ç°ï¼Œ æ€è·¯ï¼šé¦–å…ˆç»‘å®š click äº‹ä»¶ã€‚å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œé€šè¿‡ preventDefault å‡½æ•°é˜²æ­¢é»˜è®¤çš„è¡Œä¸ºï¼ˆé¡µé¢è·³è½¬ï¼‰ï¼ŒåŒæ—¶è¯»å–é“¾æ¥çš„åœ°å€ï¼ˆå¦‚æœæœ‰ jQueryï¼Œå¯ä»¥å†™æˆ$(this).attr(â€˜hrefâ€™)ï¼‰ï¼ŒæŠŠè¿™ä¸ªåœ°å€é€šè¿‡pushStateå¡å…¥æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼Œå†åˆ©ç”¨ AJAX æŠ€æœ¯æ‹‰å–ï¼ˆå¦‚æœæœ‰ jQueryï¼Œå¯ä»¥ä½¿ç”¨$.getæ–¹æ³•ï¼‰è¿™ä¸ªåœ°å€ä¸­çœŸæ­£çš„å†…å®¹ï¼ŒåŒæ—¶æ›¿æ¢å½“å‰ç½‘é¡µçš„å†…å®¹ã€‚ ä¸ºäº†å¤„ç†ç”¨æˆ·å‰è¿›ã€åé€€ï¼Œæˆ‘ä»¬ç›‘å¬ popstate äº‹ä»¶ã€‚å½“ç”¨æˆ·ç‚¹å‡»å‰è¿›æˆ–åé€€æŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨åœ°å€è‡ªåŠ¨è¢«è½¬æ¢æˆç›¸åº”çš„åœ°å€ï¼ŒåŒæ—¶popstateäº‹ä»¶å‘ç”Ÿã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å½“å‰çš„åœ°å€æŠ“å–ç›¸åº”çš„å†…å®¹ï¼Œç„¶ååˆ©ç”¨ AJAX æ‹‰å–è¿™ä¸ªåœ°å€çš„çœŸæ­£å†…å®¹ï¼Œå‘ˆç°ï¼Œå³å¯ã€‚ æœ€åï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸ä¼šæ”¹å˜é¡µé¢æ ‡é¢˜çš„ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥å¯¹ document.title èµ‹å€¼æ¥æ›´æ”¹é¡µé¢æ ‡é¢˜ã€‚ æ‰©å±•å¥½äº†,æˆ‘ä»¬ä»Šå¤©é€šè¿‡å¤šä¸ªæ–¹é¢æ¥è®²äº† pushState æ–¹æ³•å’Œ replaceState çš„åº”ç”¨ï¼Œä½ åº”è¯¥å¯¹è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•èƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒæ·±åˆ»çš„å°è±¡ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ historyå¯¹è±¡]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-routerè§£è¯»ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2018%2F08%2F27%2Freact-router%E8%A7%A3%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€å‰ç«¯è·¯ç”±æ˜¯é€šè¿‡æ”¹å˜URLï¼Œåœ¨ä¸é‡æ–°è¯·æ±‚é¡µé¢çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°é¡µé¢è§†å›¾ã€‚ç›®å‰åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿™ä¸€åŠŸèƒ½çš„å®ç°ä¸»è¦æœ‰2ç§: åˆ©ç”¨URLä¸­çš„hash åˆ©ç”¨H5ä¸­history pushState å’Œ replaceState äº†è§£ä¸€ä¸‹ history æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œèƒ½å¤Ÿæ— åˆ·æ–°çš„ä¿®æ”¹ç”¨æˆ·çš„æµè§ˆè®°å½•ï¼ŒpushSateï¼Œå’Œ replaceStateï¼ŒåŒºåˆ«çš„ pushState åœ¨ç”¨æˆ·è®¿é—®é¡µé¢åé¢æ·»åŠ ä¸€ä¸ªè®¿é—®è®°å½•ï¼Œ replaceState åˆ™æ˜¯ç›´æ¥æ›¿æ¢äº†å½“å‰è®¿é—®è®°å½• history å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯å·²ç»æœ‰å¾ˆå¤šå¾ˆå¥½å¾ˆè¯¦ç»†çš„ä»‹ç»æ–‡çŒ®ï¼Œè¿™é‡Œä¸å†åšæ€»ç»“historyå¯¹è±¡ history.pushStatehistory.pushStateæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºï¼š stateï¼šä¸€ä¸ªä¸æŒ‡å®šç½‘å€ç›¸å…³çš„çŠ¶æ€å¯¹è±¡ï¼Œpopstateäº‹ä»¶è§¦å‘æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šä¼ å…¥å›è°ƒå‡½æ•°ã€‚å¦‚æœä¸éœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œæ­¤å¤„å¯ä»¥å¡«nullã€‚titleï¼šæ–°é¡µé¢çš„æ ‡é¢˜ï¼Œä½†æ˜¯æ‰€æœ‰æµè§ˆå™¨ç›®å‰éƒ½å¿½ç•¥è¿™ä¸ªå€¼ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥å¡«nullã€‚urlï¼šæ–°çš„ç½‘å€ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢å¤„åœ¨åŒä¸€ä¸ªåŸŸã€‚æµè§ˆå™¨çš„åœ°å€æ å°†æ˜¾ç¤ºè¿™ä¸ªç½‘å€ã€‚å‡å®šå½“å‰ç½‘å€æ˜¯example.com/1.htmlï¼Œæˆ‘ä»¬ä½¿ç”¨pushStateæ–¹æ³•åœ¨æµè§ˆè®°å½•ï¼ˆhistoryå¯¹è±¡ï¼‰ä¸­æ·»åŠ ä¸€ä¸ªæ–°è®°å½•ã€‚ var stateObj = { foo: 'bar' }; history.pushState(stateObj, 'page 2', '2.html'); æ·»åŠ ä¸Šé¢è¿™ä¸ªæ–°è®°å½•åï¼Œæµè§ˆå™¨åœ°å€æ ç«‹åˆ»æ˜¾ç¤º example.com/2.htmlï¼Œä½†å¹¶ä¸ä¼šè·³è½¬åˆ° 2.htmlï¼Œç”šè‡³ä¹Ÿä¸ä¼šæ£€æŸ¥2.html æ˜¯å¦å­˜åœ¨ï¼Œå®ƒåªæ˜¯æˆä¸ºæµè§ˆå†å²ä¸­çš„æœ€æ–°è®°å½•ã€‚è¿™æ—¶ï¼Œä½ åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªæ–°çš„åœ°å€(æ¯”å¦‚è®¿é—® google.com )ï¼Œç„¶åç‚¹å‡»äº†å€’é€€æŒ‰é’®ï¼Œé¡µé¢çš„ URL å°†æ˜¾ç¤º 2.htmlï¼›ä½ å†ç‚¹å‡»ä¸€æ¬¡å€’é€€æŒ‰é’®ï¼ŒURL å°†æ˜¾ç¤º 1.htmlã€‚ æ€»ä¹‹ï¼ŒpushState æ–¹æ³•ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°ï¼Œåªæ˜¯å¯¼è‡´ history å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œåœ°å€æ ä¼šæœ‰ååº”ã€‚ å¦‚æœ pushState çš„ urlå‚æ•°ï¼Œè®¾ç½®äº†ä¸€ä¸ªæ–°çš„é”šç‚¹å€¼ï¼ˆå³hashï¼‰ï¼Œå¹¶ä¸ä¼šè§¦å‘ hashchange äº‹ä»¶ã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ history.pushState(null, null, 'https://twitter.com/hello'); ä¸Šé¢ä»£ç ä¸­ï¼ŒpushStateæƒ³è¦æ’å…¥ä¸€ä¸ªè·¨åŸŸçš„ç½‘å€ï¼Œå¯¼è‡´æŠ¥é”™ã€‚è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ï¼Œé˜²æ­¢æ¶æ„ä»£ç è®©ç”¨æˆ·ä»¥ä¸ºä»–ä»¬æ˜¯åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šã€‚ history.replaceStatehistory.replaceState æ–¹æ³•çš„å‚æ•°ä¸ pushState æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯å®ƒä¿®æ”¹æµè§ˆå†å²ä¸­å½“å‰çºªå½•,å‡å®šå½“å‰ç½‘é¡µæ˜¯ example.com/example.htmlã€‚ history.pushState({page: 1}, 'title 1', '?page=1'); history.pushState({page: 2}, 'title 2', '?page=2'); history.replaceState({page: 3}, 'title 3', '?page=3'); history.back() // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html?page=1 history.back() // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html history.go(2) // urlæ˜¾ç¤ºä¸ºhttp://example.com/example.html?page=3]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello Hexo]]></title>
    <url>%2F2018%2F08%2F24%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
